function wg(e,t){for(var s=0;s<t.length;s++){const a=t[s];if(typeof a!="string"&&!Array.isArray(a)){for(const n in a)if(n!=="default"&&!(n in e)){const o=Object.getOwnPropertyDescriptor(a,n);o&&Object.defineProperty(e,n,o.get?o:{enumerable:!0,get:()=>a[n]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function s(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(n){if(n.ep)return;n.ep=!0;const o=s(n);fetch(n.href,o)}})();var ut=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ng(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function _g(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var s=function a(){return this instanceof a?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};s.prototype=t.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var n=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(s,a,n.get?n:{enumerable:!0,get:function(){return e[a]}})}),s}var qh={exports:{}},Uo={},Vh={exports:{}},Y={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nn=Symbol.for("react.element"),Cg=Symbol.for("react.portal"),kg=Symbol.for("react.fragment"),Sg=Symbol.for("react.strict_mode"),Eg=Symbol.for("react.profiler"),Pg=Symbol.for("react.provider"),Tg=Symbol.for("react.context"),Rg=Symbol.for("react.forward_ref"),Ig=Symbol.for("react.suspense"),Ag=Symbol.for("react.memo"),Og=Symbol.for("react.lazy"),Od=Symbol.iterator;function Mg(e){return e===null||typeof e!="object"?null:(e=Od&&e[Od]||e["@@iterator"],typeof e=="function"?e:null)}var Hh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Gh=Object.assign,Wh={};function Wr(e,t,s){this.props=e,this.context=t,this.refs=Wh,this.updater=s||Hh}Wr.prototype.isReactComponent={};Wr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Wr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Kh(){}Kh.prototype=Wr.prototype;function jc(e,t,s){this.props=e,this.context=t,this.refs=Wh,this.updater=s||Hh}var wc=jc.prototype=new Kh;wc.constructor=jc;Gh(wc,Wr.prototype);wc.isPureReactComponent=!0;var Md=Array.isArray,Jh=Object.prototype.hasOwnProperty,Nc={current:null},Qh={key:!0,ref:!0,__self:!0,__source:!0};function Yh(e,t,s){var a,n={},o=null,i=null;if(t!=null)for(a in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(o=""+t.key),t)Jh.call(t,a)&&!Qh.hasOwnProperty(a)&&(n[a]=t[a]);var l=arguments.length-2;if(l===1)n.children=s;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];n.children=c}if(e&&e.defaultProps)for(a in l=e.defaultProps,l)n[a]===void 0&&(n[a]=l[a]);return{$$typeof:nn,type:e,key:o,ref:i,props:n,_owner:Nc.current}}function Lg(e,t){return{$$typeof:nn,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function _c(e){return typeof e=="object"&&e!==null&&e.$$typeof===nn}function Dg(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(s){return t[s]})}var Ld=/\/+/g;function fi(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Dg(""+e.key):t.toString(36)}function Bn(e,t,s,a,n){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case nn:case Cg:i=!0}}if(i)return i=e,n=n(i),e=a===""?"."+fi(i,0):a,Md(n)?(s="",e!=null&&(s=e.replace(Ld,"$&/")+"/"),Bn(n,t,s,"",function(d){return d})):n!=null&&(_c(n)&&(n=Lg(n,s+(!n.key||i&&i.key===n.key?"":(""+n.key).replace(Ld,"$&/")+"/")+e)),t.push(n)),1;if(i=0,a=a===""?".":a+":",Md(e))for(var l=0;l<e.length;l++){o=e[l];var c=a+fi(o,l);i+=Bn(o,t,s,c,n)}else if(c=Mg(e),typeof c=="function")for(e=c.call(e),l=0;!(o=e.next()).done;)o=o.value,c=a+fi(o,l++),i+=Bn(o,t,s,c,n);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function yn(e,t,s){if(e==null)return e;var a=[],n=0;return Bn(e,a,"","",function(o){return t.call(s,o,n++)}),a}function $g(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(s){(e._status===0||e._status===-1)&&(e._status=1,e._result=s)},function(s){(e._status===0||e._status===-1)&&(e._status=2,e._result=s)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var qe={current:null},qn={transition:null},Ug={ReactCurrentDispatcher:qe,ReactCurrentBatchConfig:qn,ReactCurrentOwner:Nc};function Xh(){throw Error("act(...) is not supported in production builds of React.")}Y.Children={map:yn,forEach:function(e,t,s){yn(e,function(){t.apply(this,arguments)},s)},count:function(e){var t=0;return yn(e,function(){t++}),t},toArray:function(e){return yn(e,function(t){return t})||[]},only:function(e){if(!_c(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Y.Component=Wr;Y.Fragment=kg;Y.Profiler=Eg;Y.PureComponent=jc;Y.StrictMode=Sg;Y.Suspense=Ig;Y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ug;Y.act=Xh;Y.cloneElement=function(e,t,s){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=Gh({},e.props),n=e.key,o=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,i=Nc.current),t.key!==void 0&&(n=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)Jh.call(t,c)&&!Qh.hasOwnProperty(c)&&(a[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)a.children=s;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];a.children=l}return{$$typeof:nn,type:e.type,key:n,ref:o,props:a,_owner:i}};Y.createContext=function(e){return e={$$typeof:Tg,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Pg,_context:e},e.Consumer=e};Y.createElement=Yh;Y.createFactory=function(e){var t=Yh.bind(null,e);return t.type=e,t};Y.createRef=function(){return{current:null}};Y.forwardRef=function(e){return{$$typeof:Rg,render:e}};Y.isValidElement=_c;Y.lazy=function(e){return{$$typeof:Og,_payload:{_status:-1,_result:e},_init:$g}};Y.memo=function(e,t){return{$$typeof:Ag,type:e,compare:t===void 0?null:t}};Y.startTransition=function(e){var t=qn.transition;qn.transition={};try{e()}finally{qn.transition=t}};Y.unstable_act=Xh;Y.useCallback=function(e,t){return qe.current.useCallback(e,t)};Y.useContext=function(e){return qe.current.useContext(e)};Y.useDebugValue=function(){};Y.useDeferredValue=function(e){return qe.current.useDeferredValue(e)};Y.useEffect=function(e,t){return qe.current.useEffect(e,t)};Y.useId=function(){return qe.current.useId()};Y.useImperativeHandle=function(e,t,s){return qe.current.useImperativeHandle(e,t,s)};Y.useInsertionEffect=function(e,t){return qe.current.useInsertionEffect(e,t)};Y.useLayoutEffect=function(e,t){return qe.current.useLayoutEffect(e,t)};Y.useMemo=function(e,t){return qe.current.useMemo(e,t)};Y.useReducer=function(e,t,s){return qe.current.useReducer(e,t,s)};Y.useRef=function(e){return qe.current.useRef(e)};Y.useState=function(e){return qe.current.useState(e)};Y.useSyncExternalStore=function(e,t,s){return qe.current.useSyncExternalStore(e,t,s)};Y.useTransition=function(){return qe.current.useTransition()};Y.version="18.3.1";Vh.exports=Y;var N=Vh.exports;const Zh=Ng(N),Fg=wg({__proto__:null,default:Zh},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zg=N,Bg=Symbol.for("react.element"),qg=Symbol.for("react.fragment"),Vg=Object.prototype.hasOwnProperty,Hg=zg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Gg={key:!0,ref:!0,__self:!0,__source:!0};function em(e,t,s){var a,n={},o=null,i=null;s!==void 0&&(o=""+s),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(i=t.ref);for(a in t)Vg.call(t,a)&&!Gg.hasOwnProperty(a)&&(n[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)n[a]===void 0&&(n[a]=t[a]);return{$$typeof:Bg,type:e,key:o,ref:i,props:n,_owner:Hg.current}}Uo.Fragment=qg;Uo.jsx=em;Uo.jsxs=em;qh.exports=Uo;var r=qh.exports,sl={},tm={exports:{}},rt={},sm={exports:{}},rm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(A,H){var V=A.length;A.push(H);e:for(;0<V;){var Z=V-1>>>1,P=A[Z];if(0<n(P,H))A[Z]=H,A[V]=P,V=Z;else break e}}function s(A){return A.length===0?null:A[0]}function a(A){if(A.length===0)return null;var H=A[0],V=A.pop();if(V!==H){A[0]=V;e:for(var Z=0,P=A.length,U=P>>>1;Z<U;){var z=2*(Z+1)-1,X=A[z],le=z+1,k=A[le];if(0>n(X,V))le<P&&0>n(k,X)?(A[Z]=k,A[le]=V,Z=le):(A[Z]=X,A[z]=V,Z=z);else if(le<P&&0>n(k,V))A[Z]=k,A[le]=V,Z=le;else break e}}return H}function n(A,H){var V=A.sortIndex-H.sortIndex;return V!==0?V:A.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var i=Date,l=i.now();e.unstable_now=function(){return i.now()-l}}var c=[],d=[],h=1,m=null,p=3,b=!1,x=!1,j=!1,_=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function u(A){for(var H=s(d);H!==null;){if(H.callback===null)a(d);else if(H.startTime<=A)a(d),H.sortIndex=H.expirationTime,t(c,H);else break;H=s(d)}}function f(A){if(j=!1,u(A),!x)if(s(c)!==null)x=!0,E(w);else{var H=s(d);H!==null&&ee(f,H.startTime-A)}}function w(A,H){x=!1,j&&(j=!1,v(S),S=-1),b=!0;var V=p;try{for(u(H),m=s(c);m!==null&&(!(m.expirationTime>H)||A&&!K());){var Z=m.callback;if(typeof Z=="function"){m.callback=null,p=m.priorityLevel;var P=Z(m.expirationTime<=H);H=e.unstable_now(),typeof P=="function"?m.callback=P:m===s(c)&&a(c),u(H)}else a(c);m=s(c)}if(m!==null)var U=!0;else{var z=s(d);z!==null&&ee(f,z.startTime-H),U=!1}return U}finally{m=null,p=V,b=!1}}var y=!1,C=null,S=-1,I=5,L=-1;function K(){return!(e.unstable_now()-L<I)}function se(){if(C!==null){var A=e.unstable_now();L=A;var H=!0;try{H=C(!0,A)}finally{H?he():(y=!1,C=null)}}else y=!1}var he;if(typeof g=="function")he=function(){g(se)};else if(typeof MessageChannel<"u"){var Ue=new MessageChannel,He=Ue.port2;Ue.port1.onmessage=se,he=function(){He.postMessage(null)}}else he=function(){_(se,0)};function E(A){C=A,y||(y=!0,he())}function ee(A,H){S=_(function(){A(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(A){A.callback=null},e.unstable_continueExecution=function(){x||b||(x=!0,E(w))},e.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<A?Math.floor(1e3/A):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return s(c)},e.unstable_next=function(A){switch(p){case 1:case 2:case 3:var H=3;break;default:H=p}var V=p;p=H;try{return A()}finally{p=V}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(A,H){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var V=p;p=A;try{return H()}finally{p=V}},e.unstable_scheduleCallback=function(A,H,V){var Z=e.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?Z+V:Z):V=Z,A){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=V+P,A={id:h++,callback:H,priorityLevel:A,startTime:V,expirationTime:P,sortIndex:-1},V>Z?(A.sortIndex=V,t(d,A),s(c)===null&&A===s(d)&&(j?(v(S),S=-1):j=!0,ee(f,V-Z))):(A.sortIndex=P,t(c,A),x||b||(x=!0,E(w))),A},e.unstable_shouldYield=K,e.unstable_wrapCallback=function(A){var H=p;return function(){var V=p;p=H;try{return A.apply(this,arguments)}finally{p=V}}}})(rm);sm.exports=rm;var Wg=sm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kg=N,st=Wg;function R(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var am=new Set,Ia={};function Xs(e,t){Ar(e,t),Ar(e+"Capture",t)}function Ar(e,t){for(Ia[e]=t,e=0;e<t.length;e++)am.add(t[e])}var Vt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rl=Object.prototype.hasOwnProperty,Jg=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Dd={},$d={};function Qg(e){return rl.call($d,e)?!0:rl.call(Dd,e)?!1:Jg.test(e)?$d[e]=!0:(Dd[e]=!0,!1)}function Yg(e,t,s,a){if(s!==null&&s.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Xg(e,t,s,a){if(t===null||typeof t>"u"||Yg(e,t,s,a))return!0;if(a)return!1;if(s!==null)switch(s.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ve(e,t,s,a,n,o,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=n,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var Ae={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ae[e]=new Ve(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ae[t]=new Ve(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ae[e]=new Ve(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ae[e]=new Ve(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ae[e]=new Ve(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ae[e]=new Ve(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ae[e]=new Ve(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ae[e]=new Ve(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ae[e]=new Ve(e,5,!1,e.toLowerCase(),null,!1,!1)});var Cc=/[\-:]([a-z])/g;function kc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Cc,kc);Ae[t]=new Ve(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Cc,kc);Ae[t]=new Ve(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Cc,kc);Ae[t]=new Ve(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ae[e]=new Ve(e,1,!1,e.toLowerCase(),null,!1,!1)});Ae.xlinkHref=new Ve("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ae[e]=new Ve(e,1,!1,e.toLowerCase(),null,!0,!0)});function Sc(e,t,s,a){var n=Ae.hasOwnProperty(t)?Ae[t]:null;(n!==null?n.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Xg(t,s,n,a)&&(s=null),a||n===null?Qg(t)&&(s===null?e.removeAttribute(t):e.setAttribute(t,""+s)):n.mustUseProperty?e[n.propertyName]=s===null?n.type===3?!1:"":s:(t=n.attributeName,a=n.attributeNamespace,s===null?e.removeAttribute(t):(n=n.type,s=n===3||n===4&&s===!0?"":""+s,a?e.setAttributeNS(a,t,s):e.setAttribute(t,s))))}var Qt=Kg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bn=Symbol.for("react.element"),hr=Symbol.for("react.portal"),mr=Symbol.for("react.fragment"),Ec=Symbol.for("react.strict_mode"),al=Symbol.for("react.profiler"),nm=Symbol.for("react.provider"),om=Symbol.for("react.context"),Pc=Symbol.for("react.forward_ref"),nl=Symbol.for("react.suspense"),ol=Symbol.for("react.suspense_list"),Tc=Symbol.for("react.memo"),ts=Symbol.for("react.lazy"),im=Symbol.for("react.offscreen"),Ud=Symbol.iterator;function sa(e){return e===null||typeof e!="object"?null:(e=Ud&&e[Ud]||e["@@iterator"],typeof e=="function"?e:null)}var ge=Object.assign,pi;function ua(e){if(pi===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);pi=t&&t[1]||""}return`
`+pi+e}var gi=!1;function xi(e,t){if(!e||gi)return"";gi=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var a=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){a=d}e.call(t.prototype)}else{try{throw Error()}catch(d){a=d}e()}}catch(d){if(d&&a&&typeof d.stack=="string"){for(var n=d.stack.split(`
`),o=a.stack.split(`
`),i=n.length-1,l=o.length-1;1<=i&&0<=l&&n[i]!==o[l];)l--;for(;1<=i&&0<=l;i--,l--)if(n[i]!==o[l]){if(i!==1||l!==1)do if(i--,l--,0>l||n[i]!==o[l]){var c=`
`+n[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=l);break}}}finally{gi=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?ua(e):""}function Zg(e){switch(e.tag){case 5:return ua(e.type);case 16:return ua("Lazy");case 13:return ua("Suspense");case 19:return ua("SuspenseList");case 0:case 2:case 15:return e=xi(e.type,!1),e;case 11:return e=xi(e.type.render,!1),e;case 1:return e=xi(e.type,!0),e;default:return""}}function il(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case mr:return"Fragment";case hr:return"Portal";case al:return"Profiler";case Ec:return"StrictMode";case nl:return"Suspense";case ol:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case om:return(e.displayName||"Context")+".Consumer";case nm:return(e._context.displayName||"Context")+".Provider";case Pc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Tc:return t=e.displayName||null,t!==null?t:il(e.type)||"Memo";case ts:t=e._payload,e=e._init;try{return il(e(t))}catch{}}return null}function ex(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return il(t);case 8:return t===Ec?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ws(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function lm(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function tx(e){var t=lm(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var n=s.get,o=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(i){a=""+i,o.call(this,i)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(i){a=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function jn(e){e._valueTracker||(e._valueTracker=tx(e))}function cm(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),a="";return e&&(a=lm(e)?e.checked?"true":"false":e.value),e=a,e!==s?(t.setValue(e),!0):!1}function no(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ll(e,t){var s=t.checked;return ge({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function Fd(e,t){var s=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;s=ws(t.value!=null?t.value:s),e._wrapperState={initialChecked:a,initialValue:s,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function dm(e,t){t=t.checked,t!=null&&Sc(e,"checked",t,!1)}function cl(e,t){dm(e,t);var s=ws(t.value),a=t.type;if(s!=null)a==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?dl(e,t.type,s):t.hasOwnProperty("defaultValue")&&dl(e,t.type,ws(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function zd(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function dl(e,t,s){(t!=="number"||no(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var ha=Array.isArray;function _r(e,t,s,a){if(e=e.options,t){t={};for(var n=0;n<s.length;n++)t["$"+s[n]]=!0;for(s=0;s<e.length;s++)n=t.hasOwnProperty("$"+e[s].value),e[s].selected!==n&&(e[s].selected=n),n&&a&&(e[s].defaultSelected=!0)}else{for(s=""+ws(s),t=null,n=0;n<e.length;n++){if(e[n].value===s){e[n].selected=!0,a&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function ul(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(R(91));return ge({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Bd(e,t){var s=t.value;if(s==null){if(s=t.children,t=t.defaultValue,s!=null){if(t!=null)throw Error(R(92));if(ha(s)){if(1<s.length)throw Error(R(93));s=s[0]}t=s}t==null&&(t=""),s=t}e._wrapperState={initialValue:ws(s)}}function um(e,t){var s=ws(t.value),a=ws(t.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),t.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),a!=null&&(e.defaultValue=""+a)}function qd(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function hm(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hl(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?hm(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var wn,mm=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,s,a,n){MSApp.execUnsafeLocalFunction(function(){return e(t,s,a,n)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(wn=wn||document.createElement("div"),wn.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=wn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Aa(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var ga={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sx=["Webkit","ms","Moz","O"];Object.keys(ga).forEach(function(e){sx.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ga[t]=ga[e]})});function fm(e,t,s){return t==null||typeof t=="boolean"||t===""?"":s||typeof t!="number"||t===0||ga.hasOwnProperty(e)&&ga[e]?(""+t).trim():t+"px"}function pm(e,t){e=e.style;for(var s in t)if(t.hasOwnProperty(s)){var a=s.indexOf("--")===0,n=fm(s,t[s],a);s==="float"&&(s="cssFloat"),a?e.setProperty(s,n):e[s]=n}}var rx=ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ml(e,t){if(t){if(rx[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(R(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(R(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(R(61))}if(t.style!=null&&typeof t.style!="object")throw Error(R(62))}}function fl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pl=null;function Rc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var gl=null,Cr=null,kr=null;function Vd(e){if(e=cn(e)){if(typeof gl!="function")throw Error(R(280));var t=e.stateNode;t&&(t=Vo(t),gl(e.stateNode,e.type,t))}}function gm(e){Cr?kr?kr.push(e):kr=[e]:Cr=e}function xm(){if(Cr){var e=Cr,t=kr;if(kr=Cr=null,Vd(e),t)for(e=0;e<t.length;e++)Vd(t[e])}}function vm(e,t){return e(t)}function ym(){}var vi=!1;function bm(e,t,s){if(vi)return e(t,s);vi=!0;try{return vm(e,t,s)}finally{vi=!1,(Cr!==null||kr!==null)&&(ym(),xm())}}function Oa(e,t){var s=e.stateNode;if(s===null)return null;var a=Vo(s);if(a===null)return null;s=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(R(231,t,typeof s));return s}var xl=!1;if(Vt)try{var ra={};Object.defineProperty(ra,"passive",{get:function(){xl=!0}}),window.addEventListener("test",ra,ra),window.removeEventListener("test",ra,ra)}catch{xl=!1}function ax(e,t,s,a,n,o,i,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(s,d)}catch(h){this.onError(h)}}var xa=!1,oo=null,io=!1,vl=null,nx={onError:function(e){xa=!0,oo=e}};function ox(e,t,s,a,n,o,i,l,c){xa=!1,oo=null,ax.apply(nx,arguments)}function ix(e,t,s,a,n,o,i,l,c){if(ox.apply(this,arguments),xa){if(xa){var d=oo;xa=!1,oo=null}else throw Error(R(198));io||(io=!0,vl=d)}}function Zs(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function jm(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Hd(e){if(Zs(e)!==e)throw Error(R(188))}function lx(e){var t=e.alternate;if(!t){if(t=Zs(e),t===null)throw Error(R(188));return t!==e?null:e}for(var s=e,a=t;;){var n=s.return;if(n===null)break;var o=n.alternate;if(o===null){if(a=n.return,a!==null){s=a;continue}break}if(n.child===o.child){for(o=n.child;o;){if(o===s)return Hd(n),e;if(o===a)return Hd(n),t;o=o.sibling}throw Error(R(188))}if(s.return!==a.return)s=n,a=o;else{for(var i=!1,l=n.child;l;){if(l===s){i=!0,s=n,a=o;break}if(l===a){i=!0,a=n,s=o;break}l=l.sibling}if(!i){for(l=o.child;l;){if(l===s){i=!0,s=o,a=n;break}if(l===a){i=!0,a=o,s=n;break}l=l.sibling}if(!i)throw Error(R(189))}}if(s.alternate!==a)throw Error(R(190))}if(s.tag!==3)throw Error(R(188));return s.stateNode.current===s?e:t}function wm(e){return e=lx(e),e!==null?Nm(e):null}function Nm(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Nm(e);if(t!==null)return t;e=e.sibling}return null}var _m=st.unstable_scheduleCallback,Gd=st.unstable_cancelCallback,cx=st.unstable_shouldYield,dx=st.unstable_requestPaint,be=st.unstable_now,ux=st.unstable_getCurrentPriorityLevel,Ic=st.unstable_ImmediatePriority,Cm=st.unstable_UserBlockingPriority,lo=st.unstable_NormalPriority,hx=st.unstable_LowPriority,km=st.unstable_IdlePriority,Fo=null,It=null;function mx(e){if(It&&typeof It.onCommitFiberRoot=="function")try{It.onCommitFiberRoot(Fo,e,void 0,(e.current.flags&128)===128)}catch{}}var jt=Math.clz32?Math.clz32:gx,fx=Math.log,px=Math.LN2;function gx(e){return e>>>=0,e===0?32:31-(fx(e)/px|0)|0}var Nn=64,_n=4194304;function ma(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function co(e,t){var s=e.pendingLanes;if(s===0)return 0;var a=0,n=e.suspendedLanes,o=e.pingedLanes,i=s&268435455;if(i!==0){var l=i&~n;l!==0?a=ma(l):(o&=i,o!==0&&(a=ma(o)))}else i=s&~n,i!==0?a=ma(i):o!==0&&(a=ma(o));if(a===0)return 0;if(t!==0&&t!==a&&!(t&n)&&(n=a&-a,o=t&-t,n>=o||n===16&&(o&4194240)!==0))return t;if(a&4&&(a|=s&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)s=31-jt(t),n=1<<s,a|=e[s],t&=~n;return a}function xx(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vx(e,t){for(var s=e.suspendedLanes,a=e.pingedLanes,n=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-jt(o),l=1<<i,c=n[i];c===-1?(!(l&s)||l&a)&&(n[i]=xx(l,t)):c<=t&&(e.expiredLanes|=l),o&=~l}}function yl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Sm(){var e=Nn;return Nn<<=1,!(Nn&4194240)&&(Nn=64),e}function yi(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function on(e,t,s){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-jt(t),e[t]=s}function yx(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<s;){var n=31-jt(s),o=1<<n;t[n]=0,a[n]=-1,e[n]=-1,s&=~o}}function Ac(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var a=31-jt(s),n=1<<a;n&t|e[a]&t&&(e[a]|=t),s&=~n}}var re=0;function Em(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Pm,Oc,Tm,Rm,Im,bl=!1,Cn=[],us=null,hs=null,ms=null,Ma=new Map,La=new Map,as=[],bx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Wd(e,t){switch(e){case"focusin":case"focusout":us=null;break;case"dragenter":case"dragleave":hs=null;break;case"mouseover":case"mouseout":ms=null;break;case"pointerover":case"pointerout":Ma.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":La.delete(t.pointerId)}}function aa(e,t,s,a,n,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:s,eventSystemFlags:a,nativeEvent:o,targetContainers:[n]},t!==null&&(t=cn(t),t!==null&&Oc(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function jx(e,t,s,a,n){switch(t){case"focusin":return us=aa(us,e,t,s,a,n),!0;case"dragenter":return hs=aa(hs,e,t,s,a,n),!0;case"mouseover":return ms=aa(ms,e,t,s,a,n),!0;case"pointerover":var o=n.pointerId;return Ma.set(o,aa(Ma.get(o)||null,e,t,s,a,n)),!0;case"gotpointercapture":return o=n.pointerId,La.set(o,aa(La.get(o)||null,e,t,s,a,n)),!0}return!1}function Am(e){var t=Ds(e.target);if(t!==null){var s=Zs(t);if(s!==null){if(t=s.tag,t===13){if(t=jm(s),t!==null){e.blockedOn=t,Im(e.priority,function(){Tm(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Vn(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=jl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var a=new s.constructor(s.type,s);pl=a,s.target.dispatchEvent(a),pl=null}else return t=cn(s),t!==null&&Oc(t),e.blockedOn=s,!1;t.shift()}return!0}function Kd(e,t,s){Vn(e)&&s.delete(t)}function wx(){bl=!1,us!==null&&Vn(us)&&(us=null),hs!==null&&Vn(hs)&&(hs=null),ms!==null&&Vn(ms)&&(ms=null),Ma.forEach(Kd),La.forEach(Kd)}function na(e,t){e.blockedOn===t&&(e.blockedOn=null,bl||(bl=!0,st.unstable_scheduleCallback(st.unstable_NormalPriority,wx)))}function Da(e){function t(n){return na(n,e)}if(0<Cn.length){na(Cn[0],e);for(var s=1;s<Cn.length;s++){var a=Cn[s];a.blockedOn===e&&(a.blockedOn=null)}}for(us!==null&&na(us,e),hs!==null&&na(hs,e),ms!==null&&na(ms,e),Ma.forEach(t),La.forEach(t),s=0;s<as.length;s++)a=as[s],a.blockedOn===e&&(a.blockedOn=null);for(;0<as.length&&(s=as[0],s.blockedOn===null);)Am(s),s.blockedOn===null&&as.shift()}var Sr=Qt.ReactCurrentBatchConfig,uo=!0;function Nx(e,t,s,a){var n=re,o=Sr.transition;Sr.transition=null;try{re=1,Mc(e,t,s,a)}finally{re=n,Sr.transition=o}}function _x(e,t,s,a){var n=re,o=Sr.transition;Sr.transition=null;try{re=4,Mc(e,t,s,a)}finally{re=n,Sr.transition=o}}function Mc(e,t,s,a){if(uo){var n=jl(e,t,s,a);if(n===null)Pi(e,t,a,ho,s),Wd(e,a);else if(jx(n,e,t,s,a))a.stopPropagation();else if(Wd(e,a),t&4&&-1<bx.indexOf(e)){for(;n!==null;){var o=cn(n);if(o!==null&&Pm(o),o=jl(e,t,s,a),o===null&&Pi(e,t,a,ho,s),o===n)break;n=o}n!==null&&a.stopPropagation()}else Pi(e,t,a,null,s)}}var ho=null;function jl(e,t,s,a){if(ho=null,e=Rc(a),e=Ds(e),e!==null)if(t=Zs(e),t===null)e=null;else if(s=t.tag,s===13){if(e=jm(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ho=e,null}function Om(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ux()){case Ic:return 1;case Cm:return 4;case lo:case hx:return 16;case km:return 536870912;default:return 16}default:return 16}}var is=null,Lc=null,Hn=null;function Mm(){if(Hn)return Hn;var e,t=Lc,s=t.length,a,n="value"in is?is.value:is.textContent,o=n.length;for(e=0;e<s&&t[e]===n[e];e++);var i=s-e;for(a=1;a<=i&&t[s-a]===n[o-a];a++);return Hn=n.slice(e,1<a?1-a:void 0)}function Gn(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function kn(){return!0}function Jd(){return!1}function at(e){function t(s,a,n,o,i){this._reactName=s,this._targetInst=n,this.type=a,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(s=e[l],this[l]=s?s(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?kn:Jd,this.isPropagationStopped=Jd,this}return ge(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=kn)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=kn)},persist:function(){},isPersistent:kn}),t}var Kr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dc=at(Kr),ln=ge({},Kr,{view:0,detail:0}),Cx=at(ln),bi,ji,oa,zo=ge({},ln,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$c,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==oa&&(oa&&e.type==="mousemove"?(bi=e.screenX-oa.screenX,ji=e.screenY-oa.screenY):ji=bi=0,oa=e),bi)},movementY:function(e){return"movementY"in e?e.movementY:ji}}),Qd=at(zo),kx=ge({},zo,{dataTransfer:0}),Sx=at(kx),Ex=ge({},ln,{relatedTarget:0}),wi=at(Ex),Px=ge({},Kr,{animationName:0,elapsedTime:0,pseudoElement:0}),Tx=at(Px),Rx=ge({},Kr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ix=at(Rx),Ax=ge({},Kr,{data:0}),Yd=at(Ax),Ox={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Mx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dx(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Lx[e])?!!t[e]:!1}function $c(){return Dx}var $x=ge({},ln,{key:function(e){if(e.key){var t=Ox[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Gn(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Mx[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$c,charCode:function(e){return e.type==="keypress"?Gn(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Gn(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ux=at($x),Fx=ge({},zo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xd=at(Fx),zx=ge({},ln,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$c}),Bx=at(zx),qx=ge({},Kr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Vx=at(qx),Hx=ge({},zo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Gx=at(Hx),Wx=[9,13,27,32],Uc=Vt&&"CompositionEvent"in window,va=null;Vt&&"documentMode"in document&&(va=document.documentMode);var Kx=Vt&&"TextEvent"in window&&!va,Lm=Vt&&(!Uc||va&&8<va&&11>=va),Zd=" ",eu=!1;function Dm(e,t){switch(e){case"keyup":return Wx.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $m(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var fr=!1;function Jx(e,t){switch(e){case"compositionend":return $m(t);case"keypress":return t.which!==32?null:(eu=!0,Zd);case"textInput":return e=t.data,e===Zd&&eu?null:e;default:return null}}function Qx(e,t){if(fr)return e==="compositionend"||!Uc&&Dm(e,t)?(e=Mm(),Hn=Lc=is=null,fr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Lm&&t.locale!=="ko"?null:t.data;default:return null}}var Yx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Yx[e.type]:t==="textarea"}function Um(e,t,s,a){gm(a),t=mo(t,"onChange"),0<t.length&&(s=new Dc("onChange","change",null,s,a),e.push({event:s,listeners:t}))}var ya=null,$a=null;function Xx(e){Qm(e,0)}function Bo(e){var t=xr(e);if(cm(t))return e}function Zx(e,t){if(e==="change")return t}var Fm=!1;if(Vt){var Ni;if(Vt){var _i="oninput"in document;if(!_i){var su=document.createElement("div");su.setAttribute("oninput","return;"),_i=typeof su.oninput=="function"}Ni=_i}else Ni=!1;Fm=Ni&&(!document.documentMode||9<document.documentMode)}function ru(){ya&&(ya.detachEvent("onpropertychange",zm),$a=ya=null)}function zm(e){if(e.propertyName==="value"&&Bo($a)){var t=[];Um(t,$a,e,Rc(e)),bm(Xx,t)}}function e0(e,t,s){e==="focusin"?(ru(),ya=t,$a=s,ya.attachEvent("onpropertychange",zm)):e==="focusout"&&ru()}function t0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Bo($a)}function s0(e,t){if(e==="click")return Bo(t)}function r0(e,t){if(e==="input"||e==="change")return Bo(t)}function a0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Nt=typeof Object.is=="function"?Object.is:a0;function Ua(e,t){if(Nt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),a=Object.keys(t);if(s.length!==a.length)return!1;for(a=0;a<s.length;a++){var n=s[a];if(!rl.call(t,n)||!Nt(e[n],t[n]))return!1}return!0}function au(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function nu(e,t){var s=au(e);e=0;for(var a;s;){if(s.nodeType===3){if(a=e+s.textContent.length,e<=t&&a>=t)return{node:s,offset:t-e};e=a}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=au(s)}}function Bm(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Bm(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function qm(){for(var e=window,t=no();t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=no(e.document)}return t}function Fc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function n0(e){var t=qm(),s=e.focusedElem,a=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&Bm(s.ownerDocument.documentElement,s)){if(a!==null&&Fc(s)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if(e=(t=s.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var n=s.textContent.length,o=Math.min(a.start,n);a=a.end===void 0?o:Math.min(a.end,n),!e.extend&&o>a&&(n=a,a=o,o=n),n=nu(s,o);var i=nu(s,a);n&&i&&(e.rangeCount!==1||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(n.node,n.offset),e.removeAllRanges(),o>a?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=s;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<t.length;s++)e=t[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var o0=Vt&&"documentMode"in document&&11>=document.documentMode,pr=null,wl=null,ba=null,Nl=!1;function ou(e,t,s){var a=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Nl||pr==null||pr!==no(a)||(a=pr,"selectionStart"in a&&Fc(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),ba&&Ua(ba,a)||(ba=a,a=mo(wl,"onSelect"),0<a.length&&(t=new Dc("onSelect","select",null,t,s),e.push({event:t,listeners:a}),t.target=pr)))}function Sn(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var gr={animationend:Sn("Animation","AnimationEnd"),animationiteration:Sn("Animation","AnimationIteration"),animationstart:Sn("Animation","AnimationStart"),transitionend:Sn("Transition","TransitionEnd")},Ci={},Vm={};Vt&&(Vm=document.createElement("div").style,"AnimationEvent"in window||(delete gr.animationend.animation,delete gr.animationiteration.animation,delete gr.animationstart.animation),"TransitionEvent"in window||delete gr.transitionend.transition);function qo(e){if(Ci[e])return Ci[e];if(!gr[e])return e;var t=gr[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in Vm)return Ci[e]=t[s];return e}var Hm=qo("animationend"),Gm=qo("animationiteration"),Wm=qo("animationstart"),Km=qo("transitionend"),Jm=new Map,iu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cs(e,t){Jm.set(e,t),Xs(t,[e])}for(var ki=0;ki<iu.length;ki++){var Si=iu[ki],i0=Si.toLowerCase(),l0=Si[0].toUpperCase()+Si.slice(1);Cs(i0,"on"+l0)}Cs(Hm,"onAnimationEnd");Cs(Gm,"onAnimationIteration");Cs(Wm,"onAnimationStart");Cs("dblclick","onDoubleClick");Cs("focusin","onFocus");Cs("focusout","onBlur");Cs(Km,"onTransitionEnd");Ar("onMouseEnter",["mouseout","mouseover"]);Ar("onMouseLeave",["mouseout","mouseover"]);Ar("onPointerEnter",["pointerout","pointerover"]);Ar("onPointerLeave",["pointerout","pointerover"]);Xs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Xs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Xs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Xs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Xs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Xs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),c0=new Set("cancel close invalid load scroll toggle".split(" ").concat(fa));function lu(e,t,s){var a=e.type||"unknown-event";e.currentTarget=s,ix(a,t,void 0,e),e.currentTarget=null}function Qm(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var a=e[s],n=a.event;a=a.listeners;e:{var o=void 0;if(t)for(var i=a.length-1;0<=i;i--){var l=a[i],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==o&&n.isPropagationStopped())break e;lu(n,l,d),o=c}else for(i=0;i<a.length;i++){if(l=a[i],c=l.instance,d=l.currentTarget,l=l.listener,c!==o&&n.isPropagationStopped())break e;lu(n,l,d),o=c}}}if(io)throw e=vl,io=!1,vl=null,e}function ce(e,t){var s=t[El];s===void 0&&(s=t[El]=new Set);var a=e+"__bubble";s.has(a)||(Ym(t,e,2,!1),s.add(a))}function Ei(e,t,s){var a=0;t&&(a|=4),Ym(s,e,a,t)}var En="_reactListening"+Math.random().toString(36).slice(2);function Fa(e){if(!e[En]){e[En]=!0,am.forEach(function(s){s!=="selectionchange"&&(c0.has(s)||Ei(s,!1,e),Ei(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[En]||(t[En]=!0,Ei("selectionchange",!1,t))}}function Ym(e,t,s,a){switch(Om(t)){case 1:var n=Nx;break;case 4:n=_x;break;default:n=Mc}s=n.bind(null,t,s,e),n=void 0,!xl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),a?n!==void 0?e.addEventListener(t,s,{capture:!0,passive:n}):e.addEventListener(t,s,!0):n!==void 0?e.addEventListener(t,s,{passive:n}):e.addEventListener(t,s,!1)}function Pi(e,t,s,a,n){var o=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var i=a.tag;if(i===3||i===4){var l=a.stateNode.containerInfo;if(l===n||l.nodeType===8&&l.parentNode===n)break;if(i===4)for(i=a.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===n||c.nodeType===8&&c.parentNode===n))return;i=i.return}for(;l!==null;){if(i=Ds(l),i===null)return;if(c=i.tag,c===5||c===6){a=o=i;continue e}l=l.parentNode}}a=a.return}bm(function(){var d=o,h=Rc(s),m=[];e:{var p=Jm.get(e);if(p!==void 0){var b=Dc,x=e;switch(e){case"keypress":if(Gn(s)===0)break e;case"keydown":case"keyup":b=Ux;break;case"focusin":x="focus",b=wi;break;case"focusout":x="blur",b=wi;break;case"beforeblur":case"afterblur":b=wi;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=Qd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=Sx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=Bx;break;case Hm:case Gm:case Wm:b=Tx;break;case Km:b=Vx;break;case"scroll":b=Cx;break;case"wheel":b=Gx;break;case"copy":case"cut":case"paste":b=Ix;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=Xd}var j=(t&4)!==0,_=!j&&e==="scroll",v=j?p!==null?p+"Capture":null:p;j=[];for(var g=d,u;g!==null;){u=g;var f=u.stateNode;if(u.tag===5&&f!==null&&(u=f,v!==null&&(f=Oa(g,v),f!=null&&j.push(za(g,f,u)))),_)break;g=g.return}0<j.length&&(p=new b(p,x,null,s,h),m.push({event:p,listeners:j}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",b=e==="mouseout"||e==="pointerout",p&&s!==pl&&(x=s.relatedTarget||s.fromElement)&&(Ds(x)||x[Ht]))break e;if((b||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,b?(x=s.relatedTarget||s.toElement,b=d,x=x?Ds(x):null,x!==null&&(_=Zs(x),x!==_||x.tag!==5&&x.tag!==6)&&(x=null)):(b=null,x=d),b!==x)){if(j=Qd,f="onMouseLeave",v="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(j=Xd,f="onPointerLeave",v="onPointerEnter",g="pointer"),_=b==null?p:xr(b),u=x==null?p:xr(x),p=new j(f,g+"leave",b,s,h),p.target=_,p.relatedTarget=u,f=null,Ds(h)===d&&(j=new j(v,g+"enter",x,s,h),j.target=u,j.relatedTarget=_,f=j),_=f,b&&x)t:{for(j=b,v=x,g=0,u=j;u;u=rr(u))g++;for(u=0,f=v;f;f=rr(f))u++;for(;0<g-u;)j=rr(j),g--;for(;0<u-g;)v=rr(v),u--;for(;g--;){if(j===v||v!==null&&j===v.alternate)break t;j=rr(j),v=rr(v)}j=null}else j=null;b!==null&&cu(m,p,b,j,!1),x!==null&&_!==null&&cu(m,_,x,j,!0)}}e:{if(p=d?xr(d):window,b=p.nodeName&&p.nodeName.toLowerCase(),b==="select"||b==="input"&&p.type==="file")var w=Zx;else if(tu(p))if(Fm)w=r0;else{w=t0;var y=e0}else(b=p.nodeName)&&b.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(w=s0);if(w&&(w=w(e,d))){Um(m,w,s,h);break e}y&&y(e,p,d),e==="focusout"&&(y=p._wrapperState)&&y.controlled&&p.type==="number"&&dl(p,"number",p.value)}switch(y=d?xr(d):window,e){case"focusin":(tu(y)||y.contentEditable==="true")&&(pr=y,wl=d,ba=null);break;case"focusout":ba=wl=pr=null;break;case"mousedown":Nl=!0;break;case"contextmenu":case"mouseup":case"dragend":Nl=!1,ou(m,s,h);break;case"selectionchange":if(o0)break;case"keydown":case"keyup":ou(m,s,h)}var C;if(Uc)e:{switch(e){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else fr?Dm(e,s)&&(S="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(S="onCompositionStart");S&&(Lm&&s.locale!=="ko"&&(fr||S!=="onCompositionStart"?S==="onCompositionEnd"&&fr&&(C=Mm()):(is=h,Lc="value"in is?is.value:is.textContent,fr=!0)),y=mo(d,S),0<y.length&&(S=new Yd(S,e,null,s,h),m.push({event:S,listeners:y}),C?S.data=C:(C=$m(s),C!==null&&(S.data=C)))),(C=Kx?Jx(e,s):Qx(e,s))&&(d=mo(d,"onBeforeInput"),0<d.length&&(h=new Yd("onBeforeInput","beforeinput",null,s,h),m.push({event:h,listeners:d}),h.data=C))}Qm(m,t)})}function za(e,t,s){return{instance:e,listener:t,currentTarget:s}}function mo(e,t){for(var s=t+"Capture",a=[];e!==null;){var n=e,o=n.stateNode;n.tag===5&&o!==null&&(n=o,o=Oa(e,s),o!=null&&a.unshift(za(e,o,n)),o=Oa(e,t),o!=null&&a.push(za(e,o,n))),e=e.return}return a}function rr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function cu(e,t,s,a,n){for(var o=t._reactName,i=[];s!==null&&s!==a;){var l=s,c=l.alternate,d=l.stateNode;if(c!==null&&c===a)break;l.tag===5&&d!==null&&(l=d,n?(c=Oa(s,o),c!=null&&i.unshift(za(s,c,l))):n||(c=Oa(s,o),c!=null&&i.push(za(s,c,l)))),s=s.return}i.length!==0&&e.push({event:t,listeners:i})}var d0=/\r\n?/g,u0=/\u0000|\uFFFD/g;function du(e){return(typeof e=="string"?e:""+e).replace(d0,`
`).replace(u0,"")}function Pn(e,t,s){if(t=du(t),du(e)!==t&&s)throw Error(R(425))}function fo(){}var _l=null,Cl=null;function kl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Sl=typeof setTimeout=="function"?setTimeout:void 0,h0=typeof clearTimeout=="function"?clearTimeout:void 0,uu=typeof Promise=="function"?Promise:void 0,m0=typeof queueMicrotask=="function"?queueMicrotask:typeof uu<"u"?function(e){return uu.resolve(null).then(e).catch(f0)}:Sl;function f0(e){setTimeout(function(){throw e})}function Ti(e,t){var s=t,a=0;do{var n=s.nextSibling;if(e.removeChild(s),n&&n.nodeType===8)if(s=n.data,s==="/$"){if(a===0){e.removeChild(n),Da(t);return}a--}else s!=="$"&&s!=="$?"&&s!=="$!"||a++;s=n}while(s);Da(t)}function fs(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function hu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}var Jr=Math.random().toString(36).slice(2),Tt="__reactFiber$"+Jr,Ba="__reactProps$"+Jr,Ht="__reactContainer$"+Jr,El="__reactEvents$"+Jr,p0="__reactListeners$"+Jr,g0="__reactHandles$"+Jr;function Ds(e){var t=e[Tt];if(t)return t;for(var s=e.parentNode;s;){if(t=s[Ht]||s[Tt]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=hu(e);e!==null;){if(s=e[Tt])return s;e=hu(e)}return t}e=s,s=e.parentNode}return null}function cn(e){return e=e[Tt]||e[Ht],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function xr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(R(33))}function Vo(e){return e[Ba]||null}var Pl=[],vr=-1;function ks(e){return{current:e}}function de(e){0>vr||(e.current=Pl[vr],Pl[vr]=null,vr--)}function ie(e,t){vr++,Pl[vr]=e.current,e.current=t}var Ns={},$e=ks(Ns),Qe=ks(!1),Vs=Ns;function Or(e,t){var s=e.type.contextTypes;if(!s)return Ns;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var n={},o;for(o in s)n[o]=t[o];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function Ye(e){return e=e.childContextTypes,e!=null}function po(){de(Qe),de($e)}function mu(e,t,s){if($e.current!==Ns)throw Error(R(168));ie($e,t),ie(Qe,s)}function Xm(e,t,s){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return s;a=a.getChildContext();for(var n in a)if(!(n in t))throw Error(R(108,ex(e)||"Unknown",n));return ge({},s,a)}function go(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ns,Vs=$e.current,ie($e,e),ie(Qe,Qe.current),!0}function fu(e,t,s){var a=e.stateNode;if(!a)throw Error(R(169));s?(e=Xm(e,t,Vs),a.__reactInternalMemoizedMergedChildContext=e,de(Qe),de($e),ie($e,e)):de(Qe),ie(Qe,s)}var Ft=null,Ho=!1,Ri=!1;function Zm(e){Ft===null?Ft=[e]:Ft.push(e)}function x0(e){Ho=!0,Zm(e)}function Ss(){if(!Ri&&Ft!==null){Ri=!0;var e=0,t=re;try{var s=Ft;for(re=1;e<s.length;e++){var a=s[e];do a=a(!0);while(a!==null)}Ft=null,Ho=!1}catch(n){throw Ft!==null&&(Ft=Ft.slice(e+1)),_m(Ic,Ss),n}finally{re=t,Ri=!1}}return null}var yr=[],br=0,xo=null,vo=0,it=[],lt=0,Hs=null,zt=1,Bt="";function As(e,t){yr[br++]=vo,yr[br++]=xo,xo=e,vo=t}function ef(e,t,s){it[lt++]=zt,it[lt++]=Bt,it[lt++]=Hs,Hs=e;var a=zt;e=Bt;var n=32-jt(a)-1;a&=~(1<<n),s+=1;var o=32-jt(t)+n;if(30<o){var i=n-n%5;o=(a&(1<<i)-1).toString(32),a>>=i,n-=i,zt=1<<32-jt(t)+n|s<<n|a,Bt=o+e}else zt=1<<o|s<<n|a,Bt=e}function zc(e){e.return!==null&&(As(e,1),ef(e,1,0))}function Bc(e){for(;e===xo;)xo=yr[--br],yr[br]=null,vo=yr[--br],yr[br]=null;for(;e===Hs;)Hs=it[--lt],it[lt]=null,Bt=it[--lt],it[lt]=null,zt=it[--lt],it[lt]=null}var tt=null,et=null,ue=!1,bt=null;function tf(e,t){var s=ct(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)}function pu(e,t){switch(e.tag){case 5:var s=e.type;return t=t.nodeType!==1||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,tt=e,et=fs(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,tt=e,et=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(s=Hs!==null?{id:zt,overflow:Bt}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},s=ct(18,null,null,0),s.stateNode=t,s.return=e,e.child=s,tt=e,et=null,!0):!1;default:return!1}}function Tl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Rl(e){if(ue){var t=et;if(t){var s=t;if(!pu(e,t)){if(Tl(e))throw Error(R(418));t=fs(s.nextSibling);var a=tt;t&&pu(e,t)?tf(a,s):(e.flags=e.flags&-4097|2,ue=!1,tt=e)}}else{if(Tl(e))throw Error(R(418));e.flags=e.flags&-4097|2,ue=!1,tt=e}}}function gu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;tt=e}function Tn(e){if(e!==tt)return!1;if(!ue)return gu(e),ue=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!kl(e.type,e.memoizedProps)),t&&(t=et)){if(Tl(e))throw sf(),Error(R(418));for(;t;)tf(e,t),t=fs(t.nextSibling)}if(gu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(R(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(t===0){et=fs(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++}e=e.nextSibling}et=null}}else et=tt?fs(e.stateNode.nextSibling):null;return!0}function sf(){for(var e=et;e;)e=fs(e.nextSibling)}function Mr(){et=tt=null,ue=!1}function qc(e){bt===null?bt=[e]:bt.push(e)}var v0=Qt.ReactCurrentBatchConfig;function ia(e,t,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(R(309));var a=s.stateNode}if(!a)throw Error(R(147,e));var n=a,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(i){var l=n.refs;i===null?delete l[o]:l[o]=i},t._stringRef=o,t)}if(typeof e!="string")throw Error(R(284));if(!s._owner)throw Error(R(290,e))}return e}function Rn(e,t){throw e=Object.prototype.toString.call(t),Error(R(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function xu(e){var t=e._init;return t(e._payload)}function rf(e){function t(v,g){if(e){var u=v.deletions;u===null?(v.deletions=[g],v.flags|=16):u.push(g)}}function s(v,g){if(!e)return null;for(;g!==null;)t(v,g),g=g.sibling;return null}function a(v,g){for(v=new Map;g!==null;)g.key!==null?v.set(g.key,g):v.set(g.index,g),g=g.sibling;return v}function n(v,g){return v=vs(v,g),v.index=0,v.sibling=null,v}function o(v,g,u){return v.index=u,e?(u=v.alternate,u!==null?(u=u.index,u<g?(v.flags|=2,g):u):(v.flags|=2,g)):(v.flags|=1048576,g)}function i(v){return e&&v.alternate===null&&(v.flags|=2),v}function l(v,g,u,f){return g===null||g.tag!==6?(g=$i(u,v.mode,f),g.return=v,g):(g=n(g,u),g.return=v,g)}function c(v,g,u,f){var w=u.type;return w===mr?h(v,g,u.props.children,f,u.key):g!==null&&(g.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===ts&&xu(w)===g.type)?(f=n(g,u.props),f.ref=ia(v,g,u),f.return=v,f):(f=Zn(u.type,u.key,u.props,null,v.mode,f),f.ref=ia(v,g,u),f.return=v,f)}function d(v,g,u,f){return g===null||g.tag!==4||g.stateNode.containerInfo!==u.containerInfo||g.stateNode.implementation!==u.implementation?(g=Ui(u,v.mode,f),g.return=v,g):(g=n(g,u.children||[]),g.return=v,g)}function h(v,g,u,f,w){return g===null||g.tag!==7?(g=zs(u,v.mode,f,w),g.return=v,g):(g=n(g,u),g.return=v,g)}function m(v,g,u){if(typeof g=="string"&&g!==""||typeof g=="number")return g=$i(""+g,v.mode,u),g.return=v,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case bn:return u=Zn(g.type,g.key,g.props,null,v.mode,u),u.ref=ia(v,null,g),u.return=v,u;case hr:return g=Ui(g,v.mode,u),g.return=v,g;case ts:var f=g._init;return m(v,f(g._payload),u)}if(ha(g)||sa(g))return g=zs(g,v.mode,u,null),g.return=v,g;Rn(v,g)}return null}function p(v,g,u,f){var w=g!==null?g.key:null;if(typeof u=="string"&&u!==""||typeof u=="number")return w!==null?null:l(v,g,""+u,f);if(typeof u=="object"&&u!==null){switch(u.$$typeof){case bn:return u.key===w?c(v,g,u,f):null;case hr:return u.key===w?d(v,g,u,f):null;case ts:return w=u._init,p(v,g,w(u._payload),f)}if(ha(u)||sa(u))return w!==null?null:h(v,g,u,f,null);Rn(v,u)}return null}function b(v,g,u,f,w){if(typeof f=="string"&&f!==""||typeof f=="number")return v=v.get(u)||null,l(g,v,""+f,w);if(typeof f=="object"&&f!==null){switch(f.$$typeof){case bn:return v=v.get(f.key===null?u:f.key)||null,c(g,v,f,w);case hr:return v=v.get(f.key===null?u:f.key)||null,d(g,v,f,w);case ts:var y=f._init;return b(v,g,u,y(f._payload),w)}if(ha(f)||sa(f))return v=v.get(u)||null,h(g,v,f,w,null);Rn(g,f)}return null}function x(v,g,u,f){for(var w=null,y=null,C=g,S=g=0,I=null;C!==null&&S<u.length;S++){C.index>S?(I=C,C=null):I=C.sibling;var L=p(v,C,u[S],f);if(L===null){C===null&&(C=I);break}e&&C&&L.alternate===null&&t(v,C),g=o(L,g,S),y===null?w=L:y.sibling=L,y=L,C=I}if(S===u.length)return s(v,C),ue&&As(v,S),w;if(C===null){for(;S<u.length;S++)C=m(v,u[S],f),C!==null&&(g=o(C,g,S),y===null?w=C:y.sibling=C,y=C);return ue&&As(v,S),w}for(C=a(v,C);S<u.length;S++)I=b(C,v,S,u[S],f),I!==null&&(e&&I.alternate!==null&&C.delete(I.key===null?S:I.key),g=o(I,g,S),y===null?w=I:y.sibling=I,y=I);return e&&C.forEach(function(K){return t(v,K)}),ue&&As(v,S),w}function j(v,g,u,f){var w=sa(u);if(typeof w!="function")throw Error(R(150));if(u=w.call(u),u==null)throw Error(R(151));for(var y=w=null,C=g,S=g=0,I=null,L=u.next();C!==null&&!L.done;S++,L=u.next()){C.index>S?(I=C,C=null):I=C.sibling;var K=p(v,C,L.value,f);if(K===null){C===null&&(C=I);break}e&&C&&K.alternate===null&&t(v,C),g=o(K,g,S),y===null?w=K:y.sibling=K,y=K,C=I}if(L.done)return s(v,C),ue&&As(v,S),w;if(C===null){for(;!L.done;S++,L=u.next())L=m(v,L.value,f),L!==null&&(g=o(L,g,S),y===null?w=L:y.sibling=L,y=L);return ue&&As(v,S),w}for(C=a(v,C);!L.done;S++,L=u.next())L=b(C,v,S,L.value,f),L!==null&&(e&&L.alternate!==null&&C.delete(L.key===null?S:L.key),g=o(L,g,S),y===null?w=L:y.sibling=L,y=L);return e&&C.forEach(function(se){return t(v,se)}),ue&&As(v,S),w}function _(v,g,u,f){if(typeof u=="object"&&u!==null&&u.type===mr&&u.key===null&&(u=u.props.children),typeof u=="object"&&u!==null){switch(u.$$typeof){case bn:e:{for(var w=u.key,y=g;y!==null;){if(y.key===w){if(w=u.type,w===mr){if(y.tag===7){s(v,y.sibling),g=n(y,u.props.children),g.return=v,v=g;break e}}else if(y.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===ts&&xu(w)===y.type){s(v,y.sibling),g=n(y,u.props),g.ref=ia(v,y,u),g.return=v,v=g;break e}s(v,y);break}else t(v,y);y=y.sibling}u.type===mr?(g=zs(u.props.children,v.mode,f,u.key),g.return=v,v=g):(f=Zn(u.type,u.key,u.props,null,v.mode,f),f.ref=ia(v,g,u),f.return=v,v=f)}return i(v);case hr:e:{for(y=u.key;g!==null;){if(g.key===y)if(g.tag===4&&g.stateNode.containerInfo===u.containerInfo&&g.stateNode.implementation===u.implementation){s(v,g.sibling),g=n(g,u.children||[]),g.return=v,v=g;break e}else{s(v,g);break}else t(v,g);g=g.sibling}g=Ui(u,v.mode,f),g.return=v,v=g}return i(v);case ts:return y=u._init,_(v,g,y(u._payload),f)}if(ha(u))return x(v,g,u,f);if(sa(u))return j(v,g,u,f);Rn(v,u)}return typeof u=="string"&&u!==""||typeof u=="number"?(u=""+u,g!==null&&g.tag===6?(s(v,g.sibling),g=n(g,u),g.return=v,v=g):(s(v,g),g=$i(u,v.mode,f),g.return=v,v=g),i(v)):s(v,g)}return _}var Lr=rf(!0),af=rf(!1),yo=ks(null),bo=null,jr=null,Vc=null;function Hc(){Vc=jr=bo=null}function Gc(e){var t=yo.current;de(yo),e._currentValue=t}function Il(e,t,s){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===s)break;e=e.return}}function Er(e,t){bo=e,Vc=jr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Je=!0),e.firstContext=null)}function ht(e){var t=e._currentValue;if(Vc!==e)if(e={context:e,memoizedValue:t,next:null},jr===null){if(bo===null)throw Error(R(308));jr=e,bo.dependencies={lanes:0,firstContext:e}}else jr=jr.next=e;return t}var $s=null;function Wc(e){$s===null?$s=[e]:$s.push(e)}function nf(e,t,s,a){var n=t.interleaved;return n===null?(s.next=s,Wc(t)):(s.next=n.next,n.next=s),t.interleaved=s,Gt(e,a)}function Gt(e,t){e.lanes|=t;var s=e.alternate;for(s!==null&&(s.lanes|=t),s=e,e=e.return;e!==null;)e.childLanes|=t,s=e.alternate,s!==null&&(s.childLanes|=t),s=e,e=e.return;return s.tag===3?s.stateNode:null}var ss=!1;function Kc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function of(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function qt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ps(e,t,s){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,te&2){var n=a.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),a.pending=t,Gt(e,s)}return n=a.interleaved,n===null?(t.next=t,Wc(a)):(t.next=n.next,n.next=t),a.interleaved=t,Gt(e,s)}function Wn(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,s|=a,t.lanes=s,Ac(e,s)}}function vu(e,t){var s=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,s===a)){var n=null,o=null;if(s=s.firstBaseUpdate,s!==null){do{var i={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};o===null?n=o=i:o=o.next=i,s=s.next}while(s!==null);o===null?n=o=t:o=o.next=t}else n=o=t;s={baseState:a.baseState,firstBaseUpdate:n,lastBaseUpdate:o,shared:a.shared,effects:a.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function jo(e,t,s,a){var n=e.updateQueue;ss=!1;var o=n.firstBaseUpdate,i=n.lastBaseUpdate,l=n.shared.pending;if(l!==null){n.shared.pending=null;var c=l,d=c.next;c.next=null,i===null?o=d:i.next=d,i=c;var h=e.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==i&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=c))}if(o!==null){var m=n.baseState;i=0,h=d=c=null,l=o;do{var p=l.lane,b=l.eventTime;if((a&p)===p){h!==null&&(h=h.next={eventTime:b,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=e,j=l;switch(p=t,b=s,j.tag){case 1:if(x=j.payload,typeof x=="function"){m=x.call(b,m,p);break e}m=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=j.payload,p=typeof x=="function"?x.call(b,m,p):x,p==null)break e;m=ge({},m,p);break e;case 2:ss=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,p=n.effects,p===null?n.effects=[l]:p.push(l))}else b={eventTime:b,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=b,c=m):h=h.next=b,i|=p;if(l=l.next,l===null){if(l=n.shared.pending,l===null)break;p=l,l=p.next,p.next=null,n.lastBaseUpdate=p,n.shared.pending=null}}while(!0);if(h===null&&(c=m),n.baseState=c,n.firstBaseUpdate=d,n.lastBaseUpdate=h,t=n.shared.interleaved,t!==null){n=t;do i|=n.lane,n=n.next;while(n!==t)}else o===null&&(n.shared.lanes=0);Ws|=i,e.lanes=i,e.memoizedState=m}}function yu(e,t,s){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],n=a.callback;if(n!==null){if(a.callback=null,a=s,typeof n!="function")throw Error(R(191,n));n.call(a)}}}var dn={},At=ks(dn),qa=ks(dn),Va=ks(dn);function Us(e){if(e===dn)throw Error(R(174));return e}function Jc(e,t){switch(ie(Va,t),ie(qa,e),ie(At,dn),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:hl(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=hl(t,e)}de(At),ie(At,t)}function Dr(){de(At),de(qa),de(Va)}function lf(e){Us(Va.current);var t=Us(At.current),s=hl(t,e.type);t!==s&&(ie(qa,e),ie(At,s))}function Qc(e){qa.current===e&&(de(At),de(qa))}var fe=ks(0);function wo(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ii=[];function Yc(){for(var e=0;e<Ii.length;e++)Ii[e]._workInProgressVersionPrimary=null;Ii.length=0}var Kn=Qt.ReactCurrentDispatcher,Ai=Qt.ReactCurrentBatchConfig,Gs=0,pe=null,ke=null,Pe=null,No=!1,ja=!1,Ha=0,y0=0;function Oe(){throw Error(R(321))}function Xc(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!Nt(e[s],t[s]))return!1;return!0}function Zc(e,t,s,a,n,o){if(Gs=o,pe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Kn.current=e===null||e.memoizedState===null?N0:_0,e=s(a,n),ja){o=0;do{if(ja=!1,Ha=0,25<=o)throw Error(R(301));o+=1,Pe=ke=null,t.updateQueue=null,Kn.current=C0,e=s(a,n)}while(ja)}if(Kn.current=_o,t=ke!==null&&ke.next!==null,Gs=0,Pe=ke=pe=null,No=!1,t)throw Error(R(300));return e}function ed(){var e=Ha!==0;return Ha=0,e}function St(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pe===null?pe.memoizedState=Pe=e:Pe=Pe.next=e,Pe}function mt(){if(ke===null){var e=pe.alternate;e=e!==null?e.memoizedState:null}else e=ke.next;var t=Pe===null?pe.memoizedState:Pe.next;if(t!==null)Pe=t,ke=e;else{if(e===null)throw Error(R(310));ke=e,e={memoizedState:ke.memoizedState,baseState:ke.baseState,baseQueue:ke.baseQueue,queue:ke.queue,next:null},Pe===null?pe.memoizedState=Pe=e:Pe=Pe.next=e}return Pe}function Ga(e,t){return typeof t=="function"?t(e):t}function Oi(e){var t=mt(),s=t.queue;if(s===null)throw Error(R(311));s.lastRenderedReducer=e;var a=ke,n=a.baseQueue,o=s.pending;if(o!==null){if(n!==null){var i=n.next;n.next=o.next,o.next=i}a.baseQueue=n=o,s.pending=null}if(n!==null){o=n.next,a=a.baseState;var l=i=null,c=null,d=o;do{var h=d.lane;if((Gs&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),a=d.hasEagerState?d.eagerState:e(a,d.action);else{var m={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=m,i=a):c=c.next=m,pe.lanes|=h,Ws|=h}d=d.next}while(d!==null&&d!==o);c===null?i=a:c.next=l,Nt(a,t.memoizedState)||(Je=!0),t.memoizedState=a,t.baseState=i,t.baseQueue=c,s.lastRenderedState=a}if(e=s.interleaved,e!==null){n=e;do o=n.lane,pe.lanes|=o,Ws|=o,n=n.next;while(n!==e)}else n===null&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function Mi(e){var t=mt(),s=t.queue;if(s===null)throw Error(R(311));s.lastRenderedReducer=e;var a=s.dispatch,n=s.pending,o=t.memoizedState;if(n!==null){s.pending=null;var i=n=n.next;do o=e(o,i.action),i=i.next;while(i!==n);Nt(o,t.memoizedState)||(Je=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),s.lastRenderedState=o}return[o,a]}function cf(){}function df(e,t){var s=pe,a=mt(),n=t(),o=!Nt(a.memoizedState,n);if(o&&(a.memoizedState=n,Je=!0),a=a.queue,td(mf.bind(null,s,a,e),[e]),a.getSnapshot!==t||o||Pe!==null&&Pe.memoizedState.tag&1){if(s.flags|=2048,Wa(9,hf.bind(null,s,a,n,t),void 0,null),Te===null)throw Error(R(349));Gs&30||uf(s,t,n)}return n}function uf(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=pe.updateQueue,t===null?(t={lastEffect:null,stores:null},pe.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function hf(e,t,s,a){t.value=s,t.getSnapshot=a,ff(t)&&pf(e)}function mf(e,t,s){return s(function(){ff(t)&&pf(e)})}function ff(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!Nt(e,s)}catch{return!0}}function pf(e){var t=Gt(e,1);t!==null&&wt(t,e,1,-1)}function bu(e){var t=St();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ga,lastRenderedState:e},t.queue=e,e=e.dispatch=w0.bind(null,pe,e),[t.memoizedState,e]}function Wa(e,t,s,a){return e={tag:e,create:t,destroy:s,deps:a,next:null},t=pe.updateQueue,t===null?(t={lastEffect:null,stores:null},pe.updateQueue=t,t.lastEffect=e.next=e):(s=t.lastEffect,s===null?t.lastEffect=e.next=e:(a=s.next,s.next=e,e.next=a,t.lastEffect=e)),e}function gf(){return mt().memoizedState}function Jn(e,t,s,a){var n=St();pe.flags|=e,n.memoizedState=Wa(1|t,s,void 0,a===void 0?null:a)}function Go(e,t,s,a){var n=mt();a=a===void 0?null:a;var o=void 0;if(ke!==null){var i=ke.memoizedState;if(o=i.destroy,a!==null&&Xc(a,i.deps)){n.memoizedState=Wa(t,s,o,a);return}}pe.flags|=e,n.memoizedState=Wa(1|t,s,o,a)}function ju(e,t){return Jn(8390656,8,e,t)}function td(e,t){return Go(2048,8,e,t)}function xf(e,t){return Go(4,2,e,t)}function vf(e,t){return Go(4,4,e,t)}function yf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function bf(e,t,s){return s=s!=null?s.concat([e]):null,Go(4,4,yf.bind(null,t,e),s)}function sd(){}function jf(e,t){var s=mt();t=t===void 0?null:t;var a=s.memoizedState;return a!==null&&t!==null&&Xc(t,a[1])?a[0]:(s.memoizedState=[e,t],e)}function wf(e,t){var s=mt();t=t===void 0?null:t;var a=s.memoizedState;return a!==null&&t!==null&&Xc(t,a[1])?a[0]:(e=e(),s.memoizedState=[e,t],e)}function Nf(e,t,s){return Gs&21?(Nt(s,t)||(s=Sm(),pe.lanes|=s,Ws|=s,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Je=!0),e.memoizedState=s)}function b0(e,t){var s=re;re=s!==0&&4>s?s:4,e(!0);var a=Ai.transition;Ai.transition={};try{e(!1),t()}finally{re=s,Ai.transition=a}}function _f(){return mt().memoizedState}function j0(e,t,s){var a=xs(e);if(s={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null},Cf(e))kf(t,s);else if(s=nf(e,t,s,a),s!==null){var n=Be();wt(s,e,a,n),Sf(s,t,a)}}function w0(e,t,s){var a=xs(e),n={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null};if(Cf(e))kf(t,n);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var i=t.lastRenderedState,l=o(i,s);if(n.hasEagerState=!0,n.eagerState=l,Nt(l,i)){var c=t.interleaved;c===null?(n.next=n,Wc(t)):(n.next=c.next,c.next=n),t.interleaved=n;return}}catch{}finally{}s=nf(e,t,n,a),s!==null&&(n=Be(),wt(s,e,a,n),Sf(s,t,a))}}function Cf(e){var t=e.alternate;return e===pe||t!==null&&t===pe}function kf(e,t){ja=No=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function Sf(e,t,s){if(s&4194240){var a=t.lanes;a&=e.pendingLanes,s|=a,t.lanes=s,Ac(e,s)}}var _o={readContext:ht,useCallback:Oe,useContext:Oe,useEffect:Oe,useImperativeHandle:Oe,useInsertionEffect:Oe,useLayoutEffect:Oe,useMemo:Oe,useReducer:Oe,useRef:Oe,useState:Oe,useDebugValue:Oe,useDeferredValue:Oe,useTransition:Oe,useMutableSource:Oe,useSyncExternalStore:Oe,useId:Oe,unstable_isNewReconciler:!1},N0={readContext:ht,useCallback:function(e,t){return St().memoizedState=[e,t===void 0?null:t],e},useContext:ht,useEffect:ju,useImperativeHandle:function(e,t,s){return s=s!=null?s.concat([e]):null,Jn(4194308,4,yf.bind(null,t,e),s)},useLayoutEffect:function(e,t){return Jn(4194308,4,e,t)},useInsertionEffect:function(e,t){return Jn(4,2,e,t)},useMemo:function(e,t){var s=St();return t=t===void 0?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var a=St();return t=s!==void 0?s(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=j0.bind(null,pe,e),[a.memoizedState,e]},useRef:function(e){var t=St();return e={current:e},t.memoizedState=e},useState:bu,useDebugValue:sd,useDeferredValue:function(e){return St().memoizedState=e},useTransition:function(){var e=bu(!1),t=e[0];return e=b0.bind(null,e[1]),St().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var a=pe,n=St();if(ue){if(s===void 0)throw Error(R(407));s=s()}else{if(s=t(),Te===null)throw Error(R(349));Gs&30||uf(a,t,s)}n.memoizedState=s;var o={value:s,getSnapshot:t};return n.queue=o,ju(mf.bind(null,a,o,e),[e]),a.flags|=2048,Wa(9,hf.bind(null,a,o,s,t),void 0,null),s},useId:function(){var e=St(),t=Te.identifierPrefix;if(ue){var s=Bt,a=zt;s=(a&~(1<<32-jt(a)-1)).toString(32)+s,t=":"+t+"R"+s,s=Ha++,0<s&&(t+="H"+s.toString(32)),t+=":"}else s=y0++,t=":"+t+"r"+s.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},_0={readContext:ht,useCallback:jf,useContext:ht,useEffect:td,useImperativeHandle:bf,useInsertionEffect:xf,useLayoutEffect:vf,useMemo:wf,useReducer:Oi,useRef:gf,useState:function(){return Oi(Ga)},useDebugValue:sd,useDeferredValue:function(e){var t=mt();return Nf(t,ke.memoizedState,e)},useTransition:function(){var e=Oi(Ga)[0],t=mt().memoizedState;return[e,t]},useMutableSource:cf,useSyncExternalStore:df,useId:_f,unstable_isNewReconciler:!1},C0={readContext:ht,useCallback:jf,useContext:ht,useEffect:td,useImperativeHandle:bf,useInsertionEffect:xf,useLayoutEffect:vf,useMemo:wf,useReducer:Mi,useRef:gf,useState:function(){return Mi(Ga)},useDebugValue:sd,useDeferredValue:function(e){var t=mt();return ke===null?t.memoizedState=e:Nf(t,ke.memoizedState,e)},useTransition:function(){var e=Mi(Ga)[0],t=mt().memoizedState;return[e,t]},useMutableSource:cf,useSyncExternalStore:df,useId:_f,unstable_isNewReconciler:!1};function xt(e,t){if(e&&e.defaultProps){t=ge({},t),e=e.defaultProps;for(var s in e)t[s]===void 0&&(t[s]=e[s]);return t}return t}function Al(e,t,s,a){t=e.memoizedState,s=s(a,t),s=s==null?t:ge({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Wo={isMounted:function(e){return(e=e._reactInternals)?Zs(e)===e:!1},enqueueSetState:function(e,t,s){e=e._reactInternals;var a=Be(),n=xs(e),o=qt(a,n);o.payload=t,s!=null&&(o.callback=s),t=ps(e,o,n),t!==null&&(wt(t,e,n,a),Wn(t,e,n))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var a=Be(),n=xs(e),o=qt(a,n);o.tag=1,o.payload=t,s!=null&&(o.callback=s),t=ps(e,o,n),t!==null&&(wt(t,e,n,a),Wn(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=Be(),a=xs(e),n=qt(s,a);n.tag=2,t!=null&&(n.callback=t),t=ps(e,n,a),t!==null&&(wt(t,e,a,s),Wn(t,e,a))}};function wu(e,t,s,a,n,o,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,o,i):t.prototype&&t.prototype.isPureReactComponent?!Ua(s,a)||!Ua(n,o):!0}function Ef(e,t,s){var a=!1,n=Ns,o=t.contextType;return typeof o=="object"&&o!==null?o=ht(o):(n=Ye(t)?Vs:$e.current,a=t.contextTypes,o=(a=a!=null)?Or(e,n):Ns),t=new t(s,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Wo,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=o),t}function Nu(e,t,s,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,a),t.state!==e&&Wo.enqueueReplaceState(t,t.state,null)}function Ol(e,t,s,a){var n=e.stateNode;n.props=s,n.state=e.memoizedState,n.refs={},Kc(e);var o=t.contextType;typeof o=="object"&&o!==null?n.context=ht(o):(o=Ye(t)?Vs:$e.current,n.context=Or(e,o)),n.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Al(e,t,o,s),n.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(t=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),t!==n.state&&Wo.enqueueReplaceState(n,n.state,null),jo(e,s,n,a),n.state=e.memoizedState),typeof n.componentDidMount=="function"&&(e.flags|=4194308)}function $r(e,t){try{var s="",a=t;do s+=Zg(a),a=a.return;while(a);var n=s}catch(o){n=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:n,digest:null}}function Li(e,t,s){return{value:e,source:null,stack:s??null,digest:t??null}}function Ml(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var k0=typeof WeakMap=="function"?WeakMap:Map;function Pf(e,t,s){s=qt(-1,s),s.tag=3,s.payload={element:null};var a=t.value;return s.callback=function(){ko||(ko=!0,Hl=a),Ml(e,t)},s}function Tf(e,t,s){s=qt(-1,s),s.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var n=t.value;s.payload=function(){return a(n)},s.callback=function(){Ml(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(s.callback=function(){Ml(e,t),typeof a!="function"&&(gs===null?gs=new Set([this]):gs.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),s}function _u(e,t,s){var a=e.pingCache;if(a===null){a=e.pingCache=new k0;var n=new Set;a.set(t,n)}else n=a.get(t),n===void 0&&(n=new Set,a.set(t,n));n.has(s)||(n.add(s),e=F0.bind(null,e,t,s),t.then(e,e))}function Cu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ku(e,t,s,a,n){return e.mode&1?(e.flags|=65536,e.lanes=n,e):(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(t=qt(-1,1),t.tag=2,ps(s,t,1))),s.lanes|=1),e)}var S0=Qt.ReactCurrentOwner,Je=!1;function ze(e,t,s,a){t.child=e===null?af(t,null,s,a):Lr(t,e.child,s,a)}function Su(e,t,s,a,n){s=s.render;var o=t.ref;return Er(t,n),a=Zc(e,t,s,a,o,n),s=ed(),e!==null&&!Je?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Wt(e,t,n)):(ue&&s&&zc(t),t.flags|=1,ze(e,t,a,n),t.child)}function Eu(e,t,s,a,n){if(e===null){var o=s.type;return typeof o=="function"&&!dd(o)&&o.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(t.tag=15,t.type=o,Rf(e,t,o,a,n)):(e=Zn(s.type,null,a,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&n)){var i=o.memoizedProps;if(s=s.compare,s=s!==null?s:Ua,s(i,a)&&e.ref===t.ref)return Wt(e,t,n)}return t.flags|=1,e=vs(o,a),e.ref=t.ref,e.return=t,t.child=e}function Rf(e,t,s,a,n){if(e!==null){var o=e.memoizedProps;if(Ua(o,a)&&e.ref===t.ref)if(Je=!1,t.pendingProps=a=o,(e.lanes&n)!==0)e.flags&131072&&(Je=!0);else return t.lanes=e.lanes,Wt(e,t,n)}return Ll(e,t,s,a,n)}function If(e,t,s){var a=t.pendingProps,n=a.children,o=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ie(Nr,Ze),Ze|=s;else{if(!(s&1073741824))return e=o!==null?o.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ie(Nr,Ze),Ze|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=o!==null?o.baseLanes:s,ie(Nr,Ze),Ze|=a}else o!==null?(a=o.baseLanes|s,t.memoizedState=null):a=s,ie(Nr,Ze),Ze|=a;return ze(e,t,n,s),t.child}function Af(e,t){var s=t.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function Ll(e,t,s,a,n){var o=Ye(s)?Vs:$e.current;return o=Or(t,o),Er(t,n),s=Zc(e,t,s,a,o,n),a=ed(),e!==null&&!Je?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Wt(e,t,n)):(ue&&a&&zc(t),t.flags|=1,ze(e,t,s,n),t.child)}function Pu(e,t,s,a,n){if(Ye(s)){var o=!0;go(t)}else o=!1;if(Er(t,n),t.stateNode===null)Qn(e,t),Ef(t,s,a),Ol(t,s,a,n),a=!0;else if(e===null){var i=t.stateNode,l=t.memoizedProps;i.props=l;var c=i.context,d=s.contextType;typeof d=="object"&&d!==null?d=ht(d):(d=Ye(s)?Vs:$e.current,d=Or(t,d));var h=s.getDerivedStateFromProps,m=typeof h=="function"||typeof i.getSnapshotBeforeUpdate=="function";m||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==a||c!==d)&&Nu(t,i,a,d),ss=!1;var p=t.memoizedState;i.state=p,jo(t,a,i,n),c=t.memoizedState,l!==a||p!==c||Qe.current||ss?(typeof h=="function"&&(Al(t,s,h,a),c=t.memoizedState),(l=ss||wu(t,s,l,a,p,c,d))?(m||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=c),i.props=a,i.state=c,i.context=d,a=l):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{i=t.stateNode,of(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:xt(t.type,l),i.props=d,m=t.pendingProps,p=i.context,c=s.contextType,typeof c=="object"&&c!==null?c=ht(c):(c=Ye(s)?Vs:$e.current,c=Or(t,c));var b=s.getDerivedStateFromProps;(h=typeof b=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==m||p!==c)&&Nu(t,i,a,c),ss=!1,p=t.memoizedState,i.state=p,jo(t,a,i,n);var x=t.memoizedState;l!==m||p!==x||Qe.current||ss?(typeof b=="function"&&(Al(t,s,b,a),x=t.memoizedState),(d=ss||wu(t,s,d,a,p,x,c)||!1)?(h||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(a,x,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(a,x,c)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=x),i.props=a,i.state=x,i.context=c,a=d):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),a=!1)}return Dl(e,t,s,a,o,n)}function Dl(e,t,s,a,n,o){Af(e,t);var i=(t.flags&128)!==0;if(!a&&!i)return n&&fu(t,s,!1),Wt(e,t,o);a=t.stateNode,S0.current=t;var l=i&&typeof s.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&i?(t.child=Lr(t,e.child,null,o),t.child=Lr(t,null,l,o)):ze(e,t,l,o),t.memoizedState=a.state,n&&fu(t,s,!0),t.child}function Of(e){var t=e.stateNode;t.pendingContext?mu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&mu(e,t.context,!1),Jc(e,t.containerInfo)}function Tu(e,t,s,a,n){return Mr(),qc(n),t.flags|=256,ze(e,t,s,a),t.child}var $l={dehydrated:null,treeContext:null,retryLane:0};function Ul(e){return{baseLanes:e,cachePool:null,transitions:null}}function Mf(e,t,s){var a=t.pendingProps,n=fe.current,o=!1,i=(t.flags&128)!==0,l;if((l=i)||(l=e!==null&&e.memoizedState===null?!1:(n&2)!==0),l?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(n|=1),ie(fe,n&1),e===null)return Rl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=a.children,e=a.fallback,o?(a=t.mode,o=t.child,i={mode:"hidden",children:i},!(a&1)&&o!==null?(o.childLanes=0,o.pendingProps=i):o=Qo(i,a,0,null),e=zs(e,a,s,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Ul(s),t.memoizedState=$l,e):rd(t,i));if(n=e.memoizedState,n!==null&&(l=n.dehydrated,l!==null))return E0(e,t,i,a,l,n,s);if(o){o=a.fallback,i=t.mode,n=e.child,l=n.sibling;var c={mode:"hidden",children:a.children};return!(i&1)&&t.child!==n?(a=t.child,a.childLanes=0,a.pendingProps=c,t.deletions=null):(a=vs(n,c),a.subtreeFlags=n.subtreeFlags&14680064),l!==null?o=vs(l,o):(o=zs(o,i,s,null),o.flags|=2),o.return=t,a.return=t,a.sibling=o,t.child=a,a=o,o=t.child,i=e.child.memoizedState,i=i===null?Ul(s):{baseLanes:i.baseLanes|s,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=e.childLanes&~s,t.memoizedState=$l,a}return o=e.child,e=o.sibling,a=vs(o,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=s),a.return=t,a.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=a,t.memoizedState=null,a}function rd(e,t){return t=Qo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function In(e,t,s,a){return a!==null&&qc(a),Lr(t,e.child,null,s),e=rd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function E0(e,t,s,a,n,o,i){if(s)return t.flags&256?(t.flags&=-257,a=Li(Error(R(422))),In(e,t,i,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=a.fallback,n=t.mode,a=Qo({mode:"visible",children:a.children},n,0,null),o=zs(o,n,i,null),o.flags|=2,a.return=t,o.return=t,a.sibling=o,t.child=a,t.mode&1&&Lr(t,e.child,null,i),t.child.memoizedState=Ul(i),t.memoizedState=$l,o);if(!(t.mode&1))return In(e,t,i,null);if(n.data==="$!"){if(a=n.nextSibling&&n.nextSibling.dataset,a)var l=a.dgst;return a=l,o=Error(R(419)),a=Li(o,a,void 0),In(e,t,i,a)}if(l=(i&e.childLanes)!==0,Je||l){if(a=Te,a!==null){switch(i&-i){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(a.suspendedLanes|i)?0:n,n!==0&&n!==o.retryLane&&(o.retryLane=n,Gt(e,n),wt(a,e,n,-1))}return cd(),a=Li(Error(R(421))),In(e,t,i,a)}return n.data==="$?"?(t.flags|=128,t.child=e.child,t=z0.bind(null,e),n._reactRetry=t,null):(e=o.treeContext,et=fs(n.nextSibling),tt=t,ue=!0,bt=null,e!==null&&(it[lt++]=zt,it[lt++]=Bt,it[lt++]=Hs,zt=e.id,Bt=e.overflow,Hs=t),t=rd(t,a.children),t.flags|=4096,t)}function Ru(e,t,s){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),Il(e.return,t,s)}function Di(e,t,s,a,n){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:s,tailMode:n}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=a,o.tail=s,o.tailMode=n)}function Lf(e,t,s){var a=t.pendingProps,n=a.revealOrder,o=a.tail;if(ze(e,t,a.children,s),a=fe.current,a&2)a=a&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ru(e,s,t);else if(e.tag===19)Ru(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(ie(fe,a),!(t.mode&1))t.memoizedState=null;else switch(n){case"forwards":for(s=t.child,n=null;s!==null;)e=s.alternate,e!==null&&wo(e)===null&&(n=s),s=s.sibling;s=n,s===null?(n=t.child,t.child=null):(n=s.sibling,s.sibling=null),Di(t,!1,n,s,o);break;case"backwards":for(s=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&wo(e)===null){t.child=n;break}e=n.sibling,n.sibling=s,s=n,n=e}Di(t,!0,s,null,o);break;case"together":Di(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Qn(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wt(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),Ws|=t.lanes,!(s&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(R(153));if(t.child!==null){for(e=t.child,s=vs(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=vs(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function P0(e,t,s){switch(t.tag){case 3:Of(t),Mr();break;case 5:lf(t);break;case 1:Ye(t.type)&&go(t);break;case 4:Jc(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,n=t.memoizedProps.value;ie(yo,a._currentValue),a._currentValue=n;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(ie(fe,fe.current&1),t.flags|=128,null):s&t.child.childLanes?Mf(e,t,s):(ie(fe,fe.current&1),e=Wt(e,t,s),e!==null?e.sibling:null);ie(fe,fe.current&1);break;case 19:if(a=(s&t.childLanes)!==0,e.flags&128){if(a)return Lf(e,t,s);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),ie(fe,fe.current),a)break;return null;case 22:case 23:return t.lanes=0,If(e,t,s)}return Wt(e,t,s)}var Df,Fl,$f,Uf;Df=function(e,t){for(var s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Fl=function(){};$f=function(e,t,s,a){var n=e.memoizedProps;if(n!==a){e=t.stateNode,Us(At.current);var o=null;switch(s){case"input":n=ll(e,n),a=ll(e,a),o=[];break;case"select":n=ge({},n,{value:void 0}),a=ge({},a,{value:void 0}),o=[];break;case"textarea":n=ul(e,n),a=ul(e,a),o=[];break;default:typeof n.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=fo)}ml(s,a);var i;s=null;for(d in n)if(!a.hasOwnProperty(d)&&n.hasOwnProperty(d)&&n[d]!=null)if(d==="style"){var l=n[d];for(i in l)l.hasOwnProperty(i)&&(s||(s={}),s[i]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Ia.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in a){var c=a[d];if(l=n!=null?n[d]:void 0,a.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(s||(s={}),s[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(s||(s={}),s[i]=c[i])}else s||(o||(o=[]),o.push(d,s)),s=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(o=o||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Ia.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&ce("scroll",e),o||l===c||(o=[])):(o=o||[]).push(d,c))}s&&(o=o||[]).push("style",s);var d=o;(t.updateQueue=d)&&(t.flags|=4)}};Uf=function(e,t,s,a){s!==a&&(t.flags|=4)};function la(e,t){if(!ue)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Me(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,a=0;if(t)for(var n=e.child;n!==null;)s|=n.lanes|n.childLanes,a|=n.subtreeFlags&14680064,a|=n.flags&14680064,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)s|=n.lanes|n.childLanes,a|=n.subtreeFlags,a|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=a,e.childLanes=s,t}function T0(e,t,s){var a=t.pendingProps;switch(Bc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Me(t),null;case 1:return Ye(t.type)&&po(),Me(t),null;case 3:return a=t.stateNode,Dr(),de(Qe),de($e),Yc(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Tn(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,bt!==null&&(Kl(bt),bt=null))),Fl(e,t),Me(t),null;case 5:Qc(t);var n=Us(Va.current);if(s=t.type,e!==null&&t.stateNode!=null)$f(e,t,s,a,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(R(166));return Me(t),null}if(e=Us(At.current),Tn(t)){a=t.stateNode,s=t.type;var o=t.memoizedProps;switch(a[Tt]=t,a[Ba]=o,e=(t.mode&1)!==0,s){case"dialog":ce("cancel",a),ce("close",a);break;case"iframe":case"object":case"embed":ce("load",a);break;case"video":case"audio":for(n=0;n<fa.length;n++)ce(fa[n],a);break;case"source":ce("error",a);break;case"img":case"image":case"link":ce("error",a),ce("load",a);break;case"details":ce("toggle",a);break;case"input":Fd(a,o),ce("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!o.multiple},ce("invalid",a);break;case"textarea":Bd(a,o),ce("invalid",a)}ml(s,o),n=null;for(var i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="children"?typeof l=="string"?a.textContent!==l&&(o.suppressHydrationWarning!==!0&&Pn(a.textContent,l,e),n=["children",l]):typeof l=="number"&&a.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&Pn(a.textContent,l,e),n=["children",""+l]):Ia.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&ce("scroll",a)}switch(s){case"input":jn(a),zd(a,o,!0);break;case"textarea":jn(a),qd(a);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(a.onclick=fo)}a=n,t.updateQueue=a,a!==null&&(t.flags|=4)}else{i=n.nodeType===9?n:n.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=hm(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=i.createElement(s,{is:a.is}):(e=i.createElement(s),s==="select"&&(i=e,a.multiple?i.multiple=!0:a.size&&(i.size=a.size))):e=i.createElementNS(e,s),e[Tt]=t,e[Ba]=a,Df(e,t,!1,!1),t.stateNode=e;e:{switch(i=fl(s,a),s){case"dialog":ce("cancel",e),ce("close",e),n=a;break;case"iframe":case"object":case"embed":ce("load",e),n=a;break;case"video":case"audio":for(n=0;n<fa.length;n++)ce(fa[n],e);n=a;break;case"source":ce("error",e),n=a;break;case"img":case"image":case"link":ce("error",e),ce("load",e),n=a;break;case"details":ce("toggle",e),n=a;break;case"input":Fd(e,a),n=ll(e,a),ce("invalid",e);break;case"option":n=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},n=ge({},a,{value:void 0}),ce("invalid",e);break;case"textarea":Bd(e,a),n=ul(e,a),ce("invalid",e);break;default:n=a}ml(s,n),l=n;for(o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="style"?pm(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&mm(e,c)):o==="children"?typeof c=="string"?(s!=="textarea"||c!=="")&&Aa(e,c):typeof c=="number"&&Aa(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Ia.hasOwnProperty(o)?c!=null&&o==="onScroll"&&ce("scroll",e):c!=null&&Sc(e,o,c,i))}switch(s){case"input":jn(e),zd(e,a,!1);break;case"textarea":jn(e),qd(e);break;case"option":a.value!=null&&e.setAttribute("value",""+ws(a.value));break;case"select":e.multiple=!!a.multiple,o=a.value,o!=null?_r(e,!!a.multiple,o,!1):a.defaultValue!=null&&_r(e,!!a.multiple,a.defaultValue,!0);break;default:typeof n.onClick=="function"&&(e.onclick=fo)}switch(s){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Me(t),null;case 6:if(e&&t.stateNode!=null)Uf(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(R(166));if(s=Us(Va.current),Us(At.current),Tn(t)){if(a=t.stateNode,s=t.memoizedProps,a[Tt]=t,(o=a.nodeValue!==s)&&(e=tt,e!==null))switch(e.tag){case 3:Pn(a.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Pn(a.nodeValue,s,(e.mode&1)!==0)}o&&(t.flags|=4)}else a=(s.nodeType===9?s:s.ownerDocument).createTextNode(a),a[Tt]=t,t.stateNode=a}return Me(t),null;case 13:if(de(fe),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ue&&et!==null&&t.mode&1&&!(t.flags&128))sf(),Mr(),t.flags|=98560,o=!1;else if(o=Tn(t),a!==null&&a.dehydrated!==null){if(e===null){if(!o)throw Error(R(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(R(317));o[Tt]=t}else Mr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Me(t),o=!1}else bt!==null&&(Kl(bt),bt=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=s,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(e===null||fe.current&1?Ee===0&&(Ee=3):cd())),t.updateQueue!==null&&(t.flags|=4),Me(t),null);case 4:return Dr(),Fl(e,t),e===null&&Fa(t.stateNode.containerInfo),Me(t),null;case 10:return Gc(t.type._context),Me(t),null;case 17:return Ye(t.type)&&po(),Me(t),null;case 19:if(de(fe),o=t.memoizedState,o===null)return Me(t),null;if(a=(t.flags&128)!==0,i=o.rendering,i===null)if(a)la(o,!1);else{if(Ee!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=wo(e),i!==null){for(t.flags|=128,la(o,!1),a=i.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=s,s=t.child;s!==null;)o=s,e=a,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,e=i.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return ie(fe,fe.current&1|2),t.child}e=e.sibling}o.tail!==null&&be()>Ur&&(t.flags|=128,a=!0,la(o,!1),t.lanes=4194304)}else{if(!a)if(e=wo(i),e!==null){if(t.flags|=128,a=!0,s=e.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),la(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!ue)return Me(t),null}else 2*be()-o.renderingStartTime>Ur&&s!==1073741824&&(t.flags|=128,a=!0,la(o,!1),t.lanes=4194304);o.isBackwards?(i.sibling=t.child,t.child=i):(s=o.last,s!==null?s.sibling=i:t.child=i,o.last=i)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=be(),t.sibling=null,s=fe.current,ie(fe,a?s&1|2:s&1),t):(Me(t),null);case 22:case 23:return ld(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?Ze&1073741824&&(Me(t),t.subtreeFlags&6&&(t.flags|=8192)):Me(t),null;case 24:return null;case 25:return null}throw Error(R(156,t.tag))}function R0(e,t){switch(Bc(t),t.tag){case 1:return Ye(t.type)&&po(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Dr(),de(Qe),de($e),Yc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Qc(t),null;case 13:if(de(fe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(R(340));Mr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return de(fe),null;case 4:return Dr(),null;case 10:return Gc(t.type._context),null;case 22:case 23:return ld(),null;case 24:return null;default:return null}}var An=!1,Le=!1,I0=typeof WeakSet=="function"?WeakSet:Set,D=null;function wr(e,t){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(a){xe(e,t,a)}else s.current=null}function zl(e,t,s){try{s()}catch(a){xe(e,t,a)}}var Iu=!1;function A0(e,t){if(_l=uo,e=qm(),Fc(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var a=s.getSelection&&s.getSelection();if(a&&a.rangeCount!==0){s=a.anchorNode;var n=a.anchorOffset,o=a.focusNode;a=a.focusOffset;try{s.nodeType,o.nodeType}catch{s=null;break e}var i=0,l=-1,c=-1,d=0,h=0,m=e,p=null;t:for(;;){for(var b;m!==s||n!==0&&m.nodeType!==3||(l=i+n),m!==o||a!==0&&m.nodeType!==3||(c=i+a),m.nodeType===3&&(i+=m.nodeValue.length),(b=m.firstChild)!==null;)p=m,m=b;for(;;){if(m===e)break t;if(p===s&&++d===n&&(l=i),p===o&&++h===a&&(c=i),(b=m.nextSibling)!==null)break;m=p,p=m.parentNode}m=b}s=l===-1||c===-1?null:{start:l,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(Cl={focusedElem:e,selectionRange:s},uo=!1,D=t;D!==null;)if(t=D,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,D=e;else for(;D!==null;){t=D;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var j=x.memoizedProps,_=x.memoizedState,v=t.stateNode,g=v.getSnapshotBeforeUpdate(t.elementType===t.type?j:xt(t.type,j),_);v.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var u=t.stateNode.containerInfo;u.nodeType===1?u.textContent="":u.nodeType===9&&u.documentElement&&u.removeChild(u.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(R(163))}}catch(f){xe(t,t.return,f)}if(e=t.sibling,e!==null){e.return=t.return,D=e;break}D=t.return}return x=Iu,Iu=!1,x}function wa(e,t,s){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var n=a=a.next;do{if((n.tag&e)===e){var o=n.destroy;n.destroy=void 0,o!==void 0&&zl(t,s,o)}n=n.next}while(n!==a)}}function Ko(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var s=t=t.next;do{if((s.tag&e)===e){var a=s.create;s.destroy=a()}s=s.next}while(s!==t)}}function Bl(e){var t=e.ref;if(t!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof t=="function"?t(e):t.current=e}}function Ff(e){var t=e.alternate;t!==null&&(e.alternate=null,Ff(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Tt],delete t[Ba],delete t[El],delete t[p0],delete t[g0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function zf(e){return e.tag===5||e.tag===3||e.tag===4}function Au(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||zf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ql(e,t,s){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?s.nodeType===8?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(s.nodeType===8?(t=s.parentNode,t.insertBefore(e,s)):(t=s,t.appendChild(e)),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=fo));else if(a!==4&&(e=e.child,e!==null))for(ql(e,t,s),e=e.sibling;e!==null;)ql(e,t,s),e=e.sibling}function Vl(e,t,s){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(Vl(e,t,s),e=e.sibling;e!==null;)Vl(e,t,s),e=e.sibling}var Re=null,vt=!1;function Xt(e,t,s){for(s=s.child;s!==null;)Bf(e,t,s),s=s.sibling}function Bf(e,t,s){if(It&&typeof It.onCommitFiberUnmount=="function")try{It.onCommitFiberUnmount(Fo,s)}catch{}switch(s.tag){case 5:Le||wr(s,t);case 6:var a=Re,n=vt;Re=null,Xt(e,t,s),Re=a,vt=n,Re!==null&&(vt?(e=Re,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):Re.removeChild(s.stateNode));break;case 18:Re!==null&&(vt?(e=Re,s=s.stateNode,e.nodeType===8?Ti(e.parentNode,s):e.nodeType===1&&Ti(e,s),Da(e)):Ti(Re,s.stateNode));break;case 4:a=Re,n=vt,Re=s.stateNode.containerInfo,vt=!0,Xt(e,t,s),Re=a,vt=n;break;case 0:case 11:case 14:case 15:if(!Le&&(a=s.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){n=a=a.next;do{var o=n,i=o.destroy;o=o.tag,i!==void 0&&(o&2||o&4)&&zl(s,t,i),n=n.next}while(n!==a)}Xt(e,t,s);break;case 1:if(!Le&&(wr(s,t),a=s.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=s.memoizedProps,a.state=s.memoizedState,a.componentWillUnmount()}catch(l){xe(s,t,l)}Xt(e,t,s);break;case 21:Xt(e,t,s);break;case 22:s.mode&1?(Le=(a=Le)||s.memoizedState!==null,Xt(e,t,s),Le=a):Xt(e,t,s);break;default:Xt(e,t,s)}}function Ou(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new I0),t.forEach(function(a){var n=B0.bind(null,e,a);s.has(a)||(s.add(a),a.then(n,n))})}}function pt(e,t){var s=t.deletions;if(s!==null)for(var a=0;a<s.length;a++){var n=s[a];try{var o=e,i=t,l=i;e:for(;l!==null;){switch(l.tag){case 5:Re=l.stateNode,vt=!1;break e;case 3:Re=l.stateNode.containerInfo,vt=!0;break e;case 4:Re=l.stateNode.containerInfo,vt=!0;break e}l=l.return}if(Re===null)throw Error(R(160));Bf(o,i,n),Re=null,vt=!1;var c=n.alternate;c!==null&&(c.return=null),n.return=null}catch(d){xe(n,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)qf(t,e),t=t.sibling}function qf(e,t){var s=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(pt(t,e),kt(e),a&4){try{wa(3,e,e.return),Ko(3,e)}catch(j){xe(e,e.return,j)}try{wa(5,e,e.return)}catch(j){xe(e,e.return,j)}}break;case 1:pt(t,e),kt(e),a&512&&s!==null&&wr(s,s.return);break;case 5:if(pt(t,e),kt(e),a&512&&s!==null&&wr(s,s.return),e.flags&32){var n=e.stateNode;try{Aa(n,"")}catch(j){xe(e,e.return,j)}}if(a&4&&(n=e.stateNode,n!=null)){var o=e.memoizedProps,i=s!==null?s.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&dm(n,o),fl(l,i);var d=fl(l,o);for(i=0;i<c.length;i+=2){var h=c[i],m=c[i+1];h==="style"?pm(n,m):h==="dangerouslySetInnerHTML"?mm(n,m):h==="children"?Aa(n,m):Sc(n,h,m,d)}switch(l){case"input":cl(n,o);break;case"textarea":um(n,o);break;case"select":var p=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!o.multiple;var b=o.value;b!=null?_r(n,!!o.multiple,b,!1):p!==!!o.multiple&&(o.defaultValue!=null?_r(n,!!o.multiple,o.defaultValue,!0):_r(n,!!o.multiple,o.multiple?[]:"",!1))}n[Ba]=o}catch(j){xe(e,e.return,j)}}break;case 6:if(pt(t,e),kt(e),a&4){if(e.stateNode===null)throw Error(R(162));n=e.stateNode,o=e.memoizedProps;try{n.nodeValue=o}catch(j){xe(e,e.return,j)}}break;case 3:if(pt(t,e),kt(e),a&4&&s!==null&&s.memoizedState.isDehydrated)try{Da(t.containerInfo)}catch(j){xe(e,e.return,j)}break;case 4:pt(t,e),kt(e);break;case 13:pt(t,e),kt(e),n=e.child,n.flags&8192&&(o=n.memoizedState!==null,n.stateNode.isHidden=o,!o||n.alternate!==null&&n.alternate.memoizedState!==null||(od=be())),a&4&&Ou(e);break;case 22:if(h=s!==null&&s.memoizedState!==null,e.mode&1?(Le=(d=Le)||h,pt(t,e),Le=d):pt(t,e),kt(e),a&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!h&&e.mode&1)for(D=e,h=e.child;h!==null;){for(m=D=h;D!==null;){switch(p=D,b=p.child,p.tag){case 0:case 11:case 14:case 15:wa(4,p,p.return);break;case 1:wr(p,p.return);var x=p.stateNode;if(typeof x.componentWillUnmount=="function"){a=p,s=p.return;try{t=a,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(j){xe(a,s,j)}}break;case 5:wr(p,p.return);break;case 22:if(p.memoizedState!==null){Lu(m);continue}}b!==null?(b.return=p,D=b):Lu(m)}h=h.sibling}e:for(h=null,m=e;;){if(m.tag===5){if(h===null){h=m;try{n=m.stateNode,d?(o=n.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=m.stateNode,c=m.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=fm("display",i))}catch(j){xe(e,e.return,j)}}}else if(m.tag===6){if(h===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(j){xe(e,e.return,j)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;h===m&&(h=null),m=m.return}h===m&&(h=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:pt(t,e),kt(e),a&4&&Ou(e);break;case 21:break;default:pt(t,e),kt(e)}}function kt(e){var t=e.flags;if(t&2){try{e:{for(var s=e.return;s!==null;){if(zf(s)){var a=s;break e}s=s.return}throw Error(R(160))}switch(a.tag){case 5:var n=a.stateNode;a.flags&32&&(Aa(n,""),a.flags&=-33);var o=Au(e);Vl(e,o,n);break;case 3:case 4:var i=a.stateNode.containerInfo,l=Au(e);ql(e,l,i);break;default:throw Error(R(161))}}catch(c){xe(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function O0(e,t,s){D=e,Vf(e)}function Vf(e,t,s){for(var a=(e.mode&1)!==0;D!==null;){var n=D,o=n.child;if(n.tag===22&&a){var i=n.memoizedState!==null||An;if(!i){var l=n.alternate,c=l!==null&&l.memoizedState!==null||Le;l=An;var d=Le;if(An=i,(Le=c)&&!d)for(D=n;D!==null;)i=D,c=i.child,i.tag===22&&i.memoizedState!==null?Du(n):c!==null?(c.return=i,D=c):Du(n);for(;o!==null;)D=o,Vf(o),o=o.sibling;D=n,An=l,Le=d}Mu(e)}else n.subtreeFlags&8772&&o!==null?(o.return=n,D=o):Mu(e)}}function Mu(e){for(;D!==null;){var t=D;if(t.flags&8772){var s=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Le||Ko(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!Le)if(s===null)a.componentDidMount();else{var n=t.elementType===t.type?s.memoizedProps:xt(t.type,s.memoizedProps);a.componentDidUpdate(n,s.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&yu(t,o,a);break;case 3:var i=t.updateQueue;if(i!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}yu(t,i,s)}break;case 5:var l=t.stateNode;if(s===null&&t.flags&4){s=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var m=h.dehydrated;m!==null&&Da(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(R(163))}Le||t.flags&512&&Bl(t)}catch(p){xe(t,t.return,p)}}if(t===e){D=null;break}if(s=t.sibling,s!==null){s.return=t.return,D=s;break}D=t.return}}function Lu(e){for(;D!==null;){var t=D;if(t===e){D=null;break}var s=t.sibling;if(s!==null){s.return=t.return,D=s;break}D=t.return}}function Du(e){for(;D!==null;){var t=D;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{Ko(4,t)}catch(c){xe(t,s,c)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var n=t.return;try{a.componentDidMount()}catch(c){xe(t,n,c)}}var o=t.return;try{Bl(t)}catch(c){xe(t,o,c)}break;case 5:var i=t.return;try{Bl(t)}catch(c){xe(t,i,c)}}}catch(c){xe(t,t.return,c)}if(t===e){D=null;break}var l=t.sibling;if(l!==null){l.return=t.return,D=l;break}D=t.return}}var M0=Math.ceil,Co=Qt.ReactCurrentDispatcher,ad=Qt.ReactCurrentOwner,dt=Qt.ReactCurrentBatchConfig,te=0,Te=null,Ne=null,Ie=0,Ze=0,Nr=ks(0),Ee=0,Ka=null,Ws=0,Jo=0,nd=0,Na=null,We=null,od=0,Ur=1/0,$t=null,ko=!1,Hl=null,gs=null,On=!1,ls=null,So=0,_a=0,Gl=null,Yn=-1,Xn=0;function Be(){return te&6?be():Yn!==-1?Yn:Yn=be()}function xs(e){return e.mode&1?te&2&&Ie!==0?Ie&-Ie:v0.transition!==null?(Xn===0&&(Xn=Sm()),Xn):(e=re,e!==0||(e=window.event,e=e===void 0?16:Om(e.type)),e):1}function wt(e,t,s,a){if(50<_a)throw _a=0,Gl=null,Error(R(185));on(e,s,a),(!(te&2)||e!==Te)&&(e===Te&&(!(te&2)&&(Jo|=s),Ee===4&&ns(e,Ie)),Xe(e,a),s===1&&te===0&&!(t.mode&1)&&(Ur=be()+500,Ho&&Ss()))}function Xe(e,t){var s=e.callbackNode;vx(e,t);var a=co(e,e===Te?Ie:0);if(a===0)s!==null&&Gd(s),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(s!=null&&Gd(s),t===1)e.tag===0?x0($u.bind(null,e)):Zm($u.bind(null,e)),m0(function(){!(te&6)&&Ss()}),s=null;else{switch(Em(a)){case 1:s=Ic;break;case 4:s=Cm;break;case 16:s=lo;break;case 536870912:s=km;break;default:s=lo}s=Xf(s,Hf.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function Hf(e,t){if(Yn=-1,Xn=0,te&6)throw Error(R(327));var s=e.callbackNode;if(Pr()&&e.callbackNode!==s)return null;var a=co(e,e===Te?Ie:0);if(a===0)return null;if(a&30||a&e.expiredLanes||t)t=Eo(e,a);else{t=a;var n=te;te|=2;var o=Wf();(Te!==e||Ie!==t)&&($t=null,Ur=be()+500,Fs(e,t));do try{$0();break}catch(l){Gf(e,l)}while(!0);Hc(),Co.current=o,te=n,Ne!==null?t=0:(Te=null,Ie=0,t=Ee)}if(t!==0){if(t===2&&(n=yl(e),n!==0&&(a=n,t=Wl(e,n))),t===1)throw s=Ka,Fs(e,0),ns(e,a),Xe(e,be()),s;if(t===6)ns(e,a);else{if(n=e.current.alternate,!(a&30)&&!L0(n)&&(t=Eo(e,a),t===2&&(o=yl(e),o!==0&&(a=o,t=Wl(e,o))),t===1))throw s=Ka,Fs(e,0),ns(e,a),Xe(e,be()),s;switch(e.finishedWork=n,e.finishedLanes=a,t){case 0:case 1:throw Error(R(345));case 2:Os(e,We,$t);break;case 3:if(ns(e,a),(a&130023424)===a&&(t=od+500-be(),10<t)){if(co(e,0)!==0)break;if(n=e.suspendedLanes,(n&a)!==a){Be(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=Sl(Os.bind(null,e,We,$t),t);break}Os(e,We,$t);break;case 4:if(ns(e,a),(a&4194240)===a)break;for(t=e.eventTimes,n=-1;0<a;){var i=31-jt(a);o=1<<i,i=t[i],i>n&&(n=i),a&=~o}if(a=n,a=be()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*M0(a/1960))-a,10<a){e.timeoutHandle=Sl(Os.bind(null,e,We,$t),a);break}Os(e,We,$t);break;case 5:Os(e,We,$t);break;default:throw Error(R(329))}}}return Xe(e,be()),e.callbackNode===s?Hf.bind(null,e):null}function Wl(e,t){var s=Na;return e.current.memoizedState.isDehydrated&&(Fs(e,t).flags|=256),e=Eo(e,t),e!==2&&(t=We,We=s,t!==null&&Kl(t)),e}function Kl(e){We===null?We=e:We.push.apply(We,e)}function L0(e){for(var t=e;;){if(t.flags&16384){var s=t.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var a=0;a<s.length;a++){var n=s[a],o=n.getSnapshot;n=n.value;try{if(!Nt(o(),n))return!1}catch{return!1}}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ns(e,t){for(t&=~nd,t&=~Jo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-jt(t),a=1<<s;e[s]=-1,t&=~a}}function $u(e){if(te&6)throw Error(R(327));Pr();var t=co(e,0);if(!(t&1))return Xe(e,be()),null;var s=Eo(e,t);if(e.tag!==0&&s===2){var a=yl(e);a!==0&&(t=a,s=Wl(e,a))}if(s===1)throw s=Ka,Fs(e,0),ns(e,t),Xe(e,be()),s;if(s===6)throw Error(R(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Os(e,We,$t),Xe(e,be()),null}function id(e,t){var s=te;te|=1;try{return e(t)}finally{te=s,te===0&&(Ur=be()+500,Ho&&Ss())}}function Ks(e){ls!==null&&ls.tag===0&&!(te&6)&&Pr();var t=te;te|=1;var s=dt.transition,a=re;try{if(dt.transition=null,re=1,e)return e()}finally{re=a,dt.transition=s,te=t,!(te&6)&&Ss()}}function ld(){Ze=Nr.current,de(Nr)}function Fs(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,h0(s)),Ne!==null)for(s=Ne.return;s!==null;){var a=s;switch(Bc(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&po();break;case 3:Dr(),de(Qe),de($e),Yc();break;case 5:Qc(a);break;case 4:Dr();break;case 13:de(fe);break;case 19:de(fe);break;case 10:Gc(a.type._context);break;case 22:case 23:ld()}s=s.return}if(Te=e,Ne=e=vs(e.current,null),Ie=Ze=t,Ee=0,Ka=null,nd=Jo=Ws=0,We=Na=null,$s!==null){for(t=0;t<$s.length;t++)if(s=$s[t],a=s.interleaved,a!==null){s.interleaved=null;var n=a.next,o=s.pending;if(o!==null){var i=o.next;o.next=n,a.next=i}s.pending=a}$s=null}return e}function Gf(e,t){do{var s=Ne;try{if(Hc(),Kn.current=_o,No){for(var a=pe.memoizedState;a!==null;){var n=a.queue;n!==null&&(n.pending=null),a=a.next}No=!1}if(Gs=0,Pe=ke=pe=null,ja=!1,Ha=0,ad.current=null,s===null||s.return===null){Ee=1,Ka=t,Ne=null;break}e:{var o=e,i=s.return,l=s,c=t;if(t=Ie,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=l,m=h.tag;if(!(h.mode&1)&&(m===0||m===11||m===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var b=Cu(i);if(b!==null){b.flags&=-257,ku(b,i,l,o,t),b.mode&1&&_u(o,d,t),t=b,c=d;var x=t.updateQueue;if(x===null){var j=new Set;j.add(c),t.updateQueue=j}else x.add(c);break e}else{if(!(t&1)){_u(o,d,t),cd();break e}c=Error(R(426))}}else if(ue&&l.mode&1){var _=Cu(i);if(_!==null){!(_.flags&65536)&&(_.flags|=256),ku(_,i,l,o,t),qc($r(c,l));break e}}o=c=$r(c,l),Ee!==4&&(Ee=2),Na===null?Na=[o]:Na.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var v=Pf(o,c,t);vu(o,v);break e;case 1:l=c;var g=o.type,u=o.stateNode;if(!(o.flags&128)&&(typeof g.getDerivedStateFromError=="function"||u!==null&&typeof u.componentDidCatch=="function"&&(gs===null||!gs.has(u)))){o.flags|=65536,t&=-t,o.lanes|=t;var f=Tf(o,l,t);vu(o,f);break e}}o=o.return}while(o!==null)}Jf(s)}catch(w){t=w,Ne===s&&s!==null&&(Ne=s=s.return);continue}break}while(!0)}function Wf(){var e=Co.current;return Co.current=_o,e===null?_o:e}function cd(){(Ee===0||Ee===3||Ee===2)&&(Ee=4),Te===null||!(Ws&268435455)&&!(Jo&268435455)||ns(Te,Ie)}function Eo(e,t){var s=te;te|=2;var a=Wf();(Te!==e||Ie!==t)&&($t=null,Fs(e,t));do try{D0();break}catch(n){Gf(e,n)}while(!0);if(Hc(),te=s,Co.current=a,Ne!==null)throw Error(R(261));return Te=null,Ie=0,Ee}function D0(){for(;Ne!==null;)Kf(Ne)}function $0(){for(;Ne!==null&&!cx();)Kf(Ne)}function Kf(e){var t=Yf(e.alternate,e,Ze);e.memoizedProps=e.pendingProps,t===null?Jf(e):Ne=t,ad.current=null}function Jf(e){var t=e;do{var s=t.alternate;if(e=t.return,t.flags&32768){if(s=R0(s,t),s!==null){s.flags&=32767,Ne=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ee=6,Ne=null;return}}else if(s=T0(s,t,Ze),s!==null){Ne=s;return}if(t=t.sibling,t!==null){Ne=t;return}Ne=t=e}while(t!==null);Ee===0&&(Ee=5)}function Os(e,t,s){var a=re,n=dt.transition;try{dt.transition=null,re=1,U0(e,t,s,a)}finally{dt.transition=n,re=a}return null}function U0(e,t,s,a){do Pr();while(ls!==null);if(te&6)throw Error(R(327));s=e.finishedWork;var n=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(R(177));e.callbackNode=null,e.callbackPriority=0;var o=s.lanes|s.childLanes;if(yx(e,o),e===Te&&(Ne=Te=null,Ie=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||On||(On=!0,Xf(lo,function(){return Pr(),null})),o=(s.flags&15990)!==0,s.subtreeFlags&15990||o){o=dt.transition,dt.transition=null;var i=re;re=1;var l=te;te|=4,ad.current=null,A0(e,s),qf(s,e),n0(Cl),uo=!!_l,Cl=_l=null,e.current=s,O0(s),dx(),te=l,re=i,dt.transition=o}else e.current=s;if(On&&(On=!1,ls=e,So=n),o=e.pendingLanes,o===0&&(gs=null),mx(s.stateNode),Xe(e,be()),t!==null)for(a=e.onRecoverableError,s=0;s<t.length;s++)n=t[s],a(n.value,{componentStack:n.stack,digest:n.digest});if(ko)throw ko=!1,e=Hl,Hl=null,e;return So&1&&e.tag!==0&&Pr(),o=e.pendingLanes,o&1?e===Gl?_a++:(_a=0,Gl=e):_a=0,Ss(),null}function Pr(){if(ls!==null){var e=Em(So),t=dt.transition,s=re;try{if(dt.transition=null,re=16>e?16:e,ls===null)var a=!1;else{if(e=ls,ls=null,So=0,te&6)throw Error(R(331));var n=te;for(te|=4,D=e.current;D!==null;){var o=D,i=o.child;if(D.flags&16){var l=o.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(D=d;D!==null;){var h=D;switch(h.tag){case 0:case 11:case 15:wa(8,h,o)}var m=h.child;if(m!==null)m.return=h,D=m;else for(;D!==null;){h=D;var p=h.sibling,b=h.return;if(Ff(h),h===d){D=null;break}if(p!==null){p.return=b,D=p;break}D=b}}}var x=o.alternate;if(x!==null){var j=x.child;if(j!==null){x.child=null;do{var _=j.sibling;j.sibling=null,j=_}while(j!==null)}}D=o}}if(o.subtreeFlags&2064&&i!==null)i.return=o,D=i;else e:for(;D!==null;){if(o=D,o.flags&2048)switch(o.tag){case 0:case 11:case 15:wa(9,o,o.return)}var v=o.sibling;if(v!==null){v.return=o.return,D=v;break e}D=o.return}}var g=e.current;for(D=g;D!==null;){i=D;var u=i.child;if(i.subtreeFlags&2064&&u!==null)u.return=i,D=u;else e:for(i=g;D!==null;){if(l=D,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ko(9,l)}}catch(w){xe(l,l.return,w)}if(l===i){D=null;break e}var f=l.sibling;if(f!==null){f.return=l.return,D=f;break e}D=l.return}}if(te=n,Ss(),It&&typeof It.onPostCommitFiberRoot=="function")try{It.onPostCommitFiberRoot(Fo,e)}catch{}a=!0}return a}finally{re=s,dt.transition=t}}return!1}function Uu(e,t,s){t=$r(s,t),t=Pf(e,t,1),e=ps(e,t,1),t=Be(),e!==null&&(on(e,1,t),Xe(e,t))}function xe(e,t,s){if(e.tag===3)Uu(e,e,s);else for(;t!==null;){if(t.tag===3){Uu(t,e,s);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(gs===null||!gs.has(a))){e=$r(s,e),e=Tf(t,e,1),t=ps(t,e,1),e=Be(),t!==null&&(on(t,1,e),Xe(t,e));break}}t=t.return}}function F0(e,t,s){var a=e.pingCache;a!==null&&a.delete(t),t=Be(),e.pingedLanes|=e.suspendedLanes&s,Te===e&&(Ie&s)===s&&(Ee===4||Ee===3&&(Ie&130023424)===Ie&&500>be()-od?Fs(e,0):nd|=s),Xe(e,t)}function Qf(e,t){t===0&&(e.mode&1?(t=_n,_n<<=1,!(_n&130023424)&&(_n=4194304)):t=1);var s=Be();e=Gt(e,t),e!==null&&(on(e,t,s),Xe(e,s))}function z0(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),Qf(e,s)}function B0(e,t){var s=0;switch(e.tag){case 13:var a=e.stateNode,n=e.memoizedState;n!==null&&(s=n.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(R(314))}a!==null&&a.delete(t),Qf(e,s)}var Yf;Yf=function(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps||Qe.current)Je=!0;else{if(!(e.lanes&s)&&!(t.flags&128))return Je=!1,P0(e,t,s);Je=!!(e.flags&131072)}else Je=!1,ue&&t.flags&1048576&&ef(t,vo,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;Qn(e,t),e=t.pendingProps;var n=Or(t,$e.current);Er(t,s),n=Zc(null,t,a,e,n,s);var o=ed();return t.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ye(a)?(o=!0,go(t)):o=!1,t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,Kc(t),n.updater=Wo,t.stateNode=n,n._reactInternals=t,Ol(t,a,e,s),t=Dl(null,t,a,!0,o,s)):(t.tag=0,ue&&o&&zc(t),ze(null,t,n,s),t=t.child),t;case 16:a=t.elementType;e:{switch(Qn(e,t),e=t.pendingProps,n=a._init,a=n(a._payload),t.type=a,n=t.tag=V0(a),e=xt(a,e),n){case 0:t=Ll(null,t,a,e,s);break e;case 1:t=Pu(null,t,a,e,s);break e;case 11:t=Su(null,t,a,e,s);break e;case 14:t=Eu(null,t,a,xt(a.type,e),s);break e}throw Error(R(306,a,""))}return t;case 0:return a=t.type,n=t.pendingProps,n=t.elementType===a?n:xt(a,n),Ll(e,t,a,n,s);case 1:return a=t.type,n=t.pendingProps,n=t.elementType===a?n:xt(a,n),Pu(e,t,a,n,s);case 3:e:{if(Of(t),e===null)throw Error(R(387));a=t.pendingProps,o=t.memoizedState,n=o.element,of(e,t),jo(t,a,null,s);var i=t.memoizedState;if(a=i.element,o.isDehydrated)if(o={element:a,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){n=$r(Error(R(423)),t),t=Tu(e,t,a,s,n);break e}else if(a!==n){n=$r(Error(R(424)),t),t=Tu(e,t,a,s,n);break e}else for(et=fs(t.stateNode.containerInfo.firstChild),tt=t,ue=!0,bt=null,s=af(t,null,a,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Mr(),a===n){t=Wt(e,t,s);break e}ze(e,t,a,s)}t=t.child}return t;case 5:return lf(t),e===null&&Rl(t),a=t.type,n=t.pendingProps,o=e!==null?e.memoizedProps:null,i=n.children,kl(a,n)?i=null:o!==null&&kl(a,o)&&(t.flags|=32),Af(e,t),ze(e,t,i,s),t.child;case 6:return e===null&&Rl(t),null;case 13:return Mf(e,t,s);case 4:return Jc(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=Lr(t,null,a,s):ze(e,t,a,s),t.child;case 11:return a=t.type,n=t.pendingProps,n=t.elementType===a?n:xt(a,n),Su(e,t,a,n,s);case 7:return ze(e,t,t.pendingProps,s),t.child;case 8:return ze(e,t,t.pendingProps.children,s),t.child;case 12:return ze(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(a=t.type._context,n=t.pendingProps,o=t.memoizedProps,i=n.value,ie(yo,a._currentValue),a._currentValue=i,o!==null)if(Nt(o.value,i)){if(o.children===n.children&&!Qe.current){t=Wt(e,t,s);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var l=o.dependencies;if(l!==null){i=o.child;for(var c=l.firstContext;c!==null;){if(c.context===a){if(o.tag===1){c=qt(-1,s&-s),c.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}o.lanes|=s,c=o.alternate,c!==null&&(c.lanes|=s),Il(o.return,s,t),l.lanes|=s;break}c=c.next}}else if(o.tag===10)i=o.type===t.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(R(341));i.lanes|=s,l=i.alternate,l!==null&&(l.lanes|=s),Il(i,s,t),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===t){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}ze(e,t,n.children,s),t=t.child}return t;case 9:return n=t.type,a=t.pendingProps.children,Er(t,s),n=ht(n),a=a(n),t.flags|=1,ze(e,t,a,s),t.child;case 14:return a=t.type,n=xt(a,t.pendingProps),n=xt(a.type,n),Eu(e,t,a,n,s);case 15:return Rf(e,t,t.type,t.pendingProps,s);case 17:return a=t.type,n=t.pendingProps,n=t.elementType===a?n:xt(a,n),Qn(e,t),t.tag=1,Ye(a)?(e=!0,go(t)):e=!1,Er(t,s),Ef(t,a,n),Ol(t,a,n,s),Dl(null,t,a,!0,e,s);case 19:return Lf(e,t,s);case 22:return If(e,t,s)}throw Error(R(156,t.tag))};function Xf(e,t){return _m(e,t)}function q0(e,t,s,a){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ct(e,t,s,a){return new q0(e,t,s,a)}function dd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function V0(e){if(typeof e=="function")return dd(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Pc)return 11;if(e===Tc)return 14}return 2}function vs(e,t){var s=e.alternate;return s===null?(s=ct(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function Zn(e,t,s,a,n,o){var i=2;if(a=e,typeof e=="function")dd(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case mr:return zs(s.children,n,o,t);case Ec:i=8,n|=8;break;case al:return e=ct(12,s,t,n|2),e.elementType=al,e.lanes=o,e;case nl:return e=ct(13,s,t,n),e.elementType=nl,e.lanes=o,e;case ol:return e=ct(19,s,t,n),e.elementType=ol,e.lanes=o,e;case im:return Qo(s,n,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case nm:i=10;break e;case om:i=9;break e;case Pc:i=11;break e;case Tc:i=14;break e;case ts:i=16,a=null;break e}throw Error(R(130,e==null?e:typeof e,""))}return t=ct(i,s,t,n),t.elementType=e,t.type=a,t.lanes=o,t}function zs(e,t,s,a){return e=ct(7,e,a,t),e.lanes=s,e}function Qo(e,t,s,a){return e=ct(22,e,a,t),e.elementType=im,e.lanes=s,e.stateNode={isHidden:!1},e}function $i(e,t,s){return e=ct(6,e,null,t),e.lanes=s,e}function Ui(e,t,s){return t=ct(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function H0(e,t,s,a,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yi(0),this.expirationTimes=yi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yi(0),this.identifierPrefix=a,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function ud(e,t,s,a,n,o,i,l,c){return e=new H0(e,t,s,l,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=ct(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:a,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kc(o),e}function G0(e,t,s){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:hr,key:a==null?null:""+a,children:e,containerInfo:t,implementation:s}}function Zf(e){if(!e)return Ns;e=e._reactInternals;e:{if(Zs(e)!==e||e.tag!==1)throw Error(R(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ye(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(R(171))}if(e.tag===1){var s=e.type;if(Ye(s))return Xm(e,s,t)}return t}function ep(e,t,s,a,n,o,i,l,c){return e=ud(s,a,!0,e,n,o,i,l,c),e.context=Zf(null),s=e.current,a=Be(),n=xs(s),o=qt(a,n),o.callback=t??null,ps(s,o,n),e.current.lanes=n,on(e,n,a),Xe(e,a),e}function Yo(e,t,s,a){var n=t.current,o=Be(),i=xs(n);return s=Zf(s),t.context===null?t.context=s:t.pendingContext=s,t=qt(o,i),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=ps(n,t,i),e!==null&&(wt(e,n,i,o),Wn(e,n,i)),i}function Po(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Fu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function hd(e,t){Fu(e,t),(e=e.alternate)&&Fu(e,t)}function W0(){return null}var tp=typeof reportError=="function"?reportError:function(e){console.error(e)};function md(e){this._internalRoot=e}Xo.prototype.render=md.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(R(409));Yo(e,t,null,null)};Xo.prototype.unmount=md.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ks(function(){Yo(null,e,null,null)}),t[Ht]=null}};function Xo(e){this._internalRoot=e}Xo.prototype.unstable_scheduleHydration=function(e){if(e){var t=Rm();e={blockedOn:null,target:e,priority:t};for(var s=0;s<as.length&&t!==0&&t<as[s].priority;s++);as.splice(s,0,e),s===0&&Am(e)}};function fd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Zo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function zu(){}function K0(e,t,s,a,n){if(n){if(typeof a=="function"){var o=a;a=function(){var d=Po(i);o.call(d)}}var i=ep(t,a,e,0,null,!1,!1,"",zu);return e._reactRootContainer=i,e[Ht]=i.current,Fa(e.nodeType===8?e.parentNode:e),Ks(),i}for(;n=e.lastChild;)e.removeChild(n);if(typeof a=="function"){var l=a;a=function(){var d=Po(c);l.call(d)}}var c=ud(e,0,!1,null,null,!1,!1,"",zu);return e._reactRootContainer=c,e[Ht]=c.current,Fa(e.nodeType===8?e.parentNode:e),Ks(function(){Yo(t,c,s,a)}),c}function ei(e,t,s,a,n){var o=s._reactRootContainer;if(o){var i=o;if(typeof n=="function"){var l=n;n=function(){var c=Po(i);l.call(c)}}Yo(t,i,e,n)}else i=K0(s,t,e,n,a);return Po(i)}Pm=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=ma(t.pendingLanes);s!==0&&(Ac(t,s|1),Xe(t,be()),!(te&6)&&(Ur=be()+500,Ss()))}break;case 13:Ks(function(){var a=Gt(e,1);if(a!==null){var n=Be();wt(a,e,1,n)}}),hd(e,1)}};Oc=function(e){if(e.tag===13){var t=Gt(e,134217728);if(t!==null){var s=Be();wt(t,e,134217728,s)}hd(e,134217728)}};Tm=function(e){if(e.tag===13){var t=xs(e),s=Gt(e,t);if(s!==null){var a=Be();wt(s,e,t,a)}hd(e,t)}};Rm=function(){return re};Im=function(e,t){var s=re;try{return re=e,t()}finally{re=s}};gl=function(e,t,s){switch(t){case"input":if(cl(e,s),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var a=s[t];if(a!==e&&a.form===e.form){var n=Vo(a);if(!n)throw Error(R(90));cm(a),cl(a,n)}}}break;case"textarea":um(e,s);break;case"select":t=s.value,t!=null&&_r(e,!!s.multiple,t,!1)}};vm=id;ym=Ks;var J0={usingClientEntryPoint:!1,Events:[cn,xr,Vo,gm,xm,id]},ca={findFiberByHostInstance:Ds,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Q0={bundleType:ca.bundleType,version:ca.version,rendererPackageName:ca.rendererPackageName,rendererConfig:ca.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=wm(e),e===null?null:e.stateNode},findFiberByHostInstance:ca.findFiberByHostInstance||W0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mn=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mn.isDisabled&&Mn.supportsFiber)try{Fo=Mn.inject(Q0),It=Mn}catch{}}rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J0;rt.createPortal=function(e,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fd(t))throw Error(R(200));return G0(e,t,null,s)};rt.createRoot=function(e,t){if(!fd(e))throw Error(R(299));var s=!1,a="",n=tp;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(n=t.onRecoverableError)),t=ud(e,1,!1,null,null,s,!1,a,n),e[Ht]=t.current,Fa(e.nodeType===8?e.parentNode:e),new md(t)};rt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(R(188)):(e=Object.keys(e).join(","),Error(R(268,e)));return e=wm(t),e=e===null?null:e.stateNode,e};rt.flushSync=function(e){return Ks(e)};rt.hydrate=function(e,t,s){if(!Zo(t))throw Error(R(200));return ei(null,e,t,!0,s)};rt.hydrateRoot=function(e,t,s){if(!fd(e))throw Error(R(405));var a=s!=null&&s.hydratedSources||null,n=!1,o="",i=tp;if(s!=null&&(s.unstable_strictMode===!0&&(n=!0),s.identifierPrefix!==void 0&&(o=s.identifierPrefix),s.onRecoverableError!==void 0&&(i=s.onRecoverableError)),t=ep(t,null,e,1,s??null,n,!1,o,i),e[Ht]=t.current,Fa(e),a)for(e=0;e<a.length;e++)s=a[e],n=s._getVersion,n=n(s._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[s,n]:t.mutableSourceEagerHydrationData.push(s,n);return new Xo(t)};rt.render=function(e,t,s){if(!Zo(t))throw Error(R(200));return ei(null,e,t,!1,s)};rt.unmountComponentAtNode=function(e){if(!Zo(e))throw Error(R(40));return e._reactRootContainer?(Ks(function(){ei(null,null,e,!1,function(){e._reactRootContainer=null,e[Ht]=null})}),!0):!1};rt.unstable_batchedUpdates=id;rt.unstable_renderSubtreeIntoContainer=function(e,t,s,a){if(!Zo(s))throw Error(R(200));if(e==null||e._reactInternals===void 0)throw Error(R(38));return ei(e,t,s,!1,a)};rt.version="18.3.1-next-f1338f8080-20240426";function sp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(sp)}catch(e){console.error(e)}}sp(),tm.exports=rt;var Y0=tm.exports,Bu=Y0;sl.createRoot=Bu.createRoot,sl.hydrateRoot=Bu.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ja(){return Ja=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Ja.apply(this,arguments)}var cs;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(cs||(cs={}));const qu="popstate";function X0(e){e===void 0&&(e={});function t(a,n){let{pathname:o,search:i,hash:l}=a.location;return Jl("",{pathname:o,search:i,hash:l},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function s(a,n){return typeof n=="string"?n:To(n)}return ev(t,s,null,e)}function je(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function rp(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Z0(){return Math.random().toString(36).substr(2,8)}function Vu(e,t){return{usr:e.state,key:e.key,idx:t}}function Jl(e,t,s,a){return s===void 0&&(s=null),Ja({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Qr(t):t,{state:s,key:t&&t.key||a||Z0()})}function To(e){let{pathname:t="/",search:s="",hash:a=""}=e;return s&&s!=="?"&&(t+=s.charAt(0)==="?"?s:"?"+s),a&&a!=="#"&&(t+=a.charAt(0)==="#"?a:"#"+a),t}function Qr(e){let t={};if(e){let s=e.indexOf("#");s>=0&&(t.hash=e.substr(s),e=e.substr(0,s));let a=e.indexOf("?");a>=0&&(t.search=e.substr(a),e=e.substr(0,a)),e&&(t.pathname=e)}return t}function ev(e,t,s,a){a===void 0&&(a={});let{window:n=document.defaultView,v5Compat:o=!1}=a,i=n.history,l=cs.Pop,c=null,d=h();d==null&&(d=0,i.replaceState(Ja({},i.state,{idx:d}),""));function h(){return(i.state||{idx:null}).idx}function m(){l=cs.Pop;let _=h(),v=_==null?null:_-d;d=_,c&&c({action:l,location:j.location,delta:v})}function p(_,v){l=cs.Push;let g=Jl(j.location,_,v);d=h()+1;let u=Vu(g,d),f=j.createHref(g);try{i.pushState(u,"",f)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;n.location.assign(f)}o&&c&&c({action:l,location:j.location,delta:1})}function b(_,v){l=cs.Replace;let g=Jl(j.location,_,v);d=h();let u=Vu(g,d),f=j.createHref(g);i.replaceState(u,"",f),o&&c&&c({action:l,location:j.location,delta:0})}function x(_){let v=n.location.origin!=="null"?n.location.origin:n.location.href,g=typeof _=="string"?_:To(_);return g=g.replace(/ $/,"%20"),je(v,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,v)}let j={get action(){return l},get location(){return e(n,i)},listen(_){if(c)throw new Error("A history only accepts one active listener");return n.addEventListener(qu,m),c=_,()=>{n.removeEventListener(qu,m),c=null}},createHref(_){return t(n,_)},createURL:x,encodeLocation(_){let v=x(_);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:p,replace:b,go(_){return i.go(_)}};return j}var Hu;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Hu||(Hu={}));function tv(e,t,s){return s===void 0&&(s="/"),sv(e,t,s)}function sv(e,t,s,a){let n=typeof t=="string"?Qr(t):t,o=pd(n.pathname||"/",s);if(o==null)return null;let i=ap(e);rv(i);let l=null;for(let c=0;l==null&&c<i.length;++c){let d=pv(o);l=hv(i[c],d)}return l}function ap(e,t,s,a){t===void 0&&(t=[]),s===void 0&&(s=[]),a===void 0&&(a="");let n=(o,i,l)=>{let c={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:i,route:o};c.relativePath.startsWith("/")&&(je(c.relativePath.startsWith(a),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(a.length));let d=ys([a,c.relativePath]),h=s.concat(c);o.children&&o.children.length>0&&(je(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),ap(o.children,t,h,d)),!(o.path==null&&!o.index)&&t.push({path:d,score:dv(d,o.index),routesMeta:h})};return e.forEach((o,i)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))n(o,i);else for(let c of np(o.path))n(o,i,c)}),t}function np(e){let t=e.split("/");if(t.length===0)return[];let[s,...a]=t,n=s.endsWith("?"),o=s.replace(/\?$/,"");if(a.length===0)return n?[o,""]:[o];let i=np(a.join("/")),l=[];return l.push(...i.map(c=>c===""?o:[o,c].join("/"))),n&&l.push(...i),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function rv(e){e.sort((t,s)=>t.score!==s.score?s.score-t.score:uv(t.routesMeta.map(a=>a.childrenIndex),s.routesMeta.map(a=>a.childrenIndex)))}const av=/^:[\w-]+$/,nv=3,ov=2,iv=1,lv=10,cv=-2,Gu=e=>e==="*";function dv(e,t){let s=e.split("/"),a=s.length;return s.some(Gu)&&(a+=cv),t&&(a+=ov),s.filter(n=>!Gu(n)).reduce((n,o)=>n+(av.test(o)?nv:o===""?iv:lv),a)}function uv(e,t){return e.length===t.length&&e.slice(0,-1).every((a,n)=>a===t[n])?e[e.length-1]-t[t.length-1]:0}function hv(e,t,s){let{routesMeta:a}=e,n={},o="/",i=[];for(let l=0;l<a.length;++l){let c=a[l],d=l===a.length-1,h=o==="/"?t:t.slice(o.length)||"/",m=mv({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},h),p=c.route;if(!m)return null;Object.assign(n,m.params),i.push({params:n,pathname:ys([o,m.pathname]),pathnameBase:yv(ys([o,m.pathnameBase])),route:p}),m.pathnameBase!=="/"&&(o=ys([o,m.pathnameBase]))}return i}function mv(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[s,a]=fv(e.path,e.caseSensitive,e.end),n=t.match(s);if(!n)return null;let o=n[0],i=o.replace(/(.)\/+$/,"$1"),l=n.slice(1);return{params:a.reduce((d,h,m)=>{let{paramName:p,isOptional:b}=h;if(p==="*"){let j=l[m]||"";i=o.slice(0,o.length-j.length).replace(/(.)\/+$/,"$1")}const x=l[m];return b&&!x?d[p]=void 0:d[p]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:i,pattern:e}}function fv(e,t,s){t===void 0&&(t=!1),s===void 0&&(s=!0),rp(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let a=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,l,c)=>(a.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(a.push({paramName:"*"}),n+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?n+="\\/*$":e!==""&&e!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,t?void 0:"i"),a]}function pv(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return rp(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function pd(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,a=e.charAt(s);return a&&a!=="/"?null:e.slice(s)||"/"}function gv(e,t){t===void 0&&(t="/");let{pathname:s,search:a="",hash:n=""}=typeof e=="string"?Qr(e):e;return{pathname:s?s.startsWith("/")?s:xv(s,t):t,search:bv(a),hash:jv(n)}}function xv(e,t){let s=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(n=>{n===".."?s.length>1&&s.pop():n!=="."&&s.push(n)}),s.length>1?s.join("/"):"/"}function Fi(e,t,s,a){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function vv(e){return e.filter((t,s)=>s===0||t.route.path&&t.route.path.length>0)}function gd(e,t){let s=vv(e);return t?s.map((a,n)=>n===s.length-1?a.pathname:a.pathnameBase):s.map(a=>a.pathnameBase)}function xd(e,t,s,a){a===void 0&&(a=!1);let n;typeof e=="string"?n=Qr(e):(n=Ja({},e),je(!n.pathname||!n.pathname.includes("?"),Fi("?","pathname","search",n)),je(!n.pathname||!n.pathname.includes("#"),Fi("#","pathname","hash",n)),je(!n.search||!n.search.includes("#"),Fi("#","search","hash",n)));let o=e===""||n.pathname==="",i=o?"/":n.pathname,l;if(i==null)l=s;else{let m=t.length-1;if(!a&&i.startsWith("..")){let p=i.split("/");for(;p[0]==="..";)p.shift(),m-=1;n.pathname=p.join("/")}l=m>=0?t[m]:"/"}let c=gv(n,l),d=i&&i!=="/"&&i.endsWith("/"),h=(o||i===".")&&s.endsWith("/");return!c.pathname.endsWith("/")&&(d||h)&&(c.pathname+="/"),c}const ys=e=>e.join("/").replace(/\/\/+/g,"/"),yv=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),bv=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,jv=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function wv(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const op=["post","put","patch","delete"];new Set(op);const Nv=["get",...op];new Set(Nv);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qa(){return Qa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Qa.apply(this,arguments)}const vd=N.createContext(null),_v=N.createContext(null),Es=N.createContext(null),ti=N.createContext(null),Yt=N.createContext({outlet:null,matches:[],isDataRoute:!1}),ip=N.createContext(null);function Cv(e,t){let{relative:s}=t===void 0?{}:t;Yr()||je(!1);let{basename:a,navigator:n}=N.useContext(Es),{hash:o,pathname:i,search:l}=cp(e,{relative:s}),c=i;return a!=="/"&&(c=i==="/"?a:ys([a,i])),n.createHref({pathname:c,search:l,hash:o})}function Yr(){return N.useContext(ti)!=null}function er(){return Yr()||je(!1),N.useContext(ti).location}function lp(e){N.useContext(Es).static||N.useLayoutEffect(e)}function Ct(){let{isDataRoute:e}=N.useContext(Yt);return e?Uv():kv()}function kv(){Yr()||je(!1);let e=N.useContext(vd),{basename:t,future:s,navigator:a}=N.useContext(Es),{matches:n}=N.useContext(Yt),{pathname:o}=er(),i=JSON.stringify(gd(n,s.v7_relativeSplatPath)),l=N.useRef(!1);return lp(()=>{l.current=!0}),N.useCallback(function(d,h){if(h===void 0&&(h={}),!l.current)return;if(typeof d=="number"){a.go(d);return}let m=xd(d,JSON.parse(i),o,h.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:ys([t,m.pathname])),(h.replace?a.replace:a.push)(m,h.state,h)},[t,a,i,o,e])}function Sv(){let{matches:e}=N.useContext(Yt),t=e[e.length-1];return t?t.params:{}}function cp(e,t){let{relative:s}=t===void 0?{}:t,{future:a}=N.useContext(Es),{matches:n}=N.useContext(Yt),{pathname:o}=er(),i=JSON.stringify(gd(n,a.v7_relativeSplatPath));return N.useMemo(()=>xd(e,JSON.parse(i),o,s==="path"),[e,i,o,s])}function Ev(e,t){return Pv(e,t)}function Pv(e,t,s,a){Yr()||je(!1);let{navigator:n}=N.useContext(Es),{matches:o}=N.useContext(Yt),i=o[o.length-1],l=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let d=er(),h;if(t){var m;let _=typeof t=="string"?Qr(t):t;c==="/"||(m=_.pathname)!=null&&m.startsWith(c)||je(!1),h=_}else h=d;let p=h.pathname||"/",b=p;if(c!=="/"){let _=c.replace(/^\//,"").split("/");b="/"+p.replace(/^\//,"").split("/").slice(_.length).join("/")}let x=tv(e,{pathname:b}),j=Ov(x&&x.map(_=>Object.assign({},_,{params:Object.assign({},l,_.params),pathname:ys([c,n.encodeLocation?n.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?c:ys([c,n.encodeLocation?n.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),o,s,a);return t&&j?N.createElement(ti.Provider,{value:{location:Qa({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:cs.Pop}},j):j}function Tv(){let e=$v(),t=wv(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},t),s?N.createElement("pre",{style:n},s):null,null)}const Rv=N.createElement(Tv,null);class Iv extends N.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,s){return s.location!==t.location||s.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:s.error,location:s.location,revalidation:t.revalidation||s.revalidation}}componentDidCatch(t,s){console.error("React Router caught the following error during render",t,s)}render(){return this.state.error!==void 0?N.createElement(Yt.Provider,{value:this.props.routeContext},N.createElement(ip.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Av(e){let{routeContext:t,match:s,children:a}=e,n=N.useContext(vd);return n&&n.static&&n.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=s.route.id),N.createElement(Yt.Provider,{value:t},a)}function Ov(e,t,s,a){var n;if(t===void 0&&(t=[]),s===void 0&&(s=null),a===void 0&&(a=null),e==null){var o;if(!s)return null;if(s.errors)e=s.matches;else if((o=a)!=null&&o.v7_partialHydration&&t.length===0&&!s.initialized&&s.matches.length>0)e=s.matches;else return null}let i=e,l=(n=s)==null?void 0:n.errors;if(l!=null){let h=i.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);h>=0||je(!1),i=i.slice(0,Math.min(i.length,h+1))}let c=!1,d=-1;if(s&&a&&a.v7_partialHydration)for(let h=0;h<i.length;h++){let m=i[h];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=h),m.route.id){let{loaderData:p,errors:b}=s,x=m.route.loader&&p[m.route.id]===void 0&&(!b||b[m.route.id]===void 0);if(m.route.lazy||x){c=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((h,m,p)=>{let b,x=!1,j=null,_=null;s&&(b=l&&m.route.id?l[m.route.id]:void 0,j=m.route.errorElement||Rv,c&&(d<0&&p===0?(Fv("route-fallback"),x=!0,_=null):d===p&&(x=!0,_=m.route.hydrateFallbackElement||null)));let v=t.concat(i.slice(0,p+1)),g=()=>{let u;return b?u=j:x?u=_:m.route.Component?u=N.createElement(m.route.Component,null):m.route.element?u=m.route.element:u=h,N.createElement(Av,{match:m,routeContext:{outlet:h,matches:v,isDataRoute:s!=null},children:u})};return s&&(m.route.ErrorBoundary||m.route.errorElement||p===0)?N.createElement(Iv,{location:s.location,revalidation:s.revalidation,component:j,error:b,children:g(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):g()},null)}var dp=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(dp||{}),up=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(up||{});function Mv(e){let t=N.useContext(vd);return t||je(!1),t}function Lv(e){let t=N.useContext(_v);return t||je(!1),t}function Dv(e){let t=N.useContext(Yt);return t||je(!1),t}function hp(e){let t=Dv(),s=t.matches[t.matches.length-1];return s.route.id||je(!1),s.route.id}function $v(){var e;let t=N.useContext(ip),s=Lv(),a=hp();return t!==void 0?t:(e=s.errors)==null?void 0:e[a]}function Uv(){let{router:e}=Mv(dp.UseNavigateStable),t=hp(up.UseNavigateStable),s=N.useRef(!1);return lp(()=>{s.current=!0}),N.useCallback(function(n,o){o===void 0&&(o={}),s.current&&(typeof n=="number"?e.navigate(n):e.navigate(n,Qa({fromRouteId:t},o)))},[e,t])}const Wu={};function Fv(e,t,s){Wu[e]||(Wu[e]=!0)}function zv(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Ku(e){let{to:t,replace:s,state:a,relative:n}=e;Yr()||je(!1);let{future:o,static:i}=N.useContext(Es),{matches:l}=N.useContext(Yt),{pathname:c}=er(),d=Ct(),h=xd(t,gd(l,o.v7_relativeSplatPath),c,n==="path"),m=JSON.stringify(h);return N.useEffect(()=>d(JSON.parse(m),{replace:s,state:a,relative:n}),[d,m,n,s,a]),null}function ae(e){je(!1)}function Bv(e){let{basename:t="/",children:s=null,location:a,navigationType:n=cs.Pop,navigator:o,static:i=!1,future:l}=e;Yr()&&je(!1);let c=t.replace(/^\/*/,"/"),d=N.useMemo(()=>({basename:c,navigator:o,static:i,future:Qa({v7_relativeSplatPath:!1},l)}),[c,l,o,i]);typeof a=="string"&&(a=Qr(a));let{pathname:h="/",search:m="",hash:p="",state:b=null,key:x="default"}=a,j=N.useMemo(()=>{let _=pd(h,c);return _==null?null:{location:{pathname:_,search:m,hash:p,state:b,key:x},navigationType:n}},[c,h,m,p,b,x,n]);return j==null?null:N.createElement(Es.Provider,{value:d},N.createElement(ti.Provider,{children:s,value:j}))}function qv(e){let{children:t,location:s}=e;return Ev(Ql(t),s)}new Promise(()=>{});function Ql(e,t){t===void 0&&(t=[]);let s=[];return N.Children.forEach(e,(a,n)=>{if(!N.isValidElement(a))return;let o=[...t,n];if(a.type===N.Fragment){s.push.apply(s,Ql(a.props.children,o));return}a.type!==ae&&je(!1),!a.props.index||!a.props.children||je(!1);let i={id:a.props.id||o.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(i.children=Ql(a.props.children,o)),s.push(i)}),s}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yl(){return Yl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Yl.apply(this,arguments)}function Vv(e,t){if(e==null)return{};var s={},a=Object.keys(e),n,o;for(o=0;o<a.length;o++)n=a[o],!(t.indexOf(n)>=0)&&(s[n]=e[n]);return s}function Hv(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Gv(e,t){return e.button===0&&(!t||t==="_self")&&!Hv(e)}function Xl(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,s)=>{let a=e[s];return t.concat(Array.isArray(a)?a.map(n=>[s,n]):[[s,a]])},[]))}function Wv(e,t){let s=Xl(e);return t&&t.forEach((a,n)=>{s.has(n)||t.getAll(n).forEach(o=>{s.append(n,o)})}),s}const Kv=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Jv="6";try{window.__reactRouterVersion=Jv}catch{}const Qv="startTransition",Ju=Fg[Qv];function Yv(e){let{basename:t,children:s,future:a,window:n}=e,o=N.useRef();o.current==null&&(o.current=X0({window:n,v5Compat:!0}));let i=o.current,[l,c]=N.useState({action:i.action,location:i.location}),{v7_startTransition:d}=a||{},h=N.useCallback(m=>{d&&Ju?Ju(()=>c(m)):c(m)},[c,d]);return N.useLayoutEffect(()=>i.listen(h),[i,h]),N.useEffect(()=>zv(a),[a]),N.createElement(Bv,{basename:t,children:s,location:l.location,navigationType:l.action,navigator:i,future:a})}const Xv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Zv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,q=N.forwardRef(function(t,s){let{onClick:a,relative:n,reloadDocument:o,replace:i,state:l,target:c,to:d,preventScrollReset:h,viewTransition:m}=t,p=Vv(t,Kv),{basename:b}=N.useContext(Es),x,j=!1;if(typeof d=="string"&&Zv.test(d)&&(x=d,Xv))try{let u=new URL(window.location.href),f=d.startsWith("//")?new URL(u.protocol+d):new URL(d),w=pd(f.pathname,b);f.origin===u.origin&&w!=null?d=w+f.search+f.hash:j=!0}catch{}let _=Cv(d,{relative:n}),v=ey(d,{replace:i,state:l,target:c,preventScrollReset:h,relative:n,viewTransition:m});function g(u){a&&a(u),u.defaultPrevented||v(u)}return N.createElement("a",Yl({},p,{href:x||_,onClick:j||o?a:g,ref:s,target:c}))});var Qu;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Qu||(Qu={}));var Yu;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Yu||(Yu={}));function ey(e,t){let{target:s,replace:a,state:n,preventScrollReset:o,relative:i,viewTransition:l}=t===void 0?{}:t,c=Ct(),d=er(),h=cp(e,{relative:i});return N.useCallback(m=>{if(Gv(m,s)){m.preventDefault();let p=a!==void 0?a:To(d)===To(h);c(e,{replace:p,state:n,preventScrollReset:o,relative:i,viewTransition:l})}},[d,c,h,a,n,s,e,o,i,l])}function ty(e){let t=N.useRef(Xl(e)),s=N.useRef(!1),a=er(),n=N.useMemo(()=>Wv(a.search,s.current?null:t.current),[a.search]),o=Ct(),i=N.useCallback((l,c)=>{const d=Xl(typeof l=="function"?l(n):l);s.current=!0,o("?"+d,c)},[o,n]);return[n,i]}const sy="modulepreload",ry=function(e){return"/"+e},Xu={},un=function(t,s,a){let n=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));n=Promise.allSettled(s.map(c=>{if(c=ry(c),c in Xu)return;Xu[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":sy,d||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),d)return new Promise((p,b)=>{m.addEventListener("load",p),m.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return n.then(i=>{for(const l of i||[])l.status==="rejected"&&o(l.reason);return t().catch(o)})},ay=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>un(async()=>{const{default:a}=await Promise.resolve().then(()=>Xr);return{default:a}},void 0).then(({default:a})=>a(...s)):t=fetch,(...s)=>t(...s)};class yd extends Error{constructor(t,s="FunctionsError",a){super(t),this.name=s,this.context=a}}class ny extends yd{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Zu extends yd{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class eh extends yd{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Zl;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Zl||(Zl={}));var oy=function(e,t,s,a){function n(o){return o instanceof s?o:new s(function(i){i(o)})}return new(s||(s=Promise))(function(o,i){function l(h){try{d(a.next(h))}catch(m){i(m)}}function c(h){try{d(a.throw(h))}catch(m){i(m)}}function d(h){h.done?o(h.value):n(h.value).then(l,c)}d((a=a.apply(e,t||[])).next())})};class iy{constructor(t,{headers:s={},customFetch:a,region:n=Zl.Any}={}){this.url=t,this.headers=s,this.region=n,this.fetch=ay(a)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,s={}){var a;return oy(this,void 0,void 0,function*(){try{const{headers:n,method:o,body:i}=s;let l={},{region:c}=s;c||(c=this.region);const d=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let h;i&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",h=i):typeof i=="string"?(l["Content-Type"]="text/plain",h=i):typeof FormData<"u"&&i instanceof FormData?h=i:(l["Content-Type"]="application/json",h=JSON.stringify(i)));const m=yield this.fetch(d.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),n),body:h}).catch(j=>{throw new ny(j)}),p=m.headers.get("x-relay-error");if(p&&p==="true")throw new Zu(m);if(!m.ok)throw new eh(m);let b=((a=m.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),x;return b==="application/json"?x=yield m.json():b==="application/octet-stream"?x=yield m.blob():b==="text/event-stream"?x=m:b==="multipart/form-data"?x=yield m.formData():x=yield m.text(),{data:x,error:null,response:m}}catch(n){return{data:null,error:n,response:n instanceof eh||n instanceof Zu?n.context:void 0}}})}}var Ke={},bd={},si={},hn={},ri={},ai={},ly=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Fr=ly();const cy=Fr.fetch,mp=Fr.fetch.bind(Fr),fp=Fr.Headers,dy=Fr.Request,uy=Fr.Response,Xr=Object.freeze(Object.defineProperty({__proto__:null,Headers:fp,Request:dy,Response:uy,default:mp,fetch:cy},Symbol.toStringTag,{value:"Module"})),hy=_g(Xr);var ni={};Object.defineProperty(ni,"__esModule",{value:!0});let my=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};ni.default=my;var pp=ut&&ut.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ai,"__esModule",{value:!0});const fy=pp(hy),py=pp(ni);let gy=class{constructor(t){var s,a;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(s=t.shouldThrowOnError)!==null&&s!==void 0?s:!1,this.signal=t.signal,this.isMaybeSingle=(a=t.isMaybeSingle)!==null&&a!==void 0?a:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=fy.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,s){return this.headers=new Headers(this.headers),this.headers.set(t,s),this}then(t,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let n=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var i,l,c,d;let h=null,m=null,p=null,b=o.status,x=o.statusText;if(o.ok){if(this.method!=="HEAD"){const g=await o.text();g===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((i=this.headers.get("Accept"))===null||i===void 0)&&i.includes("application/vnd.pgrst.plan+text"))?m=g:m=JSON.parse(g))}const _=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),v=(c=o.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");_&&v&&v.length>1&&(p=parseInt(v[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(m)&&(m.length>1?(h={code:"PGRST116",details:`Results contain ${m.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},m=null,p=null,b=406,x="Not Acceptable"):m.length===1?m=m[0]:m=null)}else{const _=await o.text();try{h=JSON.parse(_),Array.isArray(h)&&o.status===404&&(m=[],h=null,b=200,x="OK")}catch{o.status===404&&_===""?(b=204,x="No Content"):h={message:_}}if(h&&this.isMaybeSingle&&(!((d=h==null?void 0:h.details)===null||d===void 0)&&d.includes("0 rows"))&&(h=null,b=200,x="OK"),h&&this.shouldThrowOnError)throw new py.default(h)}return{error:h,data:m,count:p,status:b,statusText:x}});return this.shouldThrowOnError||(n=n.catch(o=>{var i,l,c;return{error:{message:`${(i=o==null?void 0:o.name)!==null&&i!==void 0?i:"FetchError"}: ${o==null?void 0:o.message}`,details:`${(l=o==null?void 0:o.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=o==null?void 0:o.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),n.then(t,s)}returns(){return this}overrideTypes(){return this}};ai.default=gy;var xy=ut&&ut.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ri,"__esModule",{value:!0});const vy=xy(ai);let yy=class extends vy.default{select(t){let s=!1;const a=(t??"*").split("").map(n=>/\s/.test(n)&&!s?"":(n==='"'&&(s=!s),n)).join("");return this.url.searchParams.set("select",a),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:s=!0,nullsFirst:a,foreignTable:n,referencedTable:o=n}={}){const i=o?`${o}.order`:"order",l=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${l?`${l},`:""}${t}.${s?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:s,referencedTable:a=s}={}){const n=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(n,`${t}`),this}range(t,s,{foreignTable:a,referencedTable:n=a}={}){const o=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(o,`${t}`),this.url.searchParams.set(i,`${s-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:s=!1,settings:a=!1,buffers:n=!1,wal:o=!1,format:i="text"}={}){var l;const c=[t?"analyze":null,s?"verbose":null,a?"settings":null,n?"buffers":null,o?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${d}"; options=${c};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};ri.default=yy;var by=ut&&ut.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(hn,"__esModule",{value:!0});const jy=by(ri);let wy=class extends jy.default{eq(t,s){return this.url.searchParams.append(t,`eq.${s}`),this}neq(t,s){return this.url.searchParams.append(t,`neq.${s}`),this}gt(t,s){return this.url.searchParams.append(t,`gt.${s}`),this}gte(t,s){return this.url.searchParams.append(t,`gte.${s}`),this}lt(t,s){return this.url.searchParams.append(t,`lt.${s}`),this}lte(t,s){return this.url.searchParams.append(t,`lte.${s}`),this}like(t,s){return this.url.searchParams.append(t,`like.${s}`),this}likeAllOf(t,s){return this.url.searchParams.append(t,`like(all).{${s.join(",")}}`),this}likeAnyOf(t,s){return this.url.searchParams.append(t,`like(any).{${s.join(",")}}`),this}ilike(t,s){return this.url.searchParams.append(t,`ilike.${s}`),this}ilikeAllOf(t,s){return this.url.searchParams.append(t,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(t,s){return this.url.searchParams.append(t,`ilike(any).{${s.join(",")}}`),this}is(t,s){return this.url.searchParams.append(t,`is.${s}`),this}in(t,s){const a=Array.from(new Set(s)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(t,`in.(${a})`),this}contains(t,s){return typeof s=="string"?this.url.searchParams.append(t,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(t,`cs.{${s.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(s)}`),this}containedBy(t,s){return typeof s=="string"?this.url.searchParams.append(t,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(t,`cd.{${s.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(s)}`),this}rangeGt(t,s){return this.url.searchParams.append(t,`sr.${s}`),this}rangeGte(t,s){return this.url.searchParams.append(t,`nxl.${s}`),this}rangeLt(t,s){return this.url.searchParams.append(t,`sl.${s}`),this}rangeLte(t,s){return this.url.searchParams.append(t,`nxr.${s}`),this}rangeAdjacent(t,s){return this.url.searchParams.append(t,`adj.${s}`),this}overlaps(t,s){return typeof s=="string"?this.url.searchParams.append(t,`ov.${s}`):this.url.searchParams.append(t,`ov.{${s.join(",")}}`),this}textSearch(t,s,{config:a,type:n}={}){let o="";n==="plain"?o="pl":n==="phrase"?o="ph":n==="websearch"&&(o="w");const i=a===void 0?"":`(${a})`;return this.url.searchParams.append(t,`${o}fts${i}.${s}`),this}match(t){return Object.entries(t).forEach(([s,a])=>{this.url.searchParams.append(s,`eq.${a}`)}),this}not(t,s,a){return this.url.searchParams.append(t,`not.${s}.${a}`),this}or(t,{foreignTable:s,referencedTable:a=s}={}){const n=a?`${a}.or`:"or";return this.url.searchParams.append(n,`(${t})`),this}filter(t,s,a){return this.url.searchParams.append(t,`${s}.${a}`),this}};hn.default=wy;var Ny=ut&&ut.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(si,"__esModule",{value:!0});const da=Ny(hn);let _y=class{constructor(t,{headers:s={},schema:a,fetch:n}){this.url=t,this.headers=new Headers(s),this.schema=a,this.fetch=n}select(t,{head:s=!1,count:a}={}){const n=s?"HEAD":"GET";let o=!1;const i=(t??"*").split("").map(l=>/\s/.test(l)&&!o?"":(l==='"'&&(o=!o),l)).join("");return this.url.searchParams.set("select",i),a&&this.headers.append("Prefer",`count=${a}`),new da.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:s,defaultToNull:a=!0}={}){var n;const o="POST";if(s&&this.headers.append("Prefer",`count=${s}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const i=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(i.length>0){const l=[...new Set(i)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new da.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(t,{onConflict:s,ignoreDuplicates:a=!1,count:n,defaultToNull:o=!0}={}){var i;const l="POST";if(this.headers.append("Prefer",`resolution=${a?"ignore":"merge"}-duplicates`),s!==void 0&&this.url.searchParams.set("on_conflict",s),n&&this.headers.append("Prefer",`count=${n}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(c.length>0){const d=[...new Set(c)].map(h=>`"${h}"`);this.url.searchParams.set("columns",d.join(","))}}return new da.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(t,{count:s}={}){var a;const n="PATCH";return s&&this.headers.append("Prefer",`count=${s}`),new da.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}delete({count:t}={}){var s;const a="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new da.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}};si.default=_y;var gp=ut&&ut.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(bd,"__esModule",{value:!0});const Cy=gp(si),ky=gp(hn);let Sy=class xp{constructor(t,{headers:s={},schema:a,fetch:n}={}){this.url=t,this.headers=new Headers(s),this.schemaName=a,this.fetch=n}from(t){const s=new URL(`${this.url}/${t}`);return new Cy.default(s,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new xp(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,s={},{head:a=!1,get:n=!1,count:o}={}){var i;let l;const c=new URL(`${this.url}/rpc/${t}`);let d;a||n?(l=a?"HEAD":"GET",Object.entries(s).filter(([m,p])=>p!==void 0).map(([m,p])=>[m,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([m,p])=>{c.searchParams.append(m,p)})):(l="POST",d=s);const h=new Headers(this.headers);return o&&h.set("Prefer",`count=${o}`),new ky.default({method:l,url:c,headers:h,schema:this.schemaName,body:d,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}};bd.default=Sy;var Zr=ut&&ut.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ke,"__esModule",{value:!0});Ke.PostgrestError=Ke.PostgrestBuilder=Ke.PostgrestTransformBuilder=Ke.PostgrestFilterBuilder=Ke.PostgrestQueryBuilder=Ke.PostgrestClient=void 0;const vp=Zr(bd);Ke.PostgrestClient=vp.default;const yp=Zr(si);Ke.PostgrestQueryBuilder=yp.default;const bp=Zr(hn);Ke.PostgrestFilterBuilder=bp.default;const jp=Zr(ri);Ke.PostgrestTransformBuilder=jp.default;const wp=Zr(ai);Ke.PostgrestBuilder=wp.default;const Np=Zr(ni);Ke.PostgrestError=Np.default;var Ey=Ke.default={PostgrestClient:vp.default,PostgrestQueryBuilder:yp.default,PostgrestFilterBuilder:bp.default,PostgrestTransformBuilder:jp.default,PostgrestBuilder:wp.default,PostgrestError:Np.default};const{PostgrestClient:Py,PostgrestQueryBuilder:EN,PostgrestFilterBuilder:PN,PostgrestTransformBuilder:TN,PostgrestBuilder:RN,PostgrestError:IN}=Ey;class Ty{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const s=process.versions;if(s&&s.node){const a=s.node,n=parseInt(a.replace(/^v/,"").split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let s=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(s+=`

Suggested solution: ${t.workaround}`),new Error(s)}static createWebSocket(t,s){const a=this.getWebSocketConstructor();return new a(t,s)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const Ry="2.15.5",Iy=`realtime-js/${Ry}`,Ay="1.0.0",ec=1e4,Oy=1e3,My=100;var Ca;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Ca||(Ca={}));var _e;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(_e||(_e={}));var yt;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(yt||(yt={}));var tc;(function(e){e.websocket="websocket"})(tc||(tc={}));var Ls;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Ls||(Ls={}));class Ly{constructor(){this.HEADER_LENGTH=1}decode(t,s){return t.constructor===ArrayBuffer?s(this._binaryDecode(t)):s(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const s=new DataView(t),a=new TextDecoder;return this._decodeBroadcast(t,s,a)}_decodeBroadcast(t,s,a){const n=s.getUint8(1),o=s.getUint8(2);let i=this.HEADER_LENGTH+2;const l=a.decode(t.slice(i,i+n));i=i+n;const c=a.decode(t.slice(i,i+o));i=i+o;const d=JSON.parse(a.decode(t.slice(i,t.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class _p{constructor(t,s){this.callback=t,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var oe;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(oe||(oe={}));const th=(e,t,s={})=>{var a;const n=(a=s.skipTypes)!==null&&a!==void 0?a:[];return Object.keys(t).reduce((o,i)=>(o[i]=Dy(i,e,t,n),o),{})},Dy=(e,t,s,a)=>{const n=t.find(l=>l.name===e),o=n==null?void 0:n.type,i=s[e];return o&&!a.includes(o)?Cp(o,i):sc(i)},Cp=(e,t)=>{if(e.charAt(0)==="_"){const s=e.slice(1,e.length);return zy(t,s)}switch(e){case oe.bool:return $y(t);case oe.float4:case oe.float8:case oe.int2:case oe.int4:case oe.int8:case oe.numeric:case oe.oid:return Uy(t);case oe.json:case oe.jsonb:return Fy(t);case oe.timestamp:return By(t);case oe.abstime:case oe.date:case oe.daterange:case oe.int4range:case oe.int8range:case oe.money:case oe.reltime:case oe.text:case oe.time:case oe.timestamptz:case oe.timetz:case oe.tsrange:case oe.tstzrange:return sc(t);default:return sc(t)}},sc=e=>e,$y=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Uy=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Fy=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},zy=(e,t)=>{if(typeof e!="string")return e;const s=e.length-1,a=e[s];if(e[0]==="{"&&a==="}"){let o;const i=e.slice(1,s);try{o=JSON.parse("["+i+"]")}catch{o=i?i.split(","):[]}return o.map(l=>Cp(t,l))}return e},By=e=>typeof e=="string"?e.replace(" ","T"):e,kp=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class zi{constructor(t,s,a={},n=ec){this.channel=t,this.event=s,this.payload=a,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,s){var a;return this._hasReceived(t)&&s((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:t,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:s}){this.recHooks.filter(a=>a.status===t).forEach(a=>a.callback(s))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var sh;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(sh||(sh={}));class ka{constructor(t,s){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},n=>{const{onJoin:o,onLeave:i,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ka.syncState(this.state,n,o,i),this.pendingDiffs.forEach(c=>{this.state=ka.syncDiff(this.state,c,o,i)}),this.pendingDiffs=[],l()}),this.channel._on(a.diff,{},n=>{const{onJoin:o,onLeave:i,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=ka.syncDiff(this.state,n,o,i),l())}),this.onJoin((n,o,i)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:o,newPresences:i})}),this.onLeave((n,o,i)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:o,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,s,a,n){const o=this.cloneDeep(t),i=this.transformState(s),l={},c={};return this.map(o,(d,h)=>{i[d]||(c[d]=h)}),this.map(i,(d,h)=>{const m=o[d];if(m){const p=h.map(_=>_.presence_ref),b=m.map(_=>_.presence_ref),x=h.filter(_=>b.indexOf(_.presence_ref)<0),j=m.filter(_=>p.indexOf(_.presence_ref)<0);x.length>0&&(l[d]=x),j.length>0&&(c[d]=j)}else l[d]=h}),this.syncDiff(o,{joins:l,leaves:c},a,n)}static syncDiff(t,s,a,n){const{joins:o,leaves:i}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return a||(a=()=>{}),n||(n=()=>{}),this.map(o,(l,c)=>{var d;const h=(d=t[l])!==null&&d!==void 0?d:[];if(t[l]=this.cloneDeep(c),h.length>0){const m=t[l].map(b=>b.presence_ref),p=h.filter(b=>m.indexOf(b.presence_ref)<0);t[l].unshift(...p)}a(l,h,c)}),this.map(i,(l,c)=>{let d=t[l];if(!d)return;const h=c.map(m=>m.presence_ref);d=d.filter(m=>h.indexOf(m.presence_ref)<0),t[l]=d,n(l,d,c),d.length===0&&delete t[l]}),t}static map(t,s){return Object.getOwnPropertyNames(t).map(a=>s(a,t[a]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((s,a)=>{const n=t[a];return"metas"in n?s[a]=n.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):s[a]=n,s},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var rh;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(rh||(rh={}));var Sa;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Sa||(Sa={}));var Ut;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Ut||(Ut={}));class jd{constructor(t,s={config:{}},a){this.topic=t,this.params=s,this.socket=a,this.bindings={},this.state=_e.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new zi(this,yt.join,this.params,this.timeout),this.rejoinTimer=new _p(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=_e.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=_e.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=_e.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=_e.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=_e.errored,this.rejoinTimer.scheduleTimeout())}),this._on(yt.reply,{},(n,o)=>{this._trigger(this._replyEventName(o),n)}),this.presence=new ka(this),this.broadcastEndpointURL=kp(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,s=this.timeout){var a,n,o;if(this.socket.isConnected()||this.socket.connect(),this.state==_e.closed){const{config:{broadcast:i,presence:l,private:c}}=this.params,d=(n=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(b=>b.filter))!==null&&n!==void 0?n:[],h=!!this.bindings[Sa.PRESENCE]&&this.bindings[Sa.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,m={},p={broadcast:i,presence:Object.assign(Object.assign({},l),{enabled:h}),postgres_changes:d,private:c};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this._onError(b=>t==null?void 0:t(Ut.CHANNEL_ERROR,b)),this._onClose(()=>t==null?void 0:t(Ut.CLOSED)),this.updateJoinPayload(Object.assign({config:p},m)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:b})=>{var x;if(this.socket.setAuth(),b===void 0){t==null||t(Ut.SUBSCRIBED);return}else{const j=this.bindings.postgres_changes,_=(x=j==null?void 0:j.length)!==null&&x!==void 0?x:0,v=[];for(let g=0;g<_;g++){const u=j[g],{filter:{event:f,schema:w,table:y,filter:C}}=u,S=b&&b[g];if(S&&S.event===f&&S.schema===w&&S.table===y&&S.filter===C)v.push(Object.assign(Object.assign({},u),{id:S.id}));else{this.unsubscribe(),this.state=_e.errored,t==null||t(Ut.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,t&&t(Ut.SUBSCRIBED);return}}).receive("error",b=>{this.state=_e.errored,t==null||t(Ut.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Ut.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,s={}){return await this.send({type:"presence",event:"track",payload:t},s.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,s,a){return this.state===_e.joined&&t===Sa.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,s,a)}async send(t,s={}){var a,n;if(!this._canPush()&&t.type==="broadcast"){const{event:o,payload:i}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:i,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(a=s.timeout)!==null&&a!==void 0?a:this.timeout);return await((n=d.body)===null||n===void 0?void 0:n.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var i,l,c;const d=this._push(t.type,t,s.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(i=this.params)===null||i===void 0?void 0:i.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),d.receive("ok",()=>o("ok")),d.receive("error",()=>o("error")),d.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=_e.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(yt.close,"leave",this._joinRef())};this.joinPush.destroy();let a=null;return new Promise(n=>{a=new zi(this,yt.leave,{},t),a.receive("ok",()=>{s(),n("ok")}).receive("timeout",()=>{s(),n("timed out")}).receive("error",()=>{n("error")}),a.send(),this._canPush()||a.trigger("ok",{})}).finally(()=>{a==null||a.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=_e.closed,this.bindings={}}async _fetchWithTimeout(t,s,a){const n=new AbortController,o=setTimeout(()=>n.abort(),a),i=await this.socket.fetch(t,Object.assign(Object.assign({},s),{signal:n.signal}));return clearTimeout(o),i}_push(t,s,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new zi(this,t,s,a);return this._canPush()?n.send():this._addToPushBuffer(n),n}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>My){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(t,s,a){return s}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,s,a){var n,o;const i=t.toLocaleLowerCase(),{close:l,error:c,leave:d,join:h}=yt;if(a&&[l,c,d,h].indexOf(i)>=0&&a!==this._joinRef())return;let p=this._onMessage(i,s,a);if(s&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(b=>{var x,j,_;return((x=b.filter)===null||x===void 0?void 0:x.event)==="*"||((_=(j=b.filter)===null||j===void 0?void 0:j.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===i}).map(b=>b.callback(p,a)):(o=this.bindings[i])===null||o===void 0||o.filter(b=>{var x,j,_,v,g,u;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in b){const f=b.id,w=(x=b.filter)===null||x===void 0?void 0:x.event;return f&&((j=s.ids)===null||j===void 0?void 0:j.includes(f))&&(w==="*"||(w==null?void 0:w.toLocaleLowerCase())===((_=s.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const f=(g=(v=b==null?void 0:b.filter)===null||v===void 0?void 0:v.event)===null||g===void 0?void 0:g.toLocaleLowerCase();return f==="*"||f===((u=s==null?void 0:s.event)===null||u===void 0?void 0:u.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===i}).map(b=>{if(typeof p=="object"&&"ids"in p){const x=p.data,{schema:j,table:_,commit_timestamp:v,type:g,errors:u}=x;p=Object.assign(Object.assign({},{schema:j,table:_,commit_timestamp:v,eventType:g,new:{},old:{},errors:u}),this._getPayloadRecords(x))}b.callback(p,a)})}_isClosed(){return this.state===_e.closed}_isJoined(){return this.state===_e.joined}_isJoining(){return this.state===_e.joining}_isLeaving(){return this.state===_e.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,s,a){const n=t.toLocaleLowerCase(),o={type:n,filter:s,callback:a};return this.bindings[n]?this.bindings[n].push(o):this.bindings[n]=[o],this}_off(t,s){const a=t.toLocaleLowerCase();return this.bindings[a]&&(this.bindings[a]=this.bindings[a].filter(n=>{var o;return!(((o=n.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===a&&jd.isEqual(n.filter,s))})),this}static isEqual(t,s){if(Object.keys(t).length!==Object.keys(s).length)return!1;for(const a in t)if(t[a]!==s[a])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(yt.close,{},t)}_onError(t){this._on(yt.error,{},s=>t(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=_e.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const s={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(s.new=th(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(s.old=th(t.columns,t.old_record)),s}}const Bi=()=>{},Ln={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},qy=[1e3,2e3,5e3,1e4],Vy=1e4,Hy=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Gy{constructor(t,s){var a;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ec,this.transport=null,this.heartbeatIntervalMs=Ln.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Bi,this.ref=0,this.reconnectTimer=null,this.logger=Bi,this.conn=null,this.sendBuffer=[],this.serializer=new Ly,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=n=>{let o;return n?o=n:typeof fetch>"u"?o=(...i)=>un(async()=>{const{default:l}=await Promise.resolve().then(()=>Xr);return{default:l}},void 0).then(({default:l})=>l(...i)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):o=fetch,(...i)=>o(...i)},!(!((a=s==null?void 0:s.params)===null||a===void 0)&&a.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${t}/${tc.websocket}`,this.httpEndpoint=kp(t),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s==null?void 0:s.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Ty.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const s=t.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Ay}))}disconnect(t,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const a=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(a),this._setConnectionState("disconnected")},t?this.conn.close(t,s??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const s=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const t=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,s,a){this.logger(t,s,a)}connectionState(){switch(this.conn&&this.conn.readyState){case Ca.connecting:return Ls.Connecting;case Ca.open:return Ls.Open;case Ca.closing:return Ls.Closing;default:return Ls.Closed}}isConnected(){return this.connectionState()===Ls.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,s={config:{}}){const a=`realtime:${t}`,n=this.getChannels().find(o=>o.topic===a);if(n)return n;{const o=new jd(`realtime:${t}`,s,this);return this.channels.push(o),o}}push(t){const{topic:s,event:a,payload:n,ref:o}=t,i=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${s} ${a} (${o})`,n),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Oy,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},Ln.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let s=this.channels.find(a=>a.topic===t&&(a._isJoined()||a._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${t}"`),s.unsubscribe())}_remove(t){this.channels=this.channels.filter(s=>s.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply")try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}s.ref&&s.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:a,event:n,payload:o,ref:i}=s,l=i?`(${i})`:"",c=o.status||"";this.log("receive",`${c} ${a} ${n} ${l}`.trim(),o),this.channels.filter(d=>d._isMember(a)).forEach(d=>d._trigger(n,o,i)),this._triggerStateCallbacks("message",s)})}_clearTimer(t){var s;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var s;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(yt.error))}_appendParams(t,s){if(Object.keys(s).length===0)return t;const a=t.match(/\?/)?"&":"?",n=new URLSearchParams(s);return`${t}${a}${n}`}_workerObjectUrl(t){let s;if(t)s=t;else{const a=new Blob([Hy],{type:"application/javascript"});s=URL.createObjectURL(a)}return s}_setConnectionState(t,s=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(t=null){let s;t?s=t:this.accessToken?s=await this.accessToken():s=this.accessTokenValue,this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(a=>{const n={access_token:s,version:Iy};s&&a.updateJoinPayload(n),a.joinedOnce&&a._isJoined()&&a._push(yt.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(s=>{this.log("error",`error setting auth in ${t}`,s)})}_triggerStateCallbacks(t,s){try{this.stateChangeCallbacks[t].forEach(a=>{try{a(s)}catch(n){this.log("error",`error in ${t} callback`,n)}})}catch(a){this.log("error",`error triggering ${t} callbacks`,a)}}_setupReconnectionTimer(){this.reconnectTimer=new _p(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ln.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var s,a,n,o,i,l,c,d,h;if(this.transport=(s=t==null?void 0:t.transport)!==null&&s!==void 0?s:null,this.timeout=(a=t==null?void 0:t.timeout)!==null&&a!==void 0?a:ec,this.heartbeatIntervalMs=(n=t==null?void 0:t.heartbeatIntervalMs)!==null&&n!==void 0?n:Ln.HEARTBEAT_INTERVAL,this.worker=(o=t==null?void 0:t.worker)!==null&&o!==void 0?o:!1,this.accessToken=(i=t==null?void 0:t.accessToken)!==null&&i!==void 0?i:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:Bi,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:m=>qy[m-1]||Vy,this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(m,p)=>p(JSON.stringify(m)),this.decode=(h=t==null?void 0:t.decode)!==null&&h!==void 0?h:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class wd extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Ce(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class Wy extends wd{constructor(t,s,a){super(t),this.name="StorageApiError",this.status=s,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class rc extends wd{constructor(t,s){super(t),this.name="StorageUnknownError",this.originalError=s}}var Ky=function(e,t,s,a){function n(o){return o instanceof s?o:new s(function(i){i(o)})}return new(s||(s=Promise))(function(o,i){function l(h){try{d(a.next(h))}catch(m){i(m)}}function c(h){try{d(a.throw(h))}catch(m){i(m)}}function d(h){h.done?o(h.value):n(h.value).then(l,c)}d((a=a.apply(e,t||[])).next())})};const Sp=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>un(async()=>{const{default:a}=await Promise.resolve().then(()=>Xr);return{default:a}},void 0).then(({default:a})=>a(...s)):t=fetch,(...s)=>t(...s)},Jy=()=>Ky(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield un(()=>Promise.resolve().then(()=>Xr),void 0)).Response:Response}),ac=e=>{if(Array.isArray(e))return e.map(s=>ac(s));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([s,a])=>{const n=s.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[n]=ac(a)}),t},Qy=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var tr=function(e,t,s,a){function n(o){return o instanceof s?o:new s(function(i){i(o)})}return new(s||(s=Promise))(function(o,i){function l(h){try{d(a.next(h))}catch(m){i(m)}}function c(h){try{d(a.throw(h))}catch(m){i(m)}}function d(h){h.done?o(h.value):n(h.value).then(l,c)}d((a=a.apply(e,t||[])).next())})};const qi=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Yy=(e,t,s)=>tr(void 0,void 0,void 0,function*(){const a=yield Jy();e instanceof a&&!(s!=null&&s.noResolveJson)?e.json().then(n=>{const o=e.status||500,i=(n==null?void 0:n.statusCode)||o+"";t(new Wy(qi(n),o,i))}).catch(n=>{t(new rc(qi(n),n))}):t(new rc(qi(e),e))}),Xy=(e,t,s,a)=>{const n={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!a?n:(Qy(a)?(n.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),n.body=JSON.stringify(a)):n.body=a,t!=null&&t.duplex&&(n.duplex=t.duplex),Object.assign(Object.assign({},n),s))};function mn(e,t,s,a,n,o){return tr(this,void 0,void 0,function*(){return new Promise((i,l)=>{e(s,Xy(t,a,n,o)).then(c=>{if(!c.ok)throw c;return a!=null&&a.noResolveJson?c:c.json()}).then(c=>i(c)).catch(c=>Yy(c,l,a))})})}function Ro(e,t,s,a){return tr(this,void 0,void 0,function*(){return mn(e,"GET",t,s,a)})}function Et(e,t,s,a,n){return tr(this,void 0,void 0,function*(){return mn(e,"POST",t,a,n,s)})}function nc(e,t,s,a,n){return tr(this,void 0,void 0,function*(){return mn(e,"PUT",t,a,n,s)})}function Zy(e,t,s,a){return tr(this,void 0,void 0,function*(){return mn(e,"HEAD",t,Object.assign(Object.assign({},s),{noResolveJson:!0}),a)})}function Ep(e,t,s,a,n){return tr(this,void 0,void 0,function*(){return mn(e,"DELETE",t,a,n,s)})}var Fe=function(e,t,s,a){function n(o){return o instanceof s?o:new s(function(i){i(o)})}return new(s||(s=Promise))(function(o,i){function l(h){try{d(a.next(h))}catch(m){i(m)}}function c(h){try{d(a.throw(h))}catch(m){i(m)}}function d(h){h.done?o(h.value):n(h.value).then(l,c)}d((a=a.apply(e,t||[])).next())})};const eb={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ah={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class tb{constructor(t,s={},a,n){this.shouldThrowOnError=!1,this.url=t,this.headers=s,this.bucketId=a,this.fetch=Sp(n)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,s,a,n){return Fe(this,void 0,void 0,function*(){try{let o;const i=Object.assign(Object.assign({},ah),n);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(i.upsert)});const c=i.metadata;typeof Blob<"u"&&a instanceof Blob?(o=new FormData,o.append("cacheControl",i.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",a)):typeof FormData<"u"&&a instanceof FormData?(o=a,o.append("cacheControl",i.cacheControl),c&&o.append("metadata",this.encodeMetadata(c))):(o=a,l["cache-control"]=`max-age=${i.cacheControl}`,l["content-type"]=i.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),n!=null&&n.headers&&(l=Object.assign(Object.assign({},l),n.headers));const d=this._removeEmptyFolders(s),h=this._getFinalPath(d),m=yield(t=="PUT"?nc:Et)(this.fetch,`${this.url}/object/${h}`,o,Object.assign({headers:l},i!=null&&i.duplex?{duplex:i.duplex}:{}));return{data:{path:d,id:m.Id,fullPath:m.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ce(o))return{data:null,error:o};throw o}})}upload(t,s,a){return Fe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,s,a)})}uploadToSignedUrl(t,s,a,n){return Fe(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(t),i=this._getFinalPath(o),l=new URL(this.url+`/object/upload/sign/${i}`);l.searchParams.set("token",s);try{let c;const d=Object.assign({upsert:ah.upsert},n),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&a instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",a)):typeof FormData<"u"&&a instanceof FormData?(c=a,c.append("cacheControl",d.cacheControl)):(c=a,h["cache-control"]=`max-age=${d.cacheControl}`,h["content-type"]=d.contentType);const m=yield nc(this.fetch,l.toString(),c,{headers:h});return{data:{path:o,fullPath:m.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Ce(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,s){return Fe(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t);const n=Object.assign({},this.headers);s!=null&&s.upsert&&(n["x-upsert"]="true");const o=yield Et(this.fetch,`${this.url}/object/upload/sign/${a}`,{},{headers:n}),i=new URL(this.url+o.url),l=i.searchParams.get("token");if(!l)throw new wd("No token returned by API");return{data:{signedUrl:i.toString(),path:t,token:l},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ce(a))return{data:null,error:a};throw a}})}update(t,s,a){return Fe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,s,a)})}move(t,s,a){return Fe(this,void 0,void 0,function*(){try{return{data:yield Et(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:s,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ce(n))return{data:null,error:n};throw n}})}copy(t,s,a){return Fe(this,void 0,void 0,function*(){try{return{data:{path:(yield Et(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:s,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ce(n))return{data:null,error:n};throw n}})}createSignedUrl(t,s,a){return Fe(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t),o=yield Et(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:s},a!=null&&a.transform?{transform:a.transform}:{}),{headers:this.headers});const i=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${i}`)},{data:o,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ce(n))return{data:null,error:n};throw n}})}createSignedUrls(t,s,a){return Fe(this,void 0,void 0,function*(){try{const n=yield Et(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:t},{headers:this.headers}),o=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return{data:n.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${o}`):null})),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ce(n))return{data:null,error:n};throw n}})}download(t,s){return Fe(this,void 0,void 0,function*(){const n=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),i=o?`?${o}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield Ro(this.fetch,`${this.url}/${n}/${l}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ce(l))return{data:null,error:l};throw l}})}info(t){return Fe(this,void 0,void 0,function*(){const s=this._getFinalPath(t);try{const a=yield Ro(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:ac(a),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ce(a))return{data:null,error:a};throw a}})}exists(t){return Fe(this,void 0,void 0,function*(){const s=this._getFinalPath(t);try{return yield Zy(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ce(a)&&a instanceof rc){const n=a.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:a}}throw a}})}getPublicUrl(t,s){const a=this._getFinalPath(t),n=[],o=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";o!==""&&n.push(o);const l=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});c!==""&&n.push(c);let d=n.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${a}${d}`)}}}remove(t){return Fe(this,void 0,void 0,function*(){try{return{data:yield Ep(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ce(s))return{data:null,error:s};throw s}})}list(t,s,a){return Fe(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},eb),s),{prefix:t||""});return{data:yield Et(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},a),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ce(n))return{data:null,error:n};throw n}})}listV2(t,s){return Fe(this,void 0,void 0,function*(){try{const a=Object.assign({},t);return{data:yield Et(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,a,{headers:this.headers},s),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ce(a))return{data:null,error:a};throw a}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const s=[];return t.width&&s.push(`width=${t.width}`),t.height&&s.push(`height=${t.height}`),t.resize&&s.push(`resize=${t.resize}`),t.format&&s.push(`format=${t.format}`),t.quality&&s.push(`quality=${t.quality}`),s.join("&")}}const sb="2.12.1",rb={"X-Client-Info":`storage-js/${sb}`};var ar=function(e,t,s,a){function n(o){return o instanceof s?o:new s(function(i){i(o)})}return new(s||(s=Promise))(function(o,i){function l(h){try{d(a.next(h))}catch(m){i(m)}}function c(h){try{d(a.throw(h))}catch(m){i(m)}}function d(h){h.done?o(h.value):n(h.value).then(l,c)}d((a=a.apply(e,t||[])).next())})};class ab{constructor(t,s={},a,n){this.shouldThrowOnError=!1;const o=new URL(t);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href,this.headers=Object.assign(Object.assign({},rb),s),this.fetch=Sp(a)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return ar(this,void 0,void 0,function*(){try{return{data:yield Ro(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ce(t))return{data:null,error:t};throw t}})}getBucket(t){return ar(this,void 0,void 0,function*(){try{return{data:yield Ro(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ce(s))return{data:null,error:s};throw s}})}createBucket(t,s={public:!1}){return ar(this,void 0,void 0,function*(){try{return{data:yield Et(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ce(a))return{data:null,error:a};throw a}})}updateBucket(t,s){return ar(this,void 0,void 0,function*(){try{return{data:yield nc(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ce(a))return{data:null,error:a};throw a}})}emptyBucket(t){return ar(this,void 0,void 0,function*(){try{return{data:yield Et(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ce(s))return{data:null,error:s};throw s}})}deleteBucket(t){return ar(this,void 0,void 0,function*(){try{return{data:yield Ep(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ce(s))return{data:null,error:s};throw s}})}}class nb extends ab{constructor(t,s={},a,n){super(t,s,a,n)}from(t){return new tb(this.url,this.headers,t,this.fetch)}}const ob="2.57.4";let pa="";typeof Deno<"u"?pa="deno":typeof document<"u"?pa="web":typeof navigator<"u"&&navigator.product==="ReactNative"?pa="react-native":pa="node";const ib={"X-Client-Info":`supabase-js-${pa}/${ob}`},lb={headers:ib},cb={schema:"public"},db={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},ub={};var hb=function(e,t,s,a){function n(o){return o instanceof s?o:new s(function(i){i(o)})}return new(s||(s=Promise))(function(o,i){function l(h){try{d(a.next(h))}catch(m){i(m)}}function c(h){try{d(a.throw(h))}catch(m){i(m)}}function d(h){h.done?o(h.value):n(h.value).then(l,c)}d((a=a.apply(e,t||[])).next())})};const mb=e=>{let t;return e?t=e:typeof fetch>"u"?t=mp:t=fetch,(...s)=>t(...s)},fb=()=>typeof Headers>"u"?fp:Headers,pb=(e,t,s)=>{const a=mb(s),n=fb();return(o,i)=>hb(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let d=new n(i==null?void 0:i.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),a(o,Object.assign(Object.assign({},i),{headers:d}))})};var gb=function(e,t,s,a){function n(o){return o instanceof s?o:new s(function(i){i(o)})}return new(s||(s=Promise))(function(o,i){function l(h){try{d(a.next(h))}catch(m){i(m)}}function c(h){try{d(a.throw(h))}catch(m){i(m)}}function d(h){h.done?o(h.value):n(h.value).then(l,c)}d((a=a.apply(e,t||[])).next())})};function xb(e){return e.endsWith("/")?e:e+"/"}function vb(e,t){var s,a;const{db:n,auth:o,realtime:i,global:l}=e,{db:c,auth:d,realtime:h,global:m}=t,p={db:Object.assign(Object.assign({},c),n),auth:Object.assign(Object.assign({},d),o),realtime:Object.assign(Object.assign({},h),i),storage:{},global:Object.assign(Object.assign(Object.assign({},m),l),{headers:Object.assign(Object.assign({},(s=m==null?void 0:m.headers)!==null&&s!==void 0?s:{}),(a=l==null?void 0:l.headers)!==null&&a!==void 0?a:{})}),accessToken:()=>gb(this,void 0,void 0,function*(){return""})};return e.accessToken?p.accessToken=e.accessToken:delete p.accessToken,p}function yb(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(xb(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Pp="2.71.1",dr=30*1e3,oc=3,Vi=oc*dr,bb="http://localhost:9999",jb="supabase.auth.token",wb={"X-Client-Info":`gotrue-js/${Pp}`},ic="X-Supabase-Api-Version",Tp={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Nb=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,_b=10*60*1e3;class Nd extends Error{constructor(t,s,a){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=a}}function J(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Cb extends Nd{constructor(t,s,a){super(t,s,a),this.name="AuthApiError",this.status=s,this.code=a}}function kb(e){return J(e)&&e.name==="AuthApiError"}class Rp extends Nd{constructor(t,s){super(t),this.name="AuthUnknownError",this.originalError=s}}class Ps extends Nd{constructor(t,s,a,n){super(t,a,n),this.name=s,this.status=a}}class es extends Ps{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Sb(e){return J(e)&&e.name==="AuthSessionMissingError"}class Dn extends Ps{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class $n extends Ps{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Un extends Ps{constructor(t,s=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Eb(e){return J(e)&&e.name==="AuthImplicitGrantRedirectError"}class nh extends Ps{constructor(t,s=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class lc extends Ps{constructor(t,s){super(t,"AuthRetryableFetchError",s,void 0)}}function Hi(e){return J(e)&&e.name==="AuthRetryableFetchError"}class oh extends Ps{constructor(t,s,a){super(t,"AuthWeakPasswordError",s,"weak_password"),this.reasons=a}}class cc extends Ps{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Io="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ih=` 	
\r=`.split(""),Pb=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<ih.length;t+=1)e[ih[t].charCodeAt(0)]=-2;for(let t=0;t<Io.length;t+=1)e[Io[t].charCodeAt(0)]=t;return e})();function lh(e,t,s){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const a=t.queue>>t.queuedBits-6&63;s(Io[a]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const a=t.queue>>t.queuedBits-6&63;s(Io[a]),t.queuedBits-=6}}function Ip(e,t,s){const a=Pb[e];if(a>-1)for(t.queue=t.queue<<6|a,t.queuedBits+=6;t.queuedBits>=8;)s(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function ch(e){const t=[],s=i=>{t.push(String.fromCodePoint(i))},a={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},o=i=>{Ib(i,a,s)};for(let i=0;i<e.length;i+=1)Ip(e.charCodeAt(i),n,o);return t.join("")}function Tb(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Rb(e,t){for(let s=0;s<e.length;s+=1){let a=e.charCodeAt(s);if(a>55295&&a<=56319){const n=(a-55296)*1024&65535;a=(e.charCodeAt(s+1)-56320&65535|n)+65536,s+=1}Tb(a,t)}}function Ib(e,t,s){if(t.utf8seq===0){if(e<=127){s(e);return}for(let a=1;a<6;a+=1)if(!(e>>7-a&1)){t.utf8seq=a;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&s(t.codepoint)}}function Ab(e){const t=[],s={queue:0,queuedBits:0},a=n=>{t.push(n)};for(let n=0;n<e.length;n+=1)Ip(e.charCodeAt(n),s,a);return new Uint8Array(t)}function Ob(e){const t=[];return Rb(e,s=>t.push(s)),new Uint8Array(t)}function Mb(e){const t=[],s={queue:0,queuedBits:0},a=n=>{t.push(n)};return e.forEach(n=>lh(n,s,a)),lh(null,s,a),t.join("")}function Lb(e){return Math.round(Date.now()/1e3)+e}function Db(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const gt=()=>typeof window<"u"&&typeof document<"u",Rs={tested:!1,writable:!1},Ap=()=>{if(!gt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Rs.tested)return Rs.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Rs.tested=!0,Rs.writable=!0}catch{Rs.tested=!0,Rs.writable=!1}return Rs.writable};function $b(e){const t={},s=new URL(e);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((n,o)=>{t[o]=n})}catch{}return s.searchParams.forEach((a,n)=>{t[n]=a}),t}const Op=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>un(async()=>{const{default:a}=await Promise.resolve().then(()=>Xr);return{default:a}},void 0).then(({default:a})=>a(...s)):t=fetch,(...s)=>t(...s)},Ub=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",ur=async(e,t,s)=>{await e.setItem(t,JSON.stringify(s))},Is=async(e,t)=>{const s=await e.getItem(t);if(!s)return null;try{return JSON.parse(s)}catch{return s}},Zt=async(e,t)=>{await e.removeItem(t)};class oi{constructor(){this.promise=new oi.promiseConstructor((t,s)=>{this.resolve=t,this.reject=s})}}oi.promiseConstructor=Promise;function Gi(e){const t=e.split(".");if(t.length!==3)throw new cc("Invalid JWT structure");for(let a=0;a<t.length;a++)if(!Nb.test(t[a]))throw new cc("JWT not in base64url format");return{header:JSON.parse(ch(t[0])),payload:JSON.parse(ch(t[1])),signature:Ab(t[2]),raw:{header:t[0],payload:t[1]}}}async function Fb(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function zb(e,t){return new Promise((a,n)=>{(async()=>{for(let o=0;o<1/0;o++)try{const i=await e(o);if(!t(o,null,i)){a(i);return}}catch(i){if(!t(o,i)){n(i);return}}})()})}function Bb(e){return("0"+e.toString(16)).substr(-2)}function qb(){const t=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=s.length;let n="";for(let o=0;o<56;o++)n+=s.charAt(Math.floor(Math.random()*a));return n}return crypto.getRandomValues(t),Array.from(t,Bb).join("")}async function Vb(e){const s=new TextEncoder().encode(e),a=await crypto.subtle.digest("SHA-256",s),n=new Uint8Array(a);return Array.from(n).map(o=>String.fromCharCode(o)).join("")}async function Hb(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const s=await Vb(e);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function nr(e,t,s=!1){const a=qb();let n=a;s&&(n+="/PASSWORD_RECOVERY"),await ur(e,`${t}-code-verifier`,n);const o=await Hb(a);return[o,a===o?"plain":"s256"]}const Gb=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Wb(e){const t=e.headers.get(ic);if(!t||!t.match(Gb))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Kb(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function Jb(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Qb=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function or(e){if(!Qb.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Wi(){const e={};return new Proxy(e,{get:(t,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const a=s.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function dh(e){return JSON.parse(JSON.stringify(e))}var Yb=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(s[a[n]]=e[a[n]]);return s};const Ms=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Xb=[502,503,504];async function uh(e){var t;if(!Ub(e))throw new lc(Ms(e),0);if(Xb.includes(e.status))throw new lc(Ms(e),e.status);let s;try{s=await e.json()}catch(o){throw new Rp(Ms(o),o)}let a;const n=Wb(e);if(n&&n.getTime()>=Tp["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?a=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(a=s.error_code),a){if(a==="weak_password")throw new oh(Ms(s),e.status,((t=s.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(a==="session_not_found")throw new es}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((o,i)=>o&&typeof i=="string",!0))throw new oh(Ms(s),e.status,s.weak_password.reasons);throw new Cb(Ms(s),e.status||500,a)}const Zb=(e,t,s,a)=>{const n={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),n.body=JSON.stringify(a),Object.assign(Object.assign({},n),s))};async function Q(e,t,s,a){var n;const o=Object.assign({},a==null?void 0:a.headers);o[ic]||(o[ic]=Tp["2024-01-01"].name),a!=null&&a.jwt&&(o.Authorization=`Bearer ${a.jwt}`);const i=(n=a==null?void 0:a.query)!==null&&n!==void 0?n:{};a!=null&&a.redirectTo&&(i.redirect_to=a.redirectTo);const l=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",c=await ej(e,t,s+l,{headers:o,noResolveJson:a==null?void 0:a.noResolveJson},{},a==null?void 0:a.body);return a!=null&&a.xform?a==null?void 0:a.xform(c):{data:Object.assign({},c),error:null}}async function ej(e,t,s,a,n,o){const i=Zb(t,a,n,o);let l;try{l=await e(s,Object.assign({},i))}catch(c){throw console.error(c),new lc(Ms(c),0)}if(l.ok||await uh(l),a!=null&&a.noResolveJson)return l;try{return await l.json()}catch(c){await uh(c)}}function Dt(e){var t;let s=null;aj(e)&&(s=Object.assign({},e),e.expires_at||(s.expires_at=Lb(e.expires_in)));const a=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:s,user:a},error:null}}function hh(e){const t=Dt(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0)&&(t.data.weak_password=e.weak_password),t}function os(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function tj(e){return{data:e,error:null}}function sj(e){const{action_link:t,email_otp:s,hashed_token:a,redirect_to:n,verification_type:o}=e,i=Yb(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:s,hashed_token:a,redirect_to:n,verification_type:o},c=Object.assign({},i);return{data:{properties:l,user:c},error:null}}function rj(e){return e}function aj(e){return e.access_token&&e.refresh_token&&e.expires_in}const Ki=["global","local","others"];var nj=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(s[a[n]]=e[a[n]]);return s};class oj{constructor({url:t="",headers:s={},fetch:a}){this.url=t,this.headers=s,this.fetch=Op(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,s=Ki[0]){if(Ki.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ki.join(", ")}`);try{return await Q(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(a){if(J(a))return{data:null,error:a};throw a}}async inviteUserByEmail(t,s={}){try{return await Q(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:os})}catch(a){if(J(a))return{data:{user:null},error:a};throw a}}async generateLink(t){try{const{options:s}=t,a=nj(t,["options"]),n=Object.assign(Object.assign({},a),s);return"newEmail"in a&&(n.new_email=a==null?void 0:a.newEmail,delete n.newEmail),await Q(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:sj,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(J(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(t){try{return await Q(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:os})}catch(s){if(J(s))return{data:{user:null},error:s};throw s}}async listUsers(t){var s,a,n,o,i,l,c;try{const d={nextPage:null,lastPage:0,total:0},h=await Q(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(s=t==null?void 0:t.page)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:"",per_page:(o=(n=t==null?void 0:t.perPage)===null||n===void 0?void 0:n.toString())!==null&&o!==void 0?o:""},xform:rj});if(h.error)throw h.error;const m=await h.json(),p=(i=h.headers.get("x-total-count"))!==null&&i!==void 0?i:0,b=(c=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return b.length>0&&(b.forEach(x=>{const j=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(x.split(";")[1].split("=")[1]);d[`${_}Page`]=j}),d.total=parseInt(p)),{data:Object.assign(Object.assign({},m),d),error:null}}catch(d){if(J(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){or(t);try{return await Q(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:os})}catch(s){if(J(s))return{data:{user:null},error:s};throw s}}async updateUserById(t,s){or(t);try{return await Q(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:s,headers:this.headers,xform:os})}catch(a){if(J(a))return{data:{user:null},error:a};throw a}}async deleteUser(t,s=!1){or(t);try{return await Q(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:s},xform:os})}catch(a){if(J(a))return{data:{user:null},error:a};throw a}}async _listFactors(t){or(t.userId);try{const{data:s,error:a}=await Q(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:s,error:a}}catch(s){if(J(s))return{data:null,error:s};throw s}}async _deleteFactor(t){or(t.userId),or(t.id);try{return{data:await Q(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(s){if(J(s))return{data:null,error:s};throw s}}}function mh(e={}){return{getItem:t=>e[t]||null,setItem:(t,s)=>{e[t]=s},removeItem:t=>{delete e[t]}}}function ij(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const ir={debug:!!(globalThis&&Ap()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Mp extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class lj extends Mp{}async function cj(e,t,s){ir.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const a=new globalThis.AbortController;return t>0&&setTimeout(()=>{a.abort(),ir.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async n=>{if(n){ir.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,n.name);try{return await s()}finally{ir.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,n.name)}}else{if(t===0)throw ir.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new lj(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(ir.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}ij();const dj={url:bb,storageKey:jb,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:wb,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function fh(e,t,s){return await s()}const lr={};class Ya{constructor(t){var s,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ya.nextInstanceID,Ya.nextInstanceID+=1,this.instanceID>0&&gt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},dj),t);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new oj({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=Op(n.fetch),this.lock=n.lock||fh,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:gt()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=cj:this.lock=fh,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(n.storage?this.storage=n.storage:Ap()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=mh(this.memoryStorage)),n.userStorage&&(this.userStorage=n.userStorage)):(this.memoryStorage={},this.storage=mh(this.memoryStorage)),gt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}get jwks(){var t,s;return(s=(t=lr[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(t){lr[this.storageKey]=Object.assign(Object.assign({},lr[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,s;return(s=(t=lr[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){lr[this.storageKey]=Object.assign(Object.assign({},lr[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Pp}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const s=$b(window.location.href);let a="none";if(this._isImplicitGrantCallback(s)?a="implicit":await this._isPKCECallback(s)&&(a="pkce"),gt()&&this.detectSessionInUrl&&a!=="none"){const{data:n,error:o}=await this._getSessionFromURL(s,a);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),Eb(o)){const c=(t=o.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:i,redirectType:l}=n;return this._debug("#_initialize()","detected session in URL",i,"redirect type",l),await this._saveSession(i),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return J(s)?{error:s}:{error:new Rp("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var s,a,n;try{const o=await Q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.captchaToken}},xform:Dt}),{data:i,error:l}=o;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(o){if(J(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(t){var s,a,n;try{let o;if("email"in t){const{email:h,password:m,options:p}=t;let b=null,x=null;this.flowType==="pkce"&&([b,x]=await nr(this.storage,this.storageKey)),o=await Q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:h,password:m,data:(s=p==null?void 0:p.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:b,code_challenge_method:x},xform:Dt})}else if("phone"in t){const{phone:h,password:m,options:p}=t;o=await Q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:m,data:(a=p==null?void 0:p.data)!==null&&a!==void 0?a:{},channel:(n=p==null?void 0:p.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:Dt})}else throw new $n("You must provide either an email or phone number and a password");const{data:i,error:l}=o;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(o){if(J(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(t){try{let s;if("email"in t){const{email:o,password:i,options:l}=t;s=await Q(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:hh})}else if("phone"in t){const{phone:o,password:i,options:l}=t;s=await Q(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:hh})}else throw new $n("You must provide either an email or phone number and a password");const{data:a,error:n}=s;return n?{data:{user:null,session:null},error:n}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new Dn}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:n})}catch(s){if(J(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(t){var s,a,n,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(n=t.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:s}=t;if(s==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}async signInWithSolana(t){var s,a,n,o,i,l,c,d,h,m,p,b;let x,j;if("message"in t)x=t.message,j=t.signature;else{const{chain:_,wallet:v,statement:g,options:u}=t;let f;if(gt())if(typeof v=="object")f=v;else{const y=window;if("solana"in y&&typeof y.solana=="object"&&("signIn"in y.solana&&typeof y.solana.signIn=="function"||"signMessage"in y.solana&&typeof y.solana.signMessage=="function"))f=y.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(u!=null&&u.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");f=v}const w=new URL((s=u==null?void 0:u.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in f&&f.signIn){const y=await f.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},u==null?void 0:u.signInWithSolana),{version:"1",domain:w.host,uri:w.href}),g?{statement:g}:null));let C;if(Array.isArray(y)&&y[0]&&typeof y[0]=="object")C=y[0];else if(y&&typeof y=="object"&&"signedMessage"in y&&"signature"in y)C=y;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)x=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),j=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in f)||typeof f.signMessage!="function"||!("publicKey"in f)||typeof f!="object"||!f.publicKey||!("toBase58"in f.publicKey)||typeof f.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${w.host} wants you to sign in with your Solana account:`,f.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${w.href}`,`Issued At: ${(n=(a=u==null?void 0:u.signInWithSolana)===null||a===void 0?void 0:a.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((o=u==null?void 0:u.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${u.signInWithSolana.notBefore}`]:[],...!((i=u==null?void 0:u.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${u.signInWithSolana.expirationTime}`]:[],...!((l=u==null?void 0:u.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${u.signInWithSolana.chainId}`]:[],...!((c=u==null?void 0:u.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${u.signInWithSolana.nonce}`]:[],...!((d=u==null?void 0:u.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${u.signInWithSolana.requestId}`]:[],...!((m=(h=u==null?void 0:u.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||m===void 0)&&m.length?["Resources",...u.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const y=await f.signMessage(new TextEncoder().encode(x),"utf8");if(!y||!(y instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");j=y}}try{const{data:_,error:v}=await Q(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:Mb(j)},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(b=t.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:Dt});if(v)throw v;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new Dn}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:v})}catch(_){if(J(_))return{data:{user:null,session:null},error:_};throw _}}async _exchangeCodeForSession(t){const s=await Is(this.storage,`${this.storageKey}-code-verifier`),[a,n]=(s??"").split("/");try{const{data:o,error:i}=await Q(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:a},xform:Dt});if(await Zt(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Dn}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:n??null}),error:i})}catch(o){if(J(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(t){try{const{options:s,provider:a,token:n,access_token:o,nonce:i}=t,l=await Q(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:n,access_token:o,nonce:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:Dt}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Dn}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(s){if(J(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(t){var s,a,n,o,i;try{if("email"in t){const{email:l,options:c}=t;let d=null,h=null;this.flowType==="pkce"&&([d,h]=await nr(this.storage,this.storageKey));const{error:m}=await Q(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:h},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:m}}if("phone"in t){const{phone:l,options:c}=t,{data:d,error:h}=await Q(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(o=c==null?void 0:c.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(i=c==null?void 0:c.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:h}}throw new $n("You must provide either an email or phone number.")}catch(l){if(J(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var s,a;try{let n,o;"options"in t&&(n=(s=t.options)===null||s===void 0?void 0:s.redirectTo,o=(a=t.options)===null||a===void 0?void 0:a.captchaToken);const{data:i,error:l}=await Q(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:n,xform:Dt});if(l)throw l;if(!i)throw new Error("An error occurred on token verification.");const c=i.session,d=i.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(n){if(J(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(t){var s,a,n;try{let o=null,i=null;return this.flowType==="pkce"&&([o,i]=await nr(this.storage,this.storageKey)),await Q(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(a=(s=t.options)===null||s===void 0?void 0:s.redirectTo)!==null&&a!==void 0?a:void 0}),!((n=t==null?void 0:t.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:i}),headers:this.headers,xform:tj})}catch(o){if(J(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:s},error:a}=t;if(a)throw a;if(!s)throw new es;const{error:n}=await Q(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:n}})}catch(t){if(J(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const s=`${this.url}/resend`;if("email"in t){const{email:a,type:n,options:o}=t,{error:i}=await Q(this.fetch,"POST",s,{headers:this.headers,body:{email:a,type:n,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in t){const{phone:a,type:n,options:o}=t,{data:i,error:l}=await Q(this.fetch,"POST",s,{headers:this.headers,body:{phone:a,type:n,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:l}}throw new $n("You must provide either an email or phone number and a type")}catch(s){if(J(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(t,s){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await a,await s()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=s();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await t(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const s=await Is(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?t=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const a=t.expires_at?t.expires_at*1e3-Date.now()<Vi:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",t.expires_at),!a){if(this.userStorage){const i=await Is(this.userStorage,this.storageKey+"-user");i!=null&&i.user?t.user=i.user:t.user=Wi()}if(this.storage.isServer&&t.user){let i=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,d,h)=>(!i&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,h))})}return{data:{session:t},error:null}}const{session:n,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{session:null},error:o}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Q(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:os}):await this._useSession(async s=>{var a,n,o;const{data:i,error:l}=s;if(l)throw l;return!(!((a=i.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new es}:await Q(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&o!==void 0?o:void 0,xform:os})})}catch(s){if(J(s))return Sb(s)&&(await this._removeSession(),await Zt(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(t,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,s))}async _updateUser(t,s={}){try{return await this._useSession(async a=>{const{data:n,error:o}=a;if(o)throw o;if(!n.session)throw new es;const i=n.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await nr(this.storage,this.storageKey));const{data:d,error:h}=await Q(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:i.access_token,xform:os});if(h)throw h;return i.user=d.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(a){if(J(a))return{data:{user:null},error:a};throw a}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new es;const s=Date.now()/1e3;let a=s,n=!0,o=null;const{payload:i}=Gi(t.access_token);if(i.exp&&(a=i.exp,n=a<=s),n){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};o=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;o={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:a-s,expires_at:a},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(s){if(J(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async s=>{var a;if(!t){const{data:i,error:l}=s;if(l)throw l;t=(a=i.session)!==null&&a!==void 0?a:void 0}if(!(t!=null&&t.refresh_token))throw new es;const{session:n,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{user:null,session:null},error:o}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(J(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(t,s){try{if(!gt())throw new Un("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Un(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new nh("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Un("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new nh("No code detected.");const{data:g,error:u}=await this._exchangeCodeForSession(t.code);if(u)throw u;const f=new URL(window.location.href);return f.searchParams.delete("code"),window.history.replaceState(window.history.state,"",f.toString()),{data:{session:g.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:n,access_token:o,refresh_token:i,expires_in:l,expires_at:c,token_type:d}=t;if(!o||!l||!i||!d)throw new Un("No session defined in URL");const h=Math.round(Date.now()/1e3),m=parseInt(l);let p=h+m;c&&(p=parseInt(c));const b=p-h;b*1e3<=dr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${m}s`);const x=p-m;h-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,p,h):h-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,p,h);const{data:j,error:_}=await this._getUser(o);if(_)throw _;const v={provider_token:a,provider_refresh_token:n,access_token:o,expires_in:m,expires_at:p,refresh_token:i,token_type:d,user:j.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:t.type},error:null}}catch(a){if(J(a))return{data:{session:null,redirectType:null},error:a};throw a}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const s=await Is(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&s)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async s=>{var a;const{data:n,error:o}=s;if(o)return{error:o};const i=(a=n.session)===null||a===void 0?void 0:a.access_token;if(i){const{error:l}=await this.admin.signOut(i,t);if(l&&!(kb(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Zt(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const s=Db(),a={id:s,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,a),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:a}}}async _emitInitialSession(t){return await this._useSession(async s=>{var a,n;try{const{data:{session:o},error:i}=s;if(i)throw i;await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,s={}){let a=null,n=null;this.flowType==="pkce"&&([a,n]=await nr(this.storage,this.storageKey,!0));try{return await Q(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:a,code_challenge_method:n,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(o){if(J(o))return{data:null,error:o};throw o}}async getUserIdentities(){var t;try{const{data:s,error:a}=await this.getUser();if(a)throw a;return{data:{identities:(t=s.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(s){if(J(s))return{data:null,error:s};throw s}}async linkIdentity(t){var s;try{const{data:a,error:n}=await this._useSession(async o=>{var i,l,c,d,h;const{data:m,error:p}=o;if(p)throw p;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(i=t.options)===null||i===void 0?void 0:i.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Q(this.fetch,"GET",b,{headers:this.headers,jwt:(h=(d=m.session)===null||d===void 0?void 0:d.access_token)!==null&&h!==void 0?h:void 0})});if(n)throw n;return gt()&&!(!((s=t.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(a==null?void 0:a.url),{data:{provider:t.provider,url:a==null?void 0:a.url},error:null}}catch(a){if(J(a))return{data:{provider:t.provider,url:null},error:a};throw a}}async unlinkIdentity(t){try{return await this._useSession(async s=>{var a,n;const{data:o,error:i}=s;if(i)throw i;return await Q(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(n=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&n!==void 0?n:void 0})})}catch(s){if(J(s))return{data:null,error:s};throw s}}async _refreshAccessToken(t){const s=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{const a=Date.now();return await zb(async n=>(n>0&&await Fb(200*Math.pow(2,n-1)),this._debug(s,"refreshing attempt",n),await Q(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Dt})),(n,o)=>{const i=200*Math.pow(2,n);return o&&Hi(o)&&Date.now()+i-a<dr})}catch(a){if(this._debug(s,"error",a),J(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(s,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,s){const a=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",s,"url",a),gt()&&!s.skipBrowserRedirect&&window.location.assign(a),{data:{provider:t,url:a},error:null}}async _recoverAndRefresh(){var t,s;const a="#_recoverAndRefresh()";this._debug(a,"begin");try{const n=await Is(this.storage,this.storageKey);if(n&&this.userStorage){let i=await Is(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:n.user},await ur(this.userStorage,this.storageKey+"-user",i)),n.user=(t=i==null?void 0:i.user)!==null&&t!==void 0?t:Wi()}else if(n&&!n.user&&!n.user){const i=await Is(this.storage,this.storageKey+"-user");i&&(i!=null&&i.user)?(n.user=i.user,await Zt(this.storage,this.storageKey+"-user"),await ur(this.storage,this.storageKey,n)):n.user=Wi()}if(this._debug(a,"session from storage",n),!this._isValidSession(n)){this._debug(a,"session is not valid"),n!==null&&await this._removeSession();return}const o=((s=n.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<Vi;if(this._debug(a,`session has${o?"":" not"} expired with margin of ${Vi}s`),o){if(this.autoRefreshToken&&n.refresh_token){const{error:i}=await this._callRefreshToken(n.refresh_token);i&&(console.error(i),Hi(i)||(this._debug(a,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(n.user&&n.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:l}=await this._getUser(n.access_token);!l&&(i!=null&&i.user)?(n.user=i.user,await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)):this._debug(a,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(a,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(a,"error",n),console.error(n);return}finally{this._debug(a,"end")}}async _callRefreshToken(t){var s,a;if(!t)throw new es;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new oi;const{data:o,error:i}=await this._refreshAccessToken(t);if(i)throw i;if(!o.session)throw new es;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const l={session:o.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(o){if(this._debug(n,"error",o),J(o)){const i={session:null,error:o};return Hi(o)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(i),i}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(o),o}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(t,s,a=!0){const n=`#_notifyAllSubscribers(${t})`;this._debug(n,"begin",s,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:t,session:s});const o=[],i=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,s)}catch(c){o.push(c)}});if(await Promise.all(i),o.length>0){for(let l=0;l<o.length;l+=1)console.error(o[l]);throw o[0]}}finally{this._debug(n,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const s=Object.assign({},t),a=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!a&&s.user&&await ur(this.userStorage,this.storageKey+"-user",{user:s.user});const n=Object.assign({},s);delete n.user;const o=dh(n);await ur(this.storage,this.storageKey,o)}else{const n=dh(s);await ur(this.storage,this.storageKey,n)}}async _removeSession(){this._debug("#_removeSession()"),await Zt(this.storage,this.storageKey),await Zt(this.storage,this.storageKey+"-code-verifier"),await Zt(this.storage,this.storageKey+"-user"),this.userStorage&&await Zt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&gt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),dr);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async s=>{const{data:{session:a}}=s;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((a.expires_at*1e3-t)/dr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${dr}ms, refresh threshold is ${oc} ticks`),n<=oc&&await this._callRefreshToken(a.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Mp)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!gt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const s=`#_onVisibilityChanged(${t})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,s,a){const n=[`provider=${encodeURIComponent(s)}`];if(a!=null&&a.redirectTo&&n.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a!=null&&a.scopes&&n.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[o,i]=await nr(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(i)}`});n.push(l.toString())}if(a!=null&&a.queryParams){const o=new URLSearchParams(a.queryParams);n.push(o.toString())}return a!=null&&a.skipBrowserRedirect&&n.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${t}?${n.join("&")}`}async _unenroll(t){try{return await this._useSession(async s=>{var a;const{data:n,error:o}=s;return o?{data:null,error:o}:await Q(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(a=n==null?void 0:n.session)===null||a===void 0?void 0:a.access_token})})}catch(s){if(J(s))return{data:null,error:s};throw s}}async _enroll(t){try{return await this._useSession(async s=>{var a,n;const{data:o,error:i}=s;if(i)return{data:null,error:i};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:d}=await Q(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(a=o==null?void 0:o.session)===null||a===void 0?void 0:a.access_token});return d?{data:null,error:d}:(t.factorType==="totp"&&(!((n=c==null?void 0:c.totp)===null||n===void 0)&&n.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(s){if(J(s))return{data:null,error:s};throw s}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var a;const{data:n,error:o}=s;if(o)return{data:null,error:o};const{data:i,error:l}=await Q(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(a=n==null?void 0:n.session)===null||a===void 0?void 0:a.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:l})})}catch(s){if(J(s))return{data:null,error:s};throw s}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var a;const{data:n,error:o}=s;return o?{data:null,error:o}:await Q(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(a=n==null?void 0:n.session)===null||a===void 0?void 0:a.access_token})})}catch(s){if(J(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(t){const{data:s,error:a}=await this._challenge({factorId:t.factorId});return a?{data:null,error:a}:await this._verify({factorId:t.factorId,challengeId:s.id,code:t.code})}async _listFactors(){const{data:{user:t},error:s}=await this.getUser();if(s)return{data:null,error:s};const a=(t==null?void 0:t.factors)||[],n=a.filter(i=>i.factor_type==="totp"&&i.status==="verified"),o=a.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:a,totp:n,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var s,a;const{data:{session:n},error:o}=t;if(o)return{data:null,error:o};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Gi(n.access_token);let l=null;i.aal&&(l=i.aal);let c=l;((a=(s=n.user.factors)===null||s===void 0?void 0:s.filter(m=>m.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(c="aal2");const h=i.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:h},error:null}}))}async fetchJwk(t,s={keys:[]}){let a=s.keys.find(l=>l.kid===t);if(a)return a;const n=Date.now();if(a=this.jwks.keys.find(l=>l.kid===t),a&&this.jwks_cached_at+_b>n)return a;const{data:o,error:i}=await Q(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=n,a=o.keys.find(l=>l.kid===t),!a)?null:a}async getClaims(t,s={}){try{let a=t;if(!a){const{data:b,error:x}=await this.getSession();if(x||!b.session)return{data:null,error:x};a=b.session.access_token}const{header:n,payload:o,signature:i,raw:{header:l,payload:c}}=Gi(a);s!=null&&s.allowExpired||Kb(o.exp);const d=!n.alg||n.alg.startsWith("HS")||!n.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(n.kid,s!=null&&s.keys?{keys:s.keys}:s==null?void 0:s.jwks);if(!d){const{error:b}=await this.getUser(a);if(b)throw b;return{data:{claims:o,header:n,signature:i},error:null}}const h=Jb(n.alg),m=await crypto.subtle.importKey("jwk",d,h,!0,["verify"]);if(!await crypto.subtle.verify(h,m,i,Ob(`${l}.${c}`)))throw new cc("Invalid JWT signature");return{data:{claims:o,header:n,signature:i},error:null}}catch(a){if(J(a))return{data:null,error:a};throw a}}}Ya.nextInstanceID=0;const uj=Ya;class hj extends uj{constructor(t){super(t)}}var mj=function(e,t,s,a){function n(o){return o instanceof s?o:new s(function(i){i(o)})}return new(s||(s=Promise))(function(o,i){function l(h){try{d(a.next(h))}catch(m){i(m)}}function c(h){try{d(a.throw(h))}catch(m){i(m)}}function d(h){h.done?o(h.value):n(h.value).then(l,c)}d((a=a.apply(e,t||[])).next())})};class fj{constructor(t,s,a){var n,o,i;this.supabaseUrl=t,this.supabaseKey=s;const l=yb(t);if(!s)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,d={db:cb,realtime:ub,auth:Object.assign(Object.assign({},db),{storageKey:c}),global:lb},h=vb(a??{},d);this.storageKey=(n=h.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(o=h.global.headers)!==null&&o!==void 0?o:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(m,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=h.auth)!==null&&i!==void 0?i:{},this.headers,h.global.fetch),this.fetch=pb(s,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new Py(new URL("rest/v1",l).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new nb(this.storageUrl.href,this.headers,this.fetch,a==null?void 0:a.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new iy(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,s={},a={}){return this.rest.rpc(t,s,a)}channel(t,s={config:{}}){return this.realtime.channel(t,s)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,s;return mj(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:a}=yield this.auth.getSession();return(s=(t=a.session)===null||t===void 0?void 0:t.access_token)!==null&&s!==void 0?s:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:s,detectSessionInUrl:a,storage:n,userStorage:o,storageKey:i,flowType:l,lock:c,debug:d},h,m){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new hj({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),h),storageKey:i,autoRefreshToken:t,persistSession:s,detectSessionInUrl:a,storage:n,userStorage:o,flowType:l,lock:c,debug:d,fetch:m,hasCustomAuthorizationHeader:Object.keys(this.headers).some(b=>b.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new Gy(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,a)=>{this._handleTokenChanged(s,"CLIENT",a==null?void 0:a.access_token)})}_handleTokenChanged(t,s,a){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==a?this.changedAccessToken=a:t==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const pj=(e,t,s)=>new fj(e,t,s);function gj(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}gj()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const xj="https://dbwbxzbtydeauczfleqx.supabase.co",vj="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRid2J4emJ0eWRlYXVjemZsZXF4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTcyODgxMDcsImV4cCI6MjA3Mjg2NDEwN30.t-SDdi41bhb8piYz9GyyEJWGE3H_BdTtAC8VZgxhW1E",ne=pj(xj,vj,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),_d=()=>{const[e,t]=N.useState([]);return{toast:a=>{const n=Math.random().toString(36).substr(2,9),o={...a,id:n};t(i=>[...i,o]),alert(`${a.title}: ${a.description}`),setTimeout(()=>{t(i=>i.filter(l=>l.id!==n))},5e3)},toasts:e}},Lp=N.createContext({user:null,profile:null,loading:!0,signOut:async()=>{},signUp:async()=>{},signIn:async()=>{},resetPassword:async()=>{},updateProfile:async()=>{},checkSubscription:async()=>{},updatePerfil:async()=>{},upgradeUser:async()=>{},perfilConfeitaria:null});function yj({children:e}){const[t,s]=N.useState(null),[a,n]=N.useState(null),[o,i]=N.useState(!0),l=Ct(),{toast:c}=_d(),d=async u=>{try{const f=[{nome:"Bolos",cor_hex:"#FF6B6B",icone:"",ordem:1},{nome:"Doces",cor_hex:"#4ECDC4",icone:"",ordem:2},{nome:"Salgados",cor_hex:"#45B7D1",icone:"",ordem:3},{nome:"Tortas",cor_hex:"#96CEB4",icone:"",ordem:4},{nome:"Sobremesas",cor_hex:"#FFEAA7",icone:"",ordem:5}];for(const w of f)await ne.from("categorias").insert({user_id:u,...w});await ne.from("configuracoes_usuario").insert({user_id:u,moeda:"BRL",fuso_horario:"America/Sao_Paulo",margem_padrao:30,custo_hora_trabalho:25,notificacoes_email:!0,notificacoes_whatsapp:!0})}catch(f){console.error("Erro ao inicializar dados do usurio:",f)}},h=async u=>{try{const{data:f,error:w}=await ne.from("profiles").select("*").eq("id",u).single();if(w&&w.code!=="PGRST116")throw w;if(f){const y={id:f.id,nome:f.nome,email:f.email,plano:f.plano||"free",nome_negocio:f.nome_negocio||void 0,whatsapp:f.whatsapp||void 0,instagram:f.instagram||void 0,endereco:f.endereco||void 0,cidade:f.cidade||void 0,estado:f.estado||void 0,bio:f.bio||void 0,foto_perfil:f.foto_perfil||void 0};n(y)}}catch(f){console.error("Erro ao buscar perfil:",f)}};N.useEffect(()=>{ne.auth.getSession().then(({data:{session:f}})=>{s((f==null?void 0:f.user)??null),f!=null&&f.user&&h(f.user.id),i(!1)});const{data:{subscription:u}}=ne.auth.onAuthStateChange((f,w)=>{s((w==null?void 0:w.user)??null),i(!1),w!=null&&w.user?setTimeout(()=>{h(w.user.id),f==="SIGNED_IN"&&(g(),l("/dashboard",{replace:!0}))},0):n(null)});return()=>u.unsubscribe()},[]);const m=async(u,f,w,y)=>{try{i(!0);const{data:C,error:S}=await ne.auth.signUp({email:u,password:f,options:{emailRedirectTo:`${window.location.origin}/dashboard`,data:{nome:w,nome_negocio:y}}});if(S)throw S;if(C.user){const{error:I}=await ne.from("profiles").insert({id:C.user.id,email:u,nome:w,nome_negocio:y||"",plano:"free",password:"supabase_managed"});if(I)throw I;await d(C.user.id),c({title:"Conta criada com sucesso!",description:"Bem-vinda ao DoceCalc. Sua conta j est pronta para uso."})}}catch(C){throw c({title:"Erro ao criar conta",description:C.message,variant:"destructive"}),i(!1),C}},p=async(u,f)=>{try{i(!0);const{error:w}=await ne.auth.signInWithPassword({email:u,password:f});if(w)throw w;c({title:"Login realizado!",description:"Bem-vindo de volta!"});return}catch(w){throw c({title:"Erro no login",description:w.message,variant:"destructive"}),i(!1),w}},b=async()=>{try{const{error:u}=await ne.auth.signOut();if(u)throw u;s(null),n(null),l("/"),c({title:"Logout realizado",description:"At logo!"})}catch(u){c({title:"Erro no logout",description:u.message,variant:"destructive"})}},x=async u=>{try{const{error:f}=await ne.auth.resetPasswordForEmail(u,{redirectTo:`${window.location.origin}/reset-password`});if(f)throw f;c({title:"Email enviado!",description:"Verifique sua caixa de entrada para redefinir a senha."})}catch(f){throw c({title:"Erro ao enviar email",description:f.message,variant:"destructive"}),f}},j=async u=>{if(!(!t||!a))try{const{error:f}=await ne.from("profiles").update(u).eq("id",t.id);if(f)throw f;n({...a,...u}),c({title:"Perfil atualizado!",description:"Suas informaes foram salvas."})}catch(f){throw c({title:"Erro ao atualizar perfil",description:f.message,variant:"destructive"}),f}},_=j,v=async u=>{await j({plano:u})},g=async()=>{if(t)try{const{data:u,error:f}=await ne.functions.invoke("check-subscription",{body:{userEmail:t.email}});if(f)throw f;u!=null&&u.subscribed&&(a==null?void 0:a.plano)!=="professional"?await j({plano:"professional"}):!(u!=null&&u.subscribed)&&(a==null?void 0:a.plano)!=="free"&&await j({plano:"free"})}catch(u){console.error("Erro ao verificar assinatura:",u)}};return r.jsx(Lp.Provider,{value:{user:t,profile:a,loading:o,signOut:b,signUp:m,signIn:p,resetPassword:x,updateProfile:j,checkSubscription:g,updatePerfil:_,upgradeUser:v,perfilConfeitaria:a},children:e})}const we=()=>{const e=N.useContext(Lp);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e};var bj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const jj=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),O=(e,t)=>{const s=N.forwardRef(({color:a="currentColor",size:n=24,strokeWidth:o=2,absoluteStrokeWidth:i,children:l,...c},d)=>N.createElement("svg",{ref:d,...bj,width:n,height:n,stroke:a,strokeWidth:i?Number(o)*24/Number(n):o,className:`lucide lucide-${jj(e)}`,...c},[...t.map(([h,m])=>N.createElement(h,m)),...(Array.isArray(l)?l:[l])||[]]));return s.displayName=`${e}`,s},Dp=O("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),eo=O("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),ye=O("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),dc=O("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),wj=O("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),ii=O("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Cd=O("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),to=O("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),Nj=O("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]),Ji=O("Cake",[["path",{d:"M20 21v-8a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v8",key:"1w3rig"}],["path",{d:"M4 16s.5-1 2-1 2.5 2 4 2 2.5-2 4-2 2.5 2 4 2 2-1 2-1",key:"n2jgmb"}],["path",{d:"M2 21h20",key:"1nyx9w"}],["path",{d:"M7 8v3",key:"1qtyvj"}],["path",{d:"M12 8v3",key:"hwp4zt"}],["path",{d:"M17 8v3",key:"1i6e5u"}],["path",{d:"M7 4h0.01",key:"hsw7lv"}],["path",{d:"M12 4h0.01",key:"1e3d8f"}],["path",{d:"M17 4h0.01",key:"p7cxgy"}]]),Ot=O("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]),$p=O("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Xa=O("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),_j=O("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),ve=O("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Bs=O("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Cj=O("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),kj=O("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),ea=O("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Sj=O("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),fn=O("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),ft=O("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]),Za=O("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),ta=O("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Up=O("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),ph=O("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),uc=O("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Rt=O("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),Ej=O("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),Pj=O("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),Tj=O("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),Rj=O("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),Ij=O("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]),Fp=O("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),zp=O("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),en=O("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]),so=O("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),Aj=O("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Ao=O("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),Oj=O("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),Mj=O("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),_s=O("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),Oo=O("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),Bp=O("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),li=O("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),qp=O("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),Tr=O("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),Vp=O("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),Hp=O("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]),Gp=O("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),_t=O("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),qs=O("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]),ro=O("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Lj=O("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]),Wp=O("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Dj=O("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]),Kt=O("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Ea=O("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),$j=O("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Kp=O("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),hc=O("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),tn=O("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),mc=O("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),Jp=O("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),Mt=O("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),Mo=O("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]),gh=O("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),Uj=O("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),fc=O("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]),xh=O("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]),Js=O("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),sr=O("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Fj=O("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]),pc=O("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),bs=O("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Qs=O("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Jt=O("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),zr=O("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function me({children:e,requiresPro:t=!1}){const{user:s,profile:a,loading:n}=we(),o=er();return n?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:r.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[r.jsx(zp,{className:"h-8 w-8 animate-spin text-primary"}),r.jsx("p",{className:"text-muted-foreground",children:"Carregando..."})]})}):s?t&&(a==null?void 0:a.plano)!=="professional"?r.jsx(Ku,{to:"/upgrade",replace:!0}):r.jsx(r.Fragment,{children:e}):r.jsx(Ku,{to:"/login",state:{from:o},replace:!0})}function zj(){const[e,t]=N.useState(""),[s,a]=N.useState(""),[n,o]=N.useState(!1),[i,l]=N.useState(!1),[c,d]=N.useState(!1),[h,m]=N.useState(!1),p=Ct(),{toast:b}=_d();N.useEffect(()=>{ne.auth.getSession().then(({data:{session:j}})=>{j&&j.user.aud==="authenticated"?m(!0):p("/login")})},[p]);const x=async j=>{if(j.preventDefault(),e!==s){b({title:"Erro",description:"As senhas no coincidem.",variant:"destructive"});return}if(e.length<6){b({title:"Erro",description:"A senha deve ter pelo menos 6 caracteres.",variant:"destructive"});return}d(!0);try{const{error:_}=await ne.auth.updateUser({password:e});if(_)throw _;b({title:"Senha alterada!",description:"Sua senha foi alterada com sucesso."}),p("/dashboard")}catch(_){b({title:"Erro ao alterar senha",description:_.message,variant:"destructive"})}finally{d(!1)}};return h?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-pink-100 via-purple-100 to-indigo-100 flex items-center justify-center p-4",children:r.jsxs("div",{className:"max-w-md w-full bg-white/90 backdrop-blur-sm rounded-2xl shadow-2xl p-8 relative",children:[r.jsx(q,{to:"/login",className:"absolute top-6 left-6 text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx(ye,{className:"h-5 w-5"})}),r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"flex justify-center mb-4",children:r.jsx("div",{className:"p-3 bg-gradient-to-r from-pink-500 to-purple-600 rounded-full",children:r.jsx(so,{className:"h-8 w-8 text-white"})})}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Nova Senha"}),r.jsx("p",{className:"text-gray-600",children:"Digite sua nova senha"})]}),r.jsxs("form",{onSubmit:x,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nova Senha"}),r.jsxs("div",{className:"relative",children:[r.jsx(so,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),r.jsx("input",{type:n?"text":"password",value:e,onChange:j=>t(j.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-transparent",placeholder:"Digite sua nova senha",required:!0,minLength:6}),r.jsx("button",{type:"button",onClick:()=>o(!n),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:n?r.jsx(ph,{className:"h-5 w-5"}):r.jsx(uc,{className:"h-5 w-5"})})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirmar Nova Senha"}),r.jsxs("div",{className:"relative",children:[r.jsx(so,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),r.jsx("input",{type:i?"text":"password",value:s,onChange:j=>a(j.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-transparent",placeholder:"Confirme sua nova senha",required:!0,minLength:6}),r.jsx("button",{type:"button",onClick:()=>l(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:i?r.jsx(ph,{className:"h-5 w-5"}):r.jsx(uc,{className:"h-5 w-5"})})]})]}),r.jsx("button",{type:"submit",disabled:c,className:"w-full bg-gradient-to-r from-pink-500 to-purple-600 text-white py-3 px-4 rounded-lg hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-pink-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed font-semibold transition-all duration-200",children:c?r.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[r.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),r.jsx("span",{children:"Alterando..."})]}):"Alterar Senha"})]})]})}):null}const Br=[{id:"free",nome:"Gratuito",preco_mensal:0,limite_receitas:5,limite_orcamentos:3,descricao:"Ideal para comear",funcionalidades:["At 5 receitas cadastradas","Calculadora bsica de custos","3 oramentos por ms","Biblioteca com 20 ingredientes padro","Acesso web bsico"]},{id:"professional",nome:"Profissional",preco_mensal:39.9,limite_receitas:null,limite_orcamentos:null,descricao:"Acesso completo a todas as funcionalidades",popular:!0,funcionalidades:["Receitas ilimitadas","Oramentos ilimitados","Gesto completa de ingredientes","Gesto completa de clientes","Controle completo de pedidos","Relatrios completos","Backup automtico","Catlogo pblico ilimitado","Comunidade completa","Todas as ferramentas","Suporte prioritrio"]}];function Bj(){var j;const[e,t]=N.useState(""),[s,a]=N.useState(!1),[n,o]=N.useState(!1),[i,l]=N.useState([{nome:"Leite condensado",quantidade:1,preco:3.95},{nome:"Chocolate p",quantidade:50,preco:.025},{nome:"Manteiga",quantidade:15,preco:.018}]),[c,d]=N.useState(60),[h,m]=N.useState(2.4),[p,b]=N.useState(12.5),x=[{nome:"Maria Silva",confeitaria:"Doces da Maria",avatar:"",texto:"O DoceCalc revolucionou meu negcio! Agora sei exatamente quanto cobrar e meu lucro aumentou 40%.",estrelas:5},{nome:"Ana Costa",confeitaria:"Bolos & Cia",avatar:"",texto:"Antes eu chutava os preos. Com o DoceCalc, tenho controle total dos custos e margem de lucro.",estrelas:5},{nome:"Lucia Santos",confeitaria:"Delcias da Lu",avatar:"",texto:"Excelente ferramenta! A gesto de ingredientes me ajuda muito no controle de estoque.",estrelas:5}];return r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 via-purple-50 to-indigo-50",children:[r.jsxs("header",{className:"border-b bg-white/80 backdrop-blur-sm sticky top-0 z-50 animate-fade-in",children:[r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ji,{className:"h-8 w-8 text-pink-500"}),r.jsx("span",{className:"text-2xl font-bold text-gray-900",children:"DoceCalc"})]}),r.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[r.jsx("a",{href:"#funcionalidades",className:"text-gray-600 hover:text-pink-500 transition-colors story-link",children:"Funcionalidades"}),r.jsx("a",{href:"#planos",className:"text-gray-600 hover:text-pink-500 transition-colors story-link",children:"Planos"}),r.jsx("a",{href:"#depoimentos",className:"text-gray-600 hover:text-pink-500 transition-colors story-link",children:"Depoimentos"})]}),r.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[r.jsx(q,{to:"/login",className:"text-gray-600 hover:text-gray-900 transition-colors font-medium",children:"Entrar"}),r.jsx(q,{to:"/login",className:"bg-gradient-to-r from-pink-500 to-purple-600 text-white px-6 py-2 rounded-lg hover:shadow-lg hover-scale transition-all duration-200 font-medium",children:"Comear Grtis"})]}),r.jsx("button",{onClick:()=>o(!n),className:"md:hidden text-gray-600 hover:text-gray-900 transition-colors",children:n?r.jsx(Jt,{className:"h-6 w-6"}):r.jsx(Mj,{className:"h-6 w-6"})})]}),n&&r.jsx("div",{className:"md:hidden absolute top-16 left-0 right-0 bg-white/95 backdrop-blur-sm border-b shadow-lg animate-slide-in-right",children:r.jsxs("div",{className:"px-4 py-4 space-y-4",children:[r.jsx("a",{href:"#funcionalidades",className:"block text-gray-600 hover:text-pink-500 transition-colors py-2",onClick:()=>o(!1),children:"Funcionalidades"}),r.jsx("a",{href:"#planos",className:"block text-gray-600 hover:text-pink-500 transition-colors py-2",onClick:()=>o(!1),children:"Planos"}),r.jsx("a",{href:"#depoimentos",className:"block text-gray-600 hover:text-pink-500 transition-colors py-2",onClick:()=>o(!1),children:"Depoimentos"}),r.jsxs("div",{className:"border-t pt-4 space-y-2",children:[r.jsx(q,{to:"/login",className:"block text-center text-gray-600 hover:text-gray-900 transition-colors font-medium py-2",onClick:()=>o(!1),children:"Entrar"}),r.jsx(q,{to:"/login",className:"block text-center bg-gradient-to-r from-pink-500 to-purple-600 text-white px-6 py-2 rounded-lg hover:shadow-lg transition-all duration-200 font-medium",onClick:()=>o(!1),children:"Comear Grtis"})]})]})})]}),r.jsx("section",{className:"py-12 sm:py-16 lg:py-20 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"container mx-auto text-center max-w-4xl animate-fade-in",children:[r.jsx("div",{className:"mb-4 inline-flex items-center px-4 py-2 bg-pink-100 text-pink-700 rounded-full text-sm font-medium animate-bounce-in",children:"+500k Confeiteiras no Brasil "}),r.jsxs("h1",{className:"text-3xl sm:text-4xl lg:text-6xl font-bold text-gray-900 mb-6 leading-tight",children:["Pare de vender no",r.jsx("span",{className:"text-transparent bg-gradient-to-r from-pink-500 to-purple-600 bg-clip-text",children:" prejuzo!"})]}),r.jsxs("p",{className:"text-lg sm:text-xl text-gray-600 mb-8 max-w-2xl mx-auto leading-relaxed",children:["A calculadora completa para confeiteiras que querem ter uma confeitaria",r.jsx("strong",{className:"text-pink-600",children:" realmente lucrativa"}),". Calcule preos corretos e venda com confiana!"]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center mb-12",children:[r.jsxs(q,{to:"/login",className:"w-full sm:w-auto bg-gradient-to-r from-pink-500 to-purple-600 text-white px-8 py-4 rounded-lg text-lg font-semibold hover:shadow-lg hover-scale transition-all duration-200 flex items-center justify-center space-x-2",children:[r.jsx("span",{children:"Comear Grtis Agora"}),r.jsx(dc,{className:"h-5 w-5"})]}),r.jsxs("button",{onClick:()=>a(!s),className:"w-full sm:w-auto border-2 border-gray-300 text-gray-700 px-8 py-4 rounded-lg text-lg font-semibold hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 flex items-center justify-center space-x-2",children:[r.jsx(Gp,{className:"h-5 w-5"}),r.jsx("span",{children:"Ver Demonstrao"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6 sm:gap-8 max-w-2xl mx-auto",children:[r.jsxs("div",{className:"text-center hover-lift p-4 rounded-lg",children:[r.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-pink-600",children:"8k+"}),r.jsx("div",{className:"text-sm sm:text-base text-gray-600",children:"Buscas mensais"})]}),r.jsxs("div",{className:"text-center hover-lift p-4 rounded-lg",children:[r.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-pink-600",children:"500k+"}),r.jsx("div",{className:"text-sm sm:text-base text-gray-600",children:"Confeiteiras BR"})]}),r.jsxs("div",{className:"text-center hover-lift p-4 rounded-lg",children:[r.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-pink-600",children:"R$ 39,90"}),r.jsx("div",{className:"text-sm sm:text-base text-gray-600",children:"Por ms apenas"})]})]}),s&&r.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 sm:p-8 max-w-4xl mx-auto mt-12 animate-scale-in",children:[r.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-6",children:" Exemplo Prtico: Brigadeiro"}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 text-left bg-gradient-to-r from-pink-500 to-purple-600 text-white p-6 rounded-lg",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("h4",{className:"font-semibold mb-2 text-lg",children:" Ingredientes:"}),r.jsxs("ul",{className:"text-sm space-y-1",children:[r.jsx("li",{children:" Leite condensado: R$ 3,95"}),r.jsx("li",{children:" Chocolate p: R$ 1,25"}),r.jsx("li",{children:" Manteiga: R$ 0,27"}),r.jsx("li",{children:" Granulado: R$ 2,00"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("h4",{className:"font-semibold mb-2 text-lg",children:" Clculo Automtico:"}),r.jsxs("ul",{className:"text-sm space-y-1",children:[r.jsx("li",{children:" Custo ingredientes: R$ 7,47"}),r.jsx("li",{children:" Mo de obra (30min): R$ 12,50"}),r.jsx("li",{children:" Custos fixos: R$ 2,40"}),r.jsx("li",{children:" Margem 60%: R$ 13,42"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("h4",{className:"font-semibold mb-2 text-lg",children:" Resultado:"}),r.jsxs("ul",{className:"text-sm space-y-1",children:[r.jsxs("li",{children:[" ",r.jsx("strong",{children:"Custo total: R$ 22,37"})]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"Preo final: R$ 35,79"})]}),r.jsxs("li",{children:[" ",r.jsx("strong",{children:"Por unidade: R$ 1,20"})]}),r.jsx("li",{children:"  Lucro real: R$ 13,42"})]})]})]}),r.jsx("div",{className:"mt-6",children:r.jsx("div",{className:"inline-flex items-center px-4 py-2 bg-green-100 text-green-700 rounded-full text-sm font-medium",children:" Antes voc cobrava R$ 1,00 e tinha prejuzo. Agora R$ 1,20 com 60% de lucro!"})})]})]})}),r.jsx("section",{className:"py-12 sm:py-16 lg:py-20 bg-white/70",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"text-center mb-12 sm:mb-16 animate-fade-in",children:[r.jsx("h2",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-900 mb-4",children:"Voc j passou por isso? "}),r.jsx("p",{className:"text-lg sm:text-xl text-gray-600 max-w-2xl mx-auto",children:"A maioria das confeiteiras comete estes erros que quebram o negcio"})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 sm:gap-8 max-w-4xl mx-auto",children:[r.jsxs("div",{className:"border-2 border-red-200 bg-red-50/50 rounded-lg p-6 hover-lift animate-fade-in",children:[r.jsxs("div",{className:"flex items-center text-red-700 mb-4",children:[r.jsx(Za,{className:"h-6 w-6 mr-2 flex-shrink-0"}),r.jsx("h3",{className:"text-lg sm:text-xl font-bold",children:'Preo no "achmetro"'})]}),r.jsx("p",{className:"text-red-600 text-sm sm:text-base",children:'"Cobro R$ 3,00 o brigadeiro porque a concorrncia cobra isso..." Resultado: prejuzo mascarado que s aparece no final do ms.'})]}),r.jsxs("div",{className:"border-2 border-red-200 bg-red-50/50 rounded-lg p-6 hover-lift animate-fade-in",children:[r.jsxs("div",{className:"flex items-center text-red-700 mb-4",children:[r.jsx(ea,{className:"h-6 w-6 mr-2 flex-shrink-0"}),r.jsx("h3",{className:"text-lg sm:text-xl font-bold",children:"Esquece a mo de obra"})]}),r.jsx("p",{className:"text-red-600 text-sm sm:text-base",children:'"S conto o ingrediente, meu trabalho  de graa!" Seu tempo vale dinheiro e precisa estar no preo.'})]}),r.jsxs("div",{className:"border-2 border-red-200 bg-red-50/50 rounded-lg p-6 hover-lift animate-fade-in",children:[r.jsxs("div",{className:"flex items-center text-red-700 mb-4",children:[r.jsx(sr,{className:"h-6 w-6 mr-2 flex-shrink-0"}),r.jsx("h3",{className:"text-lg sm:text-xl font-bold",children:"Margem de lucro baixa"})]}),r.jsx("p",{className:"text-red-600 text-sm sm:text-base",children:'"20% de lucro est bom..." No! Para crescer o negcio, voc precisa de margens maiores.'})]}),r.jsxs("div",{className:"border-2 border-red-200 bg-red-50/50 rounded-lg p-6 hover-lift animate-fade-in",children:[r.jsxs("div",{className:"flex items-center text-red-700 mb-4",children:[r.jsx(Rt,{className:"h-6 w-6 mr-2 flex-shrink-0"}),r.jsx("h3",{className:"text-lg sm:text-xl font-bold",children:"Oramentos amadores"})]}),r.jsx("p",{className:"text-red-600 text-sm sm:text-base",children:'"Mando por WhatsApp mesmo..." Clientes no levam a srio e voc perde vendas por parecer amadora.'})]})]})]})}),r.jsx("section",{id:"funcionalidades",className:"py-12 sm:py-16 lg:py-20",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"text-center mb-12 sm:mb-16 animate-fade-in",children:[r.jsx("h2",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-900 mb-4",children:"A soluo completa para sua confeitaria "}),r.jsx("p",{className:"text-lg sm:text-xl text-gray-600 max-w-2xl mx-auto",children:"Tudo que voc precisa para calcular preos corretos e ter um negcio lucrativo"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 hover-lift transition-shadow animate-fade-in",children:[r.jsx(Ot,{className:"h-12 w-12 text-pink-500 mb-4"}),r.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 mb-2",children:"Calculadora Inteligente"}),r.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Calcula automaticamente custos de ingredientes, mo de obra, custos fixos e margem de lucro ideal."})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 hover-lift transition-shadow animate-fade-in",children:[r.jsx(Ji,{className:"h-12 w-12 text-pink-500 mb-4"}),r.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 mb-2",children:"Base de Receitas"}),r.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Cadastre suas receitas com ingredientes e quantidades. Templates prontos para comear rpido."})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 hover-lift transition-shadow animate-fade-in",children:[r.jsx(Za,{className:"h-12 w-12 text-pink-500 mb-4"}),r.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 mb-2",children:"Preos Atualizados"}),r.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Base de ingredientes com preos mdios do mercado, atualizada por nossa comunidade."})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 hover-lift transition-shadow animate-fade-in",children:[r.jsx(Hp,{className:"h-12 w-12 text-pink-500 mb-4"}),r.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 mb-2",children:"Relatrios Inteligentes"}),r.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Veja quais produtos do mais lucro, anlise de custos e insights para otimizar seu negcio."})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 hover-lift transition-shadow animate-fade-in",children:[r.jsx(Rt,{className:"h-12 w-12 text-pink-500 mb-4"}),r.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 mb-2",children:"Oramentos Profissionais"}),r.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Gere oramentos em PDF profissionais para impressionar seus clientes e fechar mais vendas."})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 hover-lift transition-shadow animate-fade-in",children:[r.jsx(zr,{className:"h-12 w-12 text-pink-500 mb-4"}),r.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 mb-2",children:"Clculo Instantneo"}),r.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Mude a quantidade e veja o preo atualizar na hora. Perfeito para atender clientes rapidamente."})]})]})]})}),r.jsx("section",{id:"planos",className:"py-12 sm:py-16 lg:py-20 bg-white/70",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"text-center mb-12 sm:mb-16 animate-fade-in",children:[r.jsx("h2",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-900 mb-4",children:"Escolha seu plano "}),r.jsx("p",{className:"text-lg sm:text-xl text-gray-600 max-w-2xl mx-auto",children:"Comece grtis e upgrade quando seu negcio crescer"})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 sm:gap-8 max-w-4xl mx-auto",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 relative hover-lift animate-fade-in",children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-2",children:"Plano Gratuito"}),r.jsx("div",{className:"text-3xl sm:text-4xl font-bold text-pink-500",children:"R$ 0"}),r.jsx("p",{className:"text-gray-600",children:"Para sempre"})]}),r.jsxs("ul",{className:"space-y-3 mb-8",children:[r.jsxs("li",{className:"flex items-center",children:[r.jsx(ve,{className:"h-5 w-5 text-green-500 mr-3 flex-shrink-0"}),r.jsx("span",{className:"text-sm sm:text-base",children:"3 receitas cadastradas"})]}),r.jsxs("li",{className:"flex items-center",children:[r.jsx(ve,{className:"h-5 w-5 text-green-500 mr-3 flex-shrink-0"}),r.jsx("span",{className:"text-sm sm:text-base",children:"Calculadora bsica"})]}),r.jsxs("li",{className:"flex items-center",children:[r.jsx(ve,{className:"h-5 w-5 text-green-500 mr-3 flex-shrink-0"}),r.jsx("span",{className:"text-sm sm:text-base",children:"Base de ingredientes"})]}),r.jsxs("li",{className:"flex items-center",children:[r.jsx(ve,{className:"h-5 w-5 text-green-500 mr-3 flex-shrink-0"}),r.jsx("span",{className:"text-sm sm:text-base",children:"Suporte por email"})]})]}),r.jsx(q,{to:"/login",className:"w-full py-3 px-4 rounded-lg font-medium transition-colors text-center block bg-gray-100 text-gray-700 hover:bg-gray-200",children:"Comear Grtis"})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 relative border-2 border-pink-500 hover-lift animate-fade-in",children:[r.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:r.jsx("div",{className:"bg-pink-500 text-white px-4 py-1 rounded-full text-sm font-medium",children:"Mais Popular "})}),r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-2",children:"Plano Profissional"}),r.jsx("div",{className:"text-3xl sm:text-4xl font-bold text-pink-500",children:"R$ 39,90"}),r.jsx("p",{className:"text-gray-600",children:"Por ms"})]}),r.jsx("ul",{className:"space-y-3 mb-8",children:(j=Br.find(_=>_.id==="professional"))==null?void 0:j.funcionalidades.slice(0,8).map((_,v)=>r.jsxs("li",{className:"flex items-center",children:[r.jsx(ve,{className:"h-5 w-5 text-green-500 mr-3 flex-shrink-0"}),r.jsx("span",{className:"text-sm sm:text-base text-gray-700",children:_})]},v))}),r.jsx(q,{to:"/login",className:"w-full py-3 px-4 rounded-lg font-medium transition-colors text-center block bg-gradient-to-r from-pink-500 to-purple-600 text-white hover:shadow-lg hover-scale",children:"Comear Agora"})]})]})]})}),r.jsx("section",{id:"depoimentos",className:"py-12 sm:py-16 lg:py-20",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"text-center mb-12 sm:mb-16 animate-fade-in",children:[r.jsx("h2",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-900 mb-4",children:"O que dizem nossas confeiteiras "}),r.jsx("p",{className:"text-lg sm:text-xl text-gray-600 max-w-2xl mx-auto",children:"Histrias reais de transformao e sucesso"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8",children:x.map((_,v)=>r.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 hover-lift animate-fade-in",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx("span",{className:"text-3xl mr-3",children:_.avatar}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-gray-900",children:_.nome}),r.jsx("p",{className:"text-sm text-gray-600",children:_.confeitaria})]})]}),r.jsx("div",{className:"flex mb-3",children:[...Array(_.estrelas)].map((g,u)=>r.jsx(Mt,{className:"h-4 w-4 text-yellow-400 fill-current"},u))}),r.jsxs("p",{className:"text-gray-700 text-sm sm:text-base leading-relaxed italic",children:['"',_.texto,'"']})]},v))})]})}),r.jsx("section",{className:"py-12 sm:py-16 lg:py-20 bg-gradient-to-r from-pink-500 to-purple-600 text-white",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 text-center animate-fade-in",children:[r.jsx("h2",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold mb-4",children:"Pronta para ter uma confeitaria lucrativa? "}),r.jsx("p",{className:"text-lg sm:text-xl mb-8 max-w-2xl mx-auto opacity-90",children:"Junte-se a milhares de confeiteiras que j transformaram seus negcios com o DoceCalc. Comece grtis hoje mesmo!"}),r.jsxs(q,{to:"/login",className:"inline-flex items-center space-x-2 bg-white text-pink-600 px-8 py-4 rounded-lg text-lg font-semibold hover:bg-gray-100 hover-scale transition-all duration-200",children:[r.jsx("span",{children:"Comear Grtis Agora"}),r.jsx(dc,{className:"h-5 w-5"})]}),r.jsx("p",{className:"mt-4 text-sm opacity-75",children:" Sem compromisso  Sem carto de crdito  Resultados em minutos"})]})}),r.jsx("footer",{className:"py-8 bg-gray-900 text-white",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[r.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[r.jsx(Ji,{className:"h-6 w-6 text-pink-500"}),r.jsx("span",{className:"text-xl font-bold",children:"DoceCalc"})]}),r.jsx("p",{className:"text-gray-400 text-sm",children:" 2024 DoceCalc. Todos os direitos reservados. Feito com  para confeiteiras brasileiras."})]})})]})}function qj(){const[e,t]=N.useState(!0),[s,a]=N.useState(""),[n,o]=N.useState(""),[i,l]=N.useState(""),[c,d]=N.useState(""),[h,m]=N.useState(!1),[p,b]=N.useState(!1),[x,j]=N.useState(""),[_,v]=N.useState(""),{signIn:g,signUp:u,resetPassword:f,loading:w}=we(),y=async C=>{C.preventDefault(),v("");try{e?await g(s,n):await u(s,n,i,c)}catch(S){v(S instanceof Error?S.message:"Erro desconhecido")}};return r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-pink-100 via-purple-100 to-indigo-100 flex items-center justify-center p-4",children:[r.jsxs("div",{className:"absolute inset-0 opacity-10",children:[r.jsx("div",{className:"absolute top-10 left-10 text-6xl",children:""}),r.jsx("div",{className:"absolute top-20 right-20 text-4xl",children:""}),r.jsx("div",{className:"absolute bottom-20 left-20 text-5xl",children:""}),r.jsx("div",{className:"absolute bottom-10 right-10 text-3xl",children:""}),r.jsx("div",{className:"absolute top-1/2 left-1/3 text-2xl",children:""})]}),r.jsxs("div",{className:"max-w-md w-full bg-white/90 backdrop-blur-sm rounded-2xl shadow-2xl p-8 animate-scale-in relative z-10",children:[r.jsx(q,{to:"/",className:"absolute top-6 left-6 text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx(ye,{className:"h-5 w-5"})}),r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"flex justify-center mb-4",children:r.jsx("div",{className:"p-3 bg-gradient-to-r from-pink-500 to-purple-600 rounded-full animate-bounce-in",children:r.jsx(Ot,{className:"h-12 w-12 text-white"})})}),r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"DoceCalc"}),r.jsx("p",{className:"text-gray-600",children:"Calculadora de Preos para Confeiteiras"})]}),r.jsxs("form",{onSubmit:y,className:"space-y-6",children:[!e&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"animate-fade-in",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Seu Nome"}),r.jsxs("div",{className:"relative",children:[r.jsx(bs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),r.jsx("input",{type:"text",value:i,onChange:C=>l(C.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all duration-200 bg-white text-gray-900 placeholder:text-gray-500",placeholder:"Seu nome completo",required:!e})]})]}),r.jsxs("div",{className:"animate-fade-in",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome da Confeitaria"}),r.jsxs("div",{className:"relative",children:[r.jsx(Ot,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),r.jsx("input",{type:"text",value:c,onChange:C=>d(C.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all duration-200 bg-white text-gray-900 placeholder:text-gray-500",placeholder:"Nome da sua confeitaria",required:!e})]})]})]}),r.jsxs("div",{className:"animate-fade-in",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),r.jsxs("div",{className:"relative",children:[r.jsx(Ao,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),r.jsx("input",{type:"email",value:s,onChange:C=>a(C.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all duration-200 bg-white text-gray-900 placeholder:text-gray-500",placeholder:"seu@email.com",required:!0})]})]}),r.jsxs("div",{className:"animate-fade-in",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Senha"}),r.jsxs("div",{className:"relative",children:[r.jsx(so,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),r.jsx("input",{type:"password",value:n,onChange:C=>o(C.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all duration-200 bg-white text-gray-900 placeholder:text-gray-500",placeholder:"Sua senha",required:!0})]})]}),_&&r.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg animate-fade-in",children:_}),r.jsx("button",{type:"submit",disabled:w,className:"w-full bg-gradient-to-r from-pink-500 to-purple-600 text-white py-3 px-4 rounded-lg hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-pink-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed font-semibold text-lg transition-all duration-200 hover-scale",children:w?r.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[r.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),r.jsx("span",{children:"Carregando..."})]}):e?"Entrar":"Cadastrar"})]}),r.jsxs("div",{className:"mt-8 text-center",children:[r.jsx("p",{className:"text-gray-600 mb-3",children:e?"No tem uma conta?":"J tem uma conta?"}),r.jsx("button",{onClick:()=>t(!e),className:"text-pink-500 hover:text-pink-600 font-medium transition-colors story-link",children:e?"Criar conta gratuita":"Fazer login"})]}),r.jsx("div",{className:"mt-8 p-4 bg-blue-50/50 rounded-lg border border-blue-200 animate-fade-in",children:r.jsxs("p",{className:"text-sm text-blue-700 text-center",children:[r.jsx("strong",{children:" Demo:"})," Use qualquer email e senha para testar o sistema completo gratuitamente."]})}),r.jsxs("div",{className:"mt-6 grid grid-cols-3 gap-2 text-center",children:[r.jsxs("div",{className:"p-2",children:[r.jsx("div",{className:"text-2xl mb-1",children:""}),r.jsx("p",{className:"text-xs text-gray-600",children:"Calculadora"})]}),r.jsxs("div",{className:"p-2",children:[r.jsx("div",{className:"text-2xl mb-1",children:""}),r.jsx("p",{className:"text-xs text-gray-600",children:"Relatrios"})]}),r.jsxs("div",{className:"p-2",children:[r.jsx("div",{className:"text-2xl mb-1",children:""}),r.jsx("p",{className:"text-xs text-gray-600",children:"Lucro Real"})]})]})]})]})}const kd={gratuito:10,profissional:100,premium:9999},Qp="doce_calc_user_plan";function vh(e="gratuito"){const t=new Date;return t.setMonth(t.getMonth()+1,1),t.setHours(0,0,0,0),{planType:e,creditsIA:kd[e],creditsUsedThisMonth:0,resetDate:t.toISOString()}}function ci(e){try{localStorage.setItem(Qp,JSON.stringify(e))}catch(t){console.error("Erro ao salvar dados do plano:",t)}}function yh(){try{const e=localStorage.getItem(Qp);if(!e)return null;const t=JSON.parse(e);return Vj(t)?Hj(t):t}catch(e){return console.error("Erro ao carregar dados do plano:",e),null}}function Vj(e){const t=new Date,s=new Date(e.resetDate);return t>=s}function Hj(e){const t=new Date;t.setMonth(t.getMonth()+1,1),t.setHours(0,0,0,0);const s={...e,creditsIA:kd[e.planType],creditsUsedThisMonth:0,resetDate:t.toISOString()};return ci(s),s}function Gj(e){if(e.planType==="premium")return e;if(e.creditsIA-e.creditsUsedThisMonth<=0)return null;const s={...e,creditsUsedThisMonth:e.creditsUsedThisMonth+1};return ci(s),s}function Wj(e){return e.planType==="premium"?!0:e.creditsIA-e.creditsUsedThisMonth>0}function Kj(e){return e.planType==="premium"?9999:Math.max(0,e.creditsIA-e.creditsUsedThisMonth)}function Jj(e,t){const s={...e,planType:t,creditsIA:kd[t]};return ci(s),s}function pn(){const[e,t]=N.useState({plan:vh(),loading:!0,error:null});N.useEffect(()=>{(()=>{try{t(d=>({...d,loading:!0,error:null}));const l=yh(),c=l||vh();l||ci(c),t({plan:c,loading:!1,error:null})}catch(l){console.error("Erro ao carregar plano:",l),t(c=>({...c,loading:!1,error:"Erro ao carregar dados do plano"}))}})()},[]);const s=()=>{try{const i=Gj(e.plan);return i?(t(l=>({...l,plan:i})),!0):!1}catch(i){return console.error("Erro ao usar crdito:",i),t(l=>({...l,error:"Erro ao processar crdito"})),!1}},a=()=>Wj(e.plan),n=i=>{try{const l=Jj(e.plan,i);t(c=>({...c,plan:l}))}catch(l){console.error("Erro ao fazer upgrade:",l),t(c=>({...c,error:"Erro ao atualizar plano"}))}},o=()=>{const i=yh();i&&t(l=>({...l,plan:i}))};return{plan:e.plan,remainingCredits:Kj(e.plan),loading:e.loading,error:e.error,useCredit:s,canUseIA:a,upgradePlanType:n,refreshPlan:o}}const Qj=[{id:"gratuito",name:"Gratuito",price:"R$ 0",period:"/ms",credits:"10 consultas",icon:r.jsx(zr,{className:"h-6 w-6"}),color:"gray",popular:!1,features:["Calculadora bsica de preos","10 consultas IA por ms","At 20 receitas","Relatrios bsicos","Suporte por email"]},{id:"profissional",name:"Profissional",price:"R$ 47",period:"/ms",credits:"100 consultas",icon:r.jsx(ft,{className:"h-6 w-6"}),color:"blue",popular:!0,features:["Tudo do plano Gratuito","100 consultas IA por ms","Receitas ilimitadas","Anlise de cenrios avanada","Catlogo personalizado","Relatrios avanados","Integrao com marketplace","Suporte prioritrio"]},{id:"premium",name:"Premium",price:"R$ 97",period:"/ms",credits:"Ilimitado",icon:r.jsx(Mt,{className:"h-6 w-6"}),color:"purple",popular:!1,features:["Tudo do plano Profissional","Consultas IA ilimitadas","AI Assistant personalizado","Anlise de fotos de ingredientes","Automao de processos","API para integraes","Mentor exclusivo","Suporte 24/7"]}];function Sd({isOpen:e,onClose:t,onUpgrade:s,currentPlan:a,trigger:n="manual"}){const[o,i]=N.useState(null),[l,c]=N.useState(!1);if(!e)return null;const d=()=>{switch(n){case"no_credits":return" Ops! Crditos esgotados";case"low_credits":return" Poucos crditos restantes";default:return" Potencialize sua confeitaria"}},h=()=>{switch(n){case"no_credits":return"Voc usou todos os seus crditos IA deste ms. Faa upgrade para continuar usando o DoceBot Pro!";case"low_credits":return"Seus crditos esto acabando. Que tal garantir mais consultas com a IA?";default:return"Escolha o plano ideal para levar sua confeitaria ao prximo nvel com recursos avanados"}},m=async x=>{x!==a&&(c(!0),i(x),await new Promise(j=>setTimeout(j,2e3)),s(x),c(!1),t())},p=x=>x===a?"Plano Atual":l&&o===x?"Processando...":x==="gratuito"?"Manter Gratuito":"Escolher Plano",b=x=>x===a||l;return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-5xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:d()}),r.jsx("p",{className:"text-gray-600 mt-1",children:h()})]}),r.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",disabled:l,children:r.jsx(Jt,{className:"h-6 w-6 text-gray-500"})})]}),r.jsx("div",{className:"p-6 grid grid-cols-1 md:grid-cols-3 gap-6",children:Qj.map(x=>{const j=x.id===a,_=o===x.id,v=x.popular,g=l&&_;return r.jsxs("div",{className:`relative border-2 rounded-xl p-6 transition-all duration-200 ${j?"border-green-500 bg-green-50":v?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[v&&r.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:r.jsxs("span",{className:"bg-blue-500 text-white px-3 py-1 rounded-full text-xs font-medium flex items-center space-x-1",children:[r.jsx(Jp,{className:"h-3 w-3"}),r.jsx("span",{children:"Mais Popular"})]})}),j&&r.jsx("div",{className:"absolute -top-3 right-4",children:r.jsx("span",{className:"bg-green-500 text-white px-3 py-1 rounded-full text-xs font-medium",children:"Atual"})}),r.jsx("div",{className:`flex items-center justify-center w-12 h-12 rounded-full mb-4 ${x.color==="blue"?"bg-blue-100 text-blue-600":x.color==="purple"?"bg-purple-100 text-purple-600":"bg-gray-100 text-gray-600"}`,children:x.icon}),r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:x.name}),r.jsxs("div",{className:"flex items-baseline mb-1",children:[r.jsx("span",{className:"text-3xl font-bold text-gray-900",children:x.price}),r.jsx("span",{className:"text-gray-600 ml-1",children:x.period})]}),r.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:[x.credits," de IA"]}),r.jsx("ul",{className:"space-y-2 mb-6",children:x.features.map((u,f)=>r.jsxs("li",{className:"flex items-start space-x-2",children:[r.jsx(Bs,{className:"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0"}),r.jsx("span",{className:"text-sm text-gray-700",children:u})]},f))}),r.jsxs("button",{onClick:()=>m(x.id),disabled:b(x.id),className:`w-full py-3 px-4 rounded-lg font-medium transition-all duration-200 ${j?"bg-green-100 text-green-700 cursor-not-allowed":x.color==="blue"?"bg-blue-600 hover:bg-blue-700 text-white":x.color==="purple"?"bg-purple-600 hover:bg-purple-700 text-white":"bg-gray-600 hover:bg-gray-700 text-white"} ${b(x.id)?"opacity-50 cursor-not-allowed":""}`,children:[g&&r.jsx(Lj,{className:"h-4 w-4 mr-2 inline animate-spin"}),p(x.id)]})]},x.id)})}),r.jsx("div",{className:"p-6 border-t bg-gray-50",children:r.jsxs("div",{className:"text-center text-sm text-gray-600",children:[r.jsx("p",{children:" Todos os planos incluem:"}),r.jsx("p",{className:"mt-1",children:"Acesso total s receitas  Suporte tcnico  Atualizaes gratuitas"}),r.jsx("p",{className:"mt-2 text-xs",children:" Cancelamento a qualquer momento  Sem fidelidade"})]})})]})})}function Yp({className:e=""}){const{plan:t,remainingCredits:s,loading:a,upgradePlanType:n}=pn(),[o,i]=N.useState(!1);if(a)return r.jsx("div",{className:`flex items-center space-x-2 ${e}`,children:r.jsx("div",{className:"w-24 h-4 bg-gray-200 rounded animate-pulse"})});const l=t.creditsIA,c=t.creditsUsedThisMonth,h=100-(l>0?c/l*100:0),m=()=>h>50?"bg-green-500":h>20?"bg-yellow-500":"bg-red-500",p=()=>h>50?"text-green-600":h>20?"text-yellow-600":"text-red-600",b=()=>{switch(t.planType){case"gratuito":return"Gratuito";case"profissional":return"Pro";case"premium":return"Premium";default:return"Gratuito"}},x=()=>{switch(t.planType){case"premium":return r.jsx(ft,{className:"h-4 w-4 text-yellow-500"});case"profissional":return r.jsx(ft,{className:"h-4 w-4 text-blue-500"});default:return r.jsx(zr,{className:"h-4 w-4 text-gray-500"})}},j=s<=2&&t.planType!=="premium",_=g=>{n(g),i(!1)},v=()=>{i(!0)};return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:`flex items-center space-x-3 ${e}`,children:[r.jsxs("div",{className:"flex items-center space-x-1 px-2 py-1 bg-gray-100 rounded-full",children:[x(),r.jsx("span",{className:"text-xs font-medium text-gray-700",children:b()})]}),r.jsxs("div",{className:"flex flex-col items-end",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(zr,{className:"h-4 w-4 text-gray-400"}),r.jsx("span",{className:`text-sm font-medium ${p()}`,children:t.planType==="premium"?"Ilimitado":`${s}/${l}`})]}),t.planType!=="premium"&&r.jsx("div",{className:"w-16 h-1.5 bg-gray-200 rounded-full overflow-hidden mt-1",children:r.jsx("div",{className:`h-full transition-all duration-300 ${m()}`,style:{width:`${Math.max(0,h)}%`}})}),r.jsx("span",{className:"text-xs text-gray-500 mt-0.5",children:t.planType==="premium"?"Consultas IA":"consultas restantes"})]}),j&&r.jsxs("button",{onClick:v,className:"flex items-center space-x-1 px-3 py-1.5 bg-gradient-to-r from-pink-500 to-purple-600 text-white text-xs font-medium rounded-full hover:from-pink-600 hover:to-purple-700 transition-all duration-200 shadow-sm hover:shadow-md",children:[r.jsx(wj,{className:"h-3 w-3"}),r.jsx("span",{children:"Upgrade"})]})]}),r.jsx(Sd,{isOpen:o,onClose:()=>i(!1),onUpgrade:_,currentPlan:t.planType,trigger:s===0?"no_credits":"low_credits"})]})}function Yj(){const{user:e,profile:t,signOut:s}=we();return e?r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("header",{className:"bg-white shadow-sm border-b",children:r.jsx("div",{className:"container mx-auto px-4 py-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(Ot,{className:"h-8 w-8 text-pink-500"}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"DoceCalc"}),r.jsx("p",{className:"text-sm text-gray-600",children:(t==null?void 0:t.nome_negocio)||"Minha Confeitaria"})]})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(Yp,{}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(ft,{className:`h-5 w-5 ${(t==null?void 0:t.plano)==="free"?"text-gray-400":(t==null?void 0:t.plano)==="professional"?"text-blue-500":"text-yellow-500"}`}),r.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Plano ",(t==null?void 0:t.plano)==="professional"?"Pro":"Gratuito"]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(q,{to:"/comunidade",className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",title:"Comunidade",children:r.jsx(Oo,{className:"h-5 w-5"})}),r.jsx(q,{to:"/upgrade",className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",title:"Configuraes",children:r.jsx($j,{className:"h-5 w-5"})}),r.jsx("button",{onClick:s,className:"p-2 text-gray-400 hover:text-red-500 transition-colors",title:"Sair",children:r.jsx(Aj,{className:"h-5 w-5"})})]})]})]})})}),r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:["Ol, ",(t==null?void 0:t.nome)||"Usurio","! "]}),r.jsx("p",{className:"text-gray-600",children:"Bem-vinda ao seu painel de controle"})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Aes Rpidas"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsx(q,{to:"/calculadora",className:"bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow border-l-4 border-blue-500",children:r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(Ot,{className:"h-10 w-10 text-blue-500"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Calculadora"}),r.jsx("p",{className:"text-gray-600",children:"Calcule preos precisos"})]})]})}),r.jsx(q,{to:"/receitas",className:"bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow border-l-4 border-green-500",children:r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(sr,{className:"h-10 w-10 text-green-500"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Receitas"}),r.jsx("p",{className:"text-gray-600",children:"Gerencie suas receitas"})]})]})}),r.jsx(q,{to:"/ingredientes",className:"bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow border-l-4 border-purple-500",children:r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(li,{className:"h-10 w-10 text-purple-500"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Ingredientes"}),r.jsx("p",{className:"text-gray-600",children:"Controle de estoque"})]})]})}),r.jsx(q,{to:"/clientes",className:"bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow border-l-4 border-indigo-500",children:r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(Qs,{className:"h-10 w-10 text-indigo-500"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Clientes"}),r.jsx("p",{className:"text-gray-600",children:"Gerencie clientes"})]})]})}),r.jsx(q,{to:"/orcamentos",className:"bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow border-l-4 border-pink-500",children:r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(Rt,{className:"h-10 w-10 text-pink-500"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Oramentos"}),r.jsx("p",{className:"text-gray-600",children:"Crie oramentos"})]})]})}),r.jsx(q,{to:"/relatorios",className:"bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow border-l-4 border-orange-500",children:r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(ii,{className:"h-10 w-10 text-orange-500"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Relatrios"}),r.jsx("p",{className:"text-gray-600",children:"Analytics do negcio"})]})]})}),r.jsx(q,{to:"/comunidade",className:"bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow border-l-4 border-teal-500",children:r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(Oo,{className:"h-10 w-10 text-teal-500"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Comunidade"}),r.jsx("p",{className:"text-gray-600",children:"Troque ideias e dicas"})]})]})}),r.jsx(q,{to:"/como-usar",className:"bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow border-l-4 border-indigo-500",children:r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(Cd,{className:"h-10 w-10 text-indigo-500"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Como Usar"}),r.jsx("p",{className:"text-gray-600",children:"Guia completo das ferramentas"})]})]})}),r.jsx(q,{to:"/ai-assistant",className:"bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow border-l-4 border-purple-500",children:r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(to,{className:"h-10 w-10 text-purple-500"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"DoceBot Pro"}),r.jsx("p",{className:"text-gray-600",children:"Assistente IA para confeitaria"})]})]})}),r.jsx(q,{to:"/marketplace",className:"bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow border-l-4 border-green-500",children:r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(tn,{className:"h-10 w-10 text-green-500"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Marketplace"}),r.jsx("p",{className:"text-gray-600",children:"E-books e recursos premium"})]})]})}),r.jsx(q,{to:"/advanced-calculator",className:"bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow border-l-4 border-blue-500",children:r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(Nj,{className:"h-10 w-10 text-blue-500"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Calculadora IA"}),r.jsx("p",{className:"text-gray-600",children:"Anlise avanada por foto"})]})]})}),r.jsx(q,{to:"/custom-catalog",className:"bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow border-l-4 border-pink-500",children:r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(qp,{className:"h-10 w-10 text-pink-500"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Catlogo"}),r.jsx("p",{className:"text-gray-600",children:"Catlogo personalizado"})]})]})}),r.jsx(q,{to:"/credit-test",className:"bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow border-l-4 border-red-500",children:r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(fc,{className:"h-10 w-10 text-red-500"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Teste de Crditos"}),r.jsx("p",{className:"text-gray-600",children:"Validar sistema de IA (FASE 1)"})]})]})})]})]}),(t==null?void 0:t.plano)==="free"&&r.jsx("div",{className:"mt-8 bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-lg p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Desbloqueie o Poder Total do DoceCalc! "}),r.jsx("p",{className:"text-gray-600",children:"Upgrade para o plano Professional e tenha acesso ilimitado a todas as funcionalidades."})]}),r.jsx(q,{to:"/upgrade",className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-3 rounded-lg hover:shadow-lg transition-all",children:"Fazer Upgrade"})]})}),r.jsx("footer",{className:"mt-12 border-t pt-4 text-center text-gray-500 text-sm",children:"Suporte/Feedbacks: 15 9512...."})]})]}):r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Carregando..."}),r.jsx(q,{to:"/login",className:"text-pink-500 hover:text-pink-600",children:"Fazer login"})]})})}const F={USER:"doce_user",PERFIL_CONFEITARIA:"doce_perfil_confeitaria",RECEITAS:"doce_receitas",INGREDIENTES_USUARIO:"doce_ingredientes_usuario",CATEGORIAS:"doce_categorias",CLIENTES:"doce_clientes",ORCAMENTOS:"doce_orcamentos",PEDIDOS:"doce_pedidos",CONFIGURACOES:"doce_configuracoes",STATS_DASHBOARD:"doce_stats_dashboard"};function Se(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(s){console.error("Erro ao salvar no localStorage:",s)}}function G(e,t){try{const s=localStorage.getItem(e);return s?JSON.parse(s):t}catch(s){return console.error("Erro ao ler do localStorage:",s),t}}const Xj=e=>!e||e===""?"":e.replace(",","."),Rr=e=>{if(!e||e.trim()==="")return null;const t=Xj(e),s=parseFloat(t);return isNaN(s)?null:s},Pa=e=>e==null?"":e.toString(),Zj=()=>{const e=N.useCallback(i=>i==null||isNaN(i)?"R$ 0,00":new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:2,maximumFractionDigits:2}).format(i),[]),t=N.useCallback(i=>{if(!i||i.trim()==="")return 0;const l=i.replace(/R\$\s?/g,"").replace(/\./g,"").replace(",",".").trim(),c=parseFloat(l);return isNaN(c)?0:c},[]),s=N.useCallback(i=>i==null||isNaN(i)?"":i.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}),[]),a=N.useCallback(i=>{const l=i.replace(/\D/g,"");return l?(parseInt(l)/100).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}):""},[]),n=N.useCallback(i=>!i||i.trim()===""?!0:/^(R\$\s?)?(\d{1,3}(\.\d{3})*|\d+)(,\d{0,2})?$/.test(i.trim()),[]),o=N.useCallback(i=>!i||i.trim()===""?"":n(i)?t(i)<0?"Valor deve ser positivo":"":"Digite um valor monetrio vlido (ex: 123,45)",[n,t]);return{formatToCurrency:e,parseCurrency:t,formatForInput:s,applyCurrencyMask:a,isValidCurrency:n,currencyValidator:o}},Ir=N.forwardRef(({value:e,onChange:t,placeholder:s="R$ 0,00",disabled:a=!1,className:n="",id:o,name:i,"data-testid":l,autoFocus:c,onBlur:d,onFocus:h,allowEmpty:m=!0,...p},b)=>{const{applyCurrencyMask:x,parseCurrency:j,formatForInput:_}=Zj(),[v,g]=N.useState(""),[u,f]=N.useState(!1);N.useEffect(()=>{u||(e==null?g(""):g(_(e)))},[e,_,u]);const w=I=>{const L=I.target.value;if(L===""){g(""),t&&t(m?null:0);return}const K=x(L);if(g(K),t){const se=j(K);t(se)}},y=I=>{f(!0),h&&h()},C=I=>{f(!1),v===""&&m?t&&t(null):v===""&&!m&&(g("0,00"),t&&t(0)),d&&d()},S=`
    w-full px-3 py-2 border border-gray-300 rounded-md
    focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent
    disabled:bg-gray-100 disabled:cursor-not-allowed
    text-right
    ${n}
  `.trim();return r.jsxs("div",{className:"relative",children:[r.jsx("input",{ref:b,type:"text",id:o,name:i,value:v,onChange:w,onFocus:y,onBlur:C,placeholder:s,disabled:a,className:S,autoComplete:"off",inputMode:"numeric","data-testid":l,autoFocus:c,...p}),!v&&!u&&r.jsx("div",{className:"absolute inset-y-0 left-3 flex items-center pointer-events-none text-gray-400",children:"R$"})]})});Ir.displayName="CurrencyInput";function ew(){const{user:e}=we(),[t,s]=N.useState([]),[a,n]=N.useState([]),[o,i]=N.useState([]),[l,c]=N.useState(""),[d,h]=N.useState(""),[m,p]=N.useState(!1),[b,x]=N.useState([]),[j,_]=N.useState(!1),[v,g]=N.useState(!1);N.useEffect(()=>{if(e){const T=G(F.INGREDIENTES_USUARIO,[]),M=G(F.RECEITAS,[]),$=G("doce_historico_calculos",[]);s(T.filter(W=>W.usuario_id===e.id)),n(M.filter(W=>W.usuario_id===e.id&&W.ativo)),x($)}},[e]);const[u,f]=N.useState(30),[w,y]=N.useState(5),[C,S]=N.useState(null),[I,L]=N.useState(1),[K,se]=N.useState(25),[he,Ue]=N.useState(!1),[He,E]=N.useState("manual"),[ee,A]=N.useState(""),H=()=>{Ue(!0)},V=()=>{const T={id:Date.now().toString(),nome:"",quantidade:null,unidade:"g",precoUnitario:null};i([...o,T]),Ue(!1)},Z=()=>{if(!ee)return;const T=t.find(M=>M.id===ee);if(T){const M={id:Date.now().toString(),nome:T.nome,quantidade:null,unidade:T.unidade,precoUnitario:T.preco_atual};i([...o,M])}Ue(!1),A("")},P=T=>{i(o.filter(M=>M.id!==T))},U=(T,M,$)=>{i(o.map(W=>W.id===T?{...W,[M]:$}:W))},z=()=>o.reduce((T,M)=>{const $=M.quantidade||0,W=M.precoUnitario||0;return T+$*W},0),X=()=>{const T=z(),M=I||0,$=K||0,W=w||0,Ge=u||0,ot=M*$;return(T+W+ot)*(1+Ge/100)},le=()=>{if(!e)return;const M=[{receita_id:l||"Clculo Manual",custo_ingredientes:z(),custo_fixo:w||0,custo_mao_obra:(I||0)*(K||0),margem_lucro:u||0,preco_final:X(),breakdown:o.map($=>({ingrediente_id:$.id,nome:$.nome,quantidade:$.quantidade||0,custo:($.quantidade||0)*($.precoUnitario||0)}))},...b.slice(0,9)];x(M),Se("doce_historico_calculos",M),l&&(p(!1),alert("Clculo salvo no histrico!"))},k=T=>{const M=a.find($=>$.id===T);if(M&&M.ingredientes){const $=M.ingredientes.map(W=>{const Ge=t.find(ot=>ot.id===W.ingrediente_id);return{id:W.id,nome:(Ge==null?void 0:Ge.nome)||"Ingrediente no encontrado",quantidade:W.quantidade,unidade:W.unidade,precoUnitario:(Ge==null?void 0:Ge.preco_atual)||0}});i($),c(M.nome)}},B=()=>{const T={nome:l||"Clculo DoceCalc",data:new Date().toLocaleDateString("pt-BR"),ingredientes:o.map(W=>({nome:W.nome,quantidade:W.quantidade||0,unidade:W.unidade,preco_unitario:W.precoUnitario||0,custo_total:(W.quantidade||0)*(W.precoUnitario||0)})),custos:{ingredientes:z(),fixo:w||0,mao_obra:(I||0)*(K||0),total:z()+(w||0)+(I||0)*(K||0)},margem_lucro:u||0,preco_final:X()},M="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(T,null,2)),$=document.createElement("a");$.setAttribute("href",M),$.setAttribute("download",`calculo-${new Date().toISOString().split("T")[0]}.json`),document.body.appendChild($),$.click(),$.remove()};return r.jsx("div",{className:"min-h-screen bg-background",children:r.jsxs("div",{className:"container mx-auto px-4 py-6 lg:py-8",children:[r.jsxs("div",{className:"mb-6 lg:mb-8 flex flex-col sm:flex-row sm:items-center space-y-4 sm:space-y-0 sm:space-x-4",children:[r.jsx(q,{to:"/dashboard",className:"p-2 hover:bg-muted rounded-lg transition-colors w-fit",children:r.jsx(ye,{className:"h-6 w-6"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-foreground mb-1 lg:mb-2",children:"Calculadora de Preos"}),r.jsx("p",{className:"text-muted-foreground text-sm lg:text-base",children:"Calcule o preo correto dos seus doces"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6 lg:gap-8",children:[r.jsxs("div",{className:"bg-card p-4 lg:p-6 rounded-lg shadow-md",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 space-y-4 sm:space-y-0",children:[r.jsx("h2",{className:"text-lg lg:text-xl font-semibold text-card-foreground",children:"Ingredientes"}),r.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center space-y-2 sm:space-y-0 sm:space-x-2",children:[r.jsxs("select",{value:d,onChange:T=>{h(T.target.value),T.target.value&&k(T.target.value)},className:"px-3 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary bg-background text-foreground",children:[r.jsx("option",{value:"",children:"Carregar receita existente"}),a.map(T=>r.jsx("option",{value:T.id,children:T.nome},T.id))]}),r.jsxs("button",{onClick:H,className:"flex items-center justify-center space-x-2 bg-primary text-primary-foreground px-4 py-2 rounded-lg hover:bg-primary/90 transition-colors",children:[r.jsx(_t,{className:"h-4 w-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Adicionar"})]})]})]}),r.jsx("div",{className:"space-y-4",children:o.length===0?r.jsxs("div",{className:"text-center py-8 lg:py-12 border-2 border-dashed border-border rounded-lg",children:[r.jsx(Ot,{className:"h-10 w-10 lg:h-12 lg:w-12 text-muted-foreground mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground mb-4 text-sm lg:text-base",children:"Nenhum ingrediente adicionado"}),r.jsxs("button",{onClick:H,className:"flex items-center space-x-2 bg-primary text-primary-foreground px-4 py-2 rounded-lg hover:bg-primary/90 transition-colors mx-auto text-sm lg:text-base",children:[r.jsx(_t,{className:"h-4 w-4"}),r.jsx("span",{children:"Adicionar Primeiro Ingrediente"})]})]}):o.map((T,M)=>r.jsxs("div",{className:"border border-border p-4 rounded-lg bg-background",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("span",{className:"text-sm font-medium text-foreground",children:["Ingrediente #",M+1]}),r.jsx("button",{onClick:()=>P(T.id),className:"text-destructive hover:text-destructive/80 p-1",children:r.jsx(Bp,{className:"h-4 w-4"})})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"sm:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Nome"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"text",value:T.nome,onChange:$=>U(T.id,"nome",$.target.value),className:"w-full px-3 py-2 border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-ring bg-background text-foreground",placeholder:"Ex: Acar",list:`ingredientes-${T.id}`}),r.jsx("datalist",{id:`ingredientes-${T.id}`,children:t.map($=>r.jsx("option",{value:$.nome},$.id))})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Quantidade"}),r.jsx("input",{type:"number",value:Pa(T.quantidade),onChange:$=>U(T.id,"quantidade",Rr($.target.value)),className:"w-full px-3 py-2 border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-ring bg-background text-foreground",placeholder:"Digite a quantidade"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Unidade"}),r.jsxs("select",{value:T.unidade,onChange:$=>U(T.id,"unidade",$.target.value),className:"w-full px-3 py-2 border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-ring bg-background text-foreground",children:[r.jsx("option",{value:"g",children:"gramas (g)"}),r.jsx("option",{value:"kg",children:"quilos (kg)"}),r.jsx("option",{value:"ml",children:"mililitros (ml)"}),r.jsx("option",{value:"l",children:"litros (l)"}),r.jsx("option",{value:"unidade",children:"unidade"})]})]}),r.jsxs("div",{className:"sm:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Preo por unidade"}),r.jsx(Ir,{value:T.precoUnitario,onChange:$=>U(T.id,"precoUnitario",$),className:"border-input bg-background text-foreground",placeholder:"R$ 0,00"})]})]})]},T.id))})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-card p-4 lg:p-6 rounded-lg shadow-md",children:[r.jsx("h2",{className:"text-lg lg:text-xl font-semibold text-card-foreground mb-6",children:"Configuraes"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Tempo de Preparo (horas)"}),r.jsx("input",{type:"number",step:"0.5",value:Pa(I),onChange:T=>L(Rr(T.target.value)),placeholder:"Digite o tempo",className:"w-full px-3 py-2 border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-ring bg-background text-foreground"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Custo/Hora"}),r.jsx(Ir,{value:K,onChange:se,className:"border-input bg-background text-foreground",placeholder:"R$ 0,00"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Margem de Lucro (%)"}),r.jsx("input",{type:"number",value:Pa(u),onChange:T=>f(Rr(T.target.value)),placeholder:"Digite a margem",className:"w-full px-3 py-2 border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-ring bg-background text-foreground"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Custo Fixo"}),r.jsx(Ir,{value:w,onChange:y,className:"border-input bg-background text-foreground",placeholder:"R$ 0,00"})]})]})]}),r.jsxs("div",{className:"bg-card p-4 lg:p-6 rounded-lg shadow-md",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[r.jsx(Ot,{className:"h-5 w-5 lg:h-6 lg:w-6 text-success"}),r.jsx("h2",{className:"text-lg lg:text-xl font-semibold text-card-foreground",children:"Resultado"})]}),r.jsxs("div",{className:"space-y-3 lg:space-y-4 text-sm lg:text-base",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-muted-foreground",children:"Custo dos Ingredientes:"}),r.jsxs("span",{className:"font-medium text-foreground",children:["R$ ",z().toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-muted-foreground",children:"Custo Fixo:"}),r.jsxs("span",{className:"font-medium text-foreground",children:["R$ ",(w||0).toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("span",{className:"text-muted-foreground text-xs lg:text-sm",children:["Mo de Obra (",I||0,"h x R$",K||0,"):"]}),r.jsxs("span",{className:"font-medium text-foreground",children:["R$ ",((I||0)*(K||0)).toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between items-center border-t border-border pt-2",children:[r.jsx("span",{className:"text-muted-foreground",children:"Subtotal:"}),r.jsxs("span",{className:"font-medium",children:["R$ ",(z()+(w||0)+(I||0)*(K||0)).toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("span",{className:"text-gray-600",children:["Margem (",u||0,"%):"]}),r.jsxs("span",{className:"font-medium",children:["R$ ",((z()+(w||0)+(I||0)*(K||0))*((u||0)/100)).toFixed(2)]})]}),r.jsx("hr",{}),r.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[r.jsx("span",{children:"Preo Final:"}),r.jsxs("span",{className:"text-green-600",children:["R$ ",X().toFixed(2)]})]}),r.jsxs("div",{className:"flex flex-col space-y-2 pt-4",children:[r.jsxs("button",{onClick:()=>g(!v),className:"flex items-center justify-center space-x-2 bg-gray-100 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-200 transition-colors",children:[r.jsx(Hp,{className:"h-4 w-4"}),r.jsxs("span",{children:[v?"Ocultar":"Ver"," Breakdown"]})]}),v&&r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-2",children:[r.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Breakdown por Ingrediente:"}),o.map(T=>r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsxs("span",{className:"text-gray-600",children:[T.nome," (",T.quantidade||0,T.unidade,"):"]}),r.jsxs("span",{children:["R$ ",((T.quantidade||0)*(T.precoUnitario||0)).toFixed(2)]})]},T.id))]}),r.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[r.jsxs("button",{onClick:()=>p(!0),className:"flex items-center justify-center space-x-1 bg-blue-500 text-white px-3 py-2 rounded-lg hover:bg-blue-600 transition-colors text-sm",children:[r.jsx(Wp,{className:"h-3 w-3"}),r.jsx("span",{children:"Salvar"})]}),r.jsxs("button",{onClick:()=>_(!0),className:"flex items-center justify-center space-x-1 bg-purple-500 text-white px-3 py-2 rounded-lg hover:bg-purple-600 transition-colors text-sm",children:[r.jsx(Pj,{className:"h-3 w-3"}),r.jsx("span",{children:"Histrico"})]}),r.jsxs("button",{onClick:B,className:"flex items-center justify-center space-x-1 bg-green-500 text-white px-3 py-2 rounded-lg hover:bg-green-600 transition-colors text-sm",children:[r.jsx(ta,{className:"h-3 w-3"}),r.jsx("span",{children:"Exportar"})]})]})]})]})]})]})]}),m&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-md w-full m-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Salvar Clculo"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome do Clculo"}),r.jsx("input",{type:"text",value:l,onChange:T=>c(T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Bolo de Chocolate - Festa 50 pessoas"})]}),r.jsxs("div",{className:"flex justify-end space-x-4",children:[r.jsx("button",{onClick:()=>p(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancelar"}),r.jsx("button",{onClick:le,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Salvar"})]})]})]})}),j&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-2xl w-full m-4 max-h-96 overflow-y-auto",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Histrico de Clculos"}),b.length===0?r.jsx("p",{className:"text-gray-500 text-center py-8",children:"Nenhum clculo salvo ainda"}):r.jsx("div",{className:"space-y-4",children:b.map((T,M)=>r.jsxs("div",{className:"border border-gray-200 p-4 rounded-lg",children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsx("h4",{className:"font-medium text-gray-900",children:T.receita_id}),r.jsxs("span",{className:"text-xl font-bold text-green-600",children:["R$ ",T.preco_final.toFixed(2)]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm text-gray-600",children:[r.jsxs("div",{children:[r.jsx("span",{className:"block",children:"Ingredientes:"}),r.jsxs("span",{className:"font-medium",children:["R$ ",T.custo_ingredientes.toFixed(2)]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"block",children:"Mo de Obra:"}),r.jsxs("span",{className:"font-medium",children:["R$ ",T.custo_mao_obra.toFixed(2)]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"block",children:"Margem:"}),r.jsxs("span",{className:"font-medium",children:[T.margem_lucro,"%"]})]})]})]},M))}),r.jsx("div",{className:"flex justify-end mt-6",children:r.jsx("button",{onClick:()=>_(!1),className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600",children:"Fechar"})})]})}),he&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white p-6 rounded-lg max-w-md w-full mx-4",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Adicionar Ingrediente"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Como voc deseja adicionar?"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"radio",name:"tipoAdicao",value:"lista",checked:He==="lista",onChange:T=>E(T.target.value),className:"mr-2"}),r.jsx("span",{children:"Da minha lista de ingredientes"})]}),r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"radio",name:"tipoAdicao",value:"manual",checked:He==="manual",onChange:T=>E(T.target.value),className:"mr-2"}),r.jsx("span",{children:"Manualmente"})]})]})]}),He==="lista"&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selecione um ingrediente:"}),r.jsxs("select",{value:ee,onChange:T=>A(T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Escolha um ingrediente"}),t.map(T=>r.jsxs("option",{value:T.id,children:[T.nome," - R$ ",T.preco_atual.toFixed(3),"/",T.unidade]},T.id))]})]}),He==="lista"&&t.length===0&&r.jsxs("div",{className:"text-sm text-gray-500 bg-yellow-50 p-3 rounded",children:["Voc ainda no tem ingredientes cadastrados.",r.jsx(q,{to:"/ingredientes",className:"text-blue-500 hover:text-blue-700",children:"Cadastre alguns aqui primeiro"})," ou adicione manualmente."]})]}),r.jsxs("div",{className:"flex justify-end space-x-2 mt-6",children:[r.jsx("button",{onClick:()=>{Ue(!1),E("manual"),A("")},className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600",children:"Cancelar"}),r.jsx("button",{onClick:He==="lista"?Z:V,disabled:He==="lista"&&!ee,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed",children:"Adicionar"})]})]})})]})})}const Xp=()=>{const{user:e,profile:t}=we(),[s,a]=N.useState({receitas:0,orcamentos:0,clientes:0,ingredientes:0}),n=(t==null?void 0:t.plano)==="professional";N.useEffect(()=>{if(!e)return;(async()=>{try{const[x,j,_,v]=await Promise.all([ne.from("receitas").select("id",{count:"exact"}).eq("user_id",e.id),ne.from("ingredientes_usuario").select("id",{count:"exact"}).eq("user_id",e.id),ne.from("clientes").select("id",{count:"exact"}).eq("user_id",e.id),ne.from("orcamentos").select("id",{count:"exact"}).eq("user_id",e.id)]);a({receitas:x.count||0,orcamentos:v.count||0,clientes:_.count||0,ingredientes:j.count||0})}catch(x){console.error("Erro ao buscar uso:",x)}})()},[e]);const o={receitas:n?null:5,orcamentos:n?null:3,clientes:n?null:10,ingredientes:n?null:50,catalogoPublico:n?null:3,backup:n,relatorios:n,comunidade:n,ferramentas:n},i=()=>n?!0:s.receitas<5,l=()=>n?!0:s.orcamentos<3,c=()=>n?!0:s.clientes<10,d=()=>n?!0:s.ingredientes<50,h=b=>n?!0:["receitas","orcamentos","calculadora","ingredientes"].includes(b),m=b=>{if(n)return null;const x=o[b];return Math.max(0,x-s[b])},p=b=>{if(n)return 0;const x=o[b];return Math.min(100,s[b]/x*100)};return{plano:(t==null?void 0:t.plano)||"free",isProfessional:n,limits:o,usage:s,canAddReceita:i,canAddOrcamento:l,canAddCliente:c,canAddIngrediente:d,canUseFeature:h,getRemainingCount:m,getUsagePercentage:p}},tw=({isOpen:e,onClose:t,feature:s,onUpgrade:a})=>{if(!e)return null;const n=Br.find(i=>i.id==="professional"),o=i=>{a(i),t()};return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6 relative",children:[r.jsx("button",{onClick:t,className:"absolute right-4 top-4 text-gray-400 hover:text-gray-600",children:r.jsx(Jt,{className:"w-5 h-5"})}),r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("div",{className:"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(ft,{className:"w-8 h-8 text-yellow-600"})}),r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Upgrade para continuar"}),r.jsxs("p",{className:"text-gray-600",children:["Voc atingiu o limite do plano gratuito para ",r.jsx("strong",{children:s}),". Faa upgrade para o plano Professional e tenha acesso ilimitado."]})]}),r.jsxs("div",{className:"bg-gradient-to-r from-pink-50 to-purple-50 rounded-lg p-4 mb-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Plano Professional"}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:["R$ ",n.preco_mensal.toFixed(2).replace(".",",")]}),r.jsx("div",{className:"text-sm text-gray-600",children:"/ms"})]})]}),r.jsx("div",{className:"space-y-1",children:n.funcionalidades.slice(0,4).map((i,l)=>r.jsxs("div",{className:"text-sm text-gray-700 flex items-center",children:[r.jsx("div",{className:"w-1.5 h-1.5 bg-purple-400 rounded-full mr-2"}),i]},l))})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("h4",{className:"font-medium text-gray-900 text-center mb-4",children:"Escolha sua forma de pagamento:"}),r.jsxs("button",{onClick:()=>o("pix"),className:"w-full bg-green-600 hover:bg-green-700 text-white font-medium py-3 px-4 rounded-lg flex items-center justify-center gap-2 transition-colors",children:[r.jsx(qs,{className:"w-5 h-5"}),"Pagar com PIX",r.jsx("span",{className:"bg-green-500 px-2 py-1 rounded text-xs ml-2",children:"Instantneo"})]}),r.jsxs("button",{onClick:()=>o("card"),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-lg flex items-center justify-center gap-2 transition-colors",children:[r.jsx(fn,{className:"w-5 h-5"}),"Pagar com Carto"]})]}),r.jsx("div",{className:"text-center mt-4",children:r.jsx("p",{className:"text-xs text-gray-500",children:"Cancele a qualquer momento. Sem fidelidade."})})]})})},sw=({type:e,className:t=""})=>{const{isProfessional:s,usage:a,limits:n,getUsagePercentage:o}=Xp();if(s)return r.jsxs("div",{className:`inline-flex items-center gap-1 px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-medium ${t}`,children:[r.jsx(ft,{className:"w-3 h-3"}),"Ilimitado"]});const i=a[e],l=n[e],c=o(e),d=()=>c>=100?"bg-red-100 text-red-800":c>=80?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800";return r.jsxs("div",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${d()} ${t}`,children:[i,"/",l]})},Lo=[{id:"acucar_cristal",nome:"Acar Cristal",categoria:"Acares",unidade_padrao:"g",preco_medio_nacional:.005},{id:"acucar_refinado",nome:"Acar Refinado",categoria:"Acares",unidade_padrao:"g",preco_medio_nacional:.006},{id:"acucar_mascavo",nome:"Acar Mascavo",categoria:"Acares",unidade_padrao:"g",preco_medio_nacional:.012},{id:"acucar_demerara",nome:"Acar Demerara",categoria:"Acares",unidade_padrao:"g",preco_medio_nacional:.015},{id:"acucar_confeiteiro",nome:"Acar de Confeiteiro",categoria:"Acares",unidade_padrao:"g",preco_medio_nacional:.008},{id:"acucar_impalpavel",nome:"Acar Impalpvel",categoria:"Acares",unidade_padrao:"g",preco_medio_nacional:.01},{id:"mel",nome:"Mel",categoria:"Acares",unidade_padrao:"g",preco_medio_nacional:.025},{id:"glucose_liquida",nome:"Glucose Lquida",categoria:"Acares",unidade_padrao:"g",preco_medio_nacional:.018},{id:"glucose_po",nome:"Glucose em P",categoria:"Acares",unidade_padrao:"g",preco_medio_nacional:.035},{id:"xarope_milho",nome:"Xarope de Milho",categoria:"Acares",unidade_padrao:"ml",preco_medio_nacional:.015},{id:"farinha_trigo",nome:"Farinha de Trigo",categoria:"Farinhas",unidade_padrao:"g",preco_medio_nacional:.004},{id:"farinha_trigo_integral",nome:"Farinha de Trigo Integral",categoria:"Farinhas",unidade_padrao:"g",preco_medio_nacional:.008},{id:"farinha_amendoa",nome:"Farinha de Amndoa",categoria:"Farinhas",unidade_padrao:"g",preco_medio_nacional:.08},{id:"farinha_aveia",nome:"Farinha de Aveia",categoria:"Farinhas",unidade_padrao:"g",preco_medio_nacional:.015},{id:"farinha_coco",nome:"Farinha de Coco",categoria:"Farinhas",unidade_padrao:"g",preco_medio_nacional:.025},{id:"amido_milho",nome:"Amido de Milho (Maisena)",categoria:"Farinhas",unidade_padrao:"g",preco_medio_nacional:.012},{id:"polvilho_doce",nome:"Polvilho Doce",categoria:"Farinhas",unidade_padrao:"g",preco_medio_nacional:.008},{id:"polvilho_azedo",nome:"Polvilho Azedo",categoria:"Farinhas",unidade_padrao:"g",preco_medio_nacional:.009},{id:"fuba",nome:"Fub",categoria:"Farinhas",unidade_padrao:"g",preco_medio_nacional:.005},{id:"chocolate_po",nome:"Chocolate em P",categoria:"Chocolates",unidade_padrao:"g",preco_medio_nacional:.02},{id:"achocolatado_po",nome:"Achocolatado em P",categoria:"Chocolates",unidade_padrao:"g",preco_medio_nacional:.015},{id:"chocolate_meio_amargo",nome:"Chocolate Meio Amargo",categoria:"Chocolates",unidade_padrao:"g",preco_medio_nacional:.04},{id:"chocolate_amargo",nome:"Chocolate Amargo 70%",categoria:"Chocolates",unidade_padrao:"g",preco_medio_nacional:.055},{id:"chocolate_branco",nome:"Chocolate Branco",categoria:"Chocolates",unidade_padrao:"g",preco_medio_nacional:.045},{id:"chocolate_ao_leite",nome:"Chocolate ao Leite",categoria:"Chocolates",unidade_padrao:"g",preco_medio_nacional:.035},{id:"gotas_chocolate",nome:"Gotas de Chocolate",categoria:"Chocolates",unidade_padrao:"g",preco_medio_nacional:.03},{id:"cacau_po",nome:"Cacau em P 100%",categoria:"Chocolates",unidade_padrao:"g",preco_medio_nacional:.05},{id:"leite_integral",nome:"Leite Integral",categoria:"Laticnios",unidade_padrao:"ml",preco_medio_nacional:.004},{id:"leite_desnatado",nome:"Leite Desnatado",categoria:"Laticnios",unidade_padrao:"ml",preco_medio_nacional:.004},{id:"leite_condensado",nome:"Leite Condensado",categoria:"Laticnios",unidade_padrao:"g",preco_medio_nacional:.008},{id:"creme_leite",nome:"Creme de Leite",categoria:"Laticnios",unidade_padrao:"ml",preco_medio_nacional:.015},{id:"manteiga",nome:"Manteiga",categoria:"Laticnios",unidade_padrao:"g",preco_medio_nacional:.025},{id:"margarina",nome:"Margarina",categoria:"Laticnios",unidade_padrao:"g",preco_medio_nacional:.012},{id:"queijo_cream",nome:"Cream Cheese",categoria:"Laticnios",unidade_padrao:"g",preco_medio_nacional:.035},{id:"iogurte_natural",nome:"Iogurte Natural",categoria:"Laticnios",unidade_padrao:"g",preco_medio_nacional:.012},{id:"ricota",nome:"Ricota",categoria:"Laticnios",unidade_padrao:"g",preco_medio_nacional:.02},{id:"mascarpone",nome:"Mascarpone",categoria:"Laticnios",unidade_padrao:"g",preco_medio_nacional:.08},{id:"ovos",nome:"Ovos",categoria:"Ovos",unidade_padrao:"unidade",preco_medio_nacional:.8},{id:"clara_ovos",nome:"Clara de Ovos",categoria:"Ovos",unidade_padrao:"ml",preco_medio_nacional:.02},{id:"gema_ovos",nome:"Gema de Ovos",categoria:"Ovos",unidade_padrao:"ml",preco_medio_nacional:.025},{id:"ovo_desidratado",nome:"Ovo Desidratado",categoria:"Ovos",unidade_padrao:"g",preco_medio_nacional:.12},{id:"fermento_po",nome:"Fermento em P",categoria:"Fermentos",unidade_padrao:"g",preco_medio_nacional:.08},{id:"bicarbonato_sodio",nome:"Bicarbonato de Sdio",categoria:"Fermentos",unidade_padrao:"g",preco_medio_nacional:.015},{id:"cremor_tartaro",nome:"Cremor Trtaro",categoria:"Fermentos",unidade_padrao:"g",preco_medio_nacional:.2},{id:"fermento_biologico",nome:"Fermento Biolgico",categoria:"Fermentos",unidade_padrao:"g",preco_medio_nacional:.025},{id:"oleo_girassol",nome:"leo de Girassol",categoria:"leos",unidade_padrao:"ml",preco_medio_nacional:.008},{id:"oleo_canola",nome:"leo de Canola",categoria:"leos",unidade_padrao:"ml",preco_medio_nacional:.012},{id:"oleo_coco",nome:"leo de Coco",categoria:"leos",unidade_padrao:"ml",preco_medio_nacional:.035},{id:"gordura_vegetal",nome:"Gordura Vegetal",categoria:"leos",unidade_padrao:"g",preco_medio_nacional:.015},{id:"essencia_baunilha",nome:"Essncia de Baunilha",categoria:"Essncias",unidade_padrao:"ml",preco_medio_nacional:.5},{id:"extrato_baunilha",nome:"Extrato de Baunilha",categoria:"Essncias",unidade_padrao:"ml",preco_medio_nacional:2},{id:"essencia_morango",nome:"Essncia de Morango",categoria:"Essncias",unidade_padrao:"ml",preco_medio_nacional:.4},{id:"essencia_chocolate",nome:"Essncia de Chocolate",categoria:"Essncias",unidade_padrao:"ml",preco_medio_nacional:.6},{id:"essencia_limao",nome:"Essncia de Limo",categoria:"Essncias",unidade_padrao:"ml",preco_medio_nacional:.35},{id:"essencia_coco",nome:"Essncia de Coco",categoria:"Essncias",unidade_padrao:"ml",preco_medio_nacional:.45},{id:"morango_fresco",nome:"Morango Fresco",categoria:"Frutas",unidade_padrao:"g",preco_medio_nacional:.025},{id:"banana_nanica",nome:"Banana Nanica",categoria:"Frutas",unidade_padrao:"g",preco_medio_nacional:.008},{id:"maca_fuji",nome:"Ma Fuji",categoria:"Frutas",unidade_padrao:"g",preco_medio_nacional:.012},{id:"limao_tahiti",nome:"Limo Tahiti",categoria:"Frutas",unidade_padrao:"unidade",preco_medio_nacional:.8},{id:"laranja_pera",nome:"Laranja Pra",categoria:"Frutas",unidade_padrao:"unidade",preco_medio_nacional:1},{id:"polpa_morango",nome:"Polpa de Morango",categoria:"Frutas",unidade_padrao:"g",preco_medio_nacional:.02},{id:"polpa_maracuja",nome:"Polpa de Maracuj",categoria:"Frutas",unidade_padrao:"g",preco_medio_nacional:.025},{id:"polpa_acai",nome:"Polpa de Aa",categoria:"Frutas",unidade_padrao:"g",preco_medio_nacional:.03},{id:"amendoa_laminas",nome:"Amndoa em Lminas",categoria:"Nozes",unidade_padrao:"g",preco_medio_nacional:.08},{id:"amendoa_picada",nome:"Amndoa Picada",categoria:"Nozes",unidade_padrao:"g",preco_medio_nacional:.07},{id:"castanha_para",nome:"Castanha do Par",categoria:"Nozes",unidade_padrao:"g",preco_medio_nacional:.06},{id:"castanha_caju",nome:"Castanha de Caju",categoria:"Nozes",unidade_padrao:"g",preco_medio_nacional:.08},{id:"noz_peca",nome:"Noz Pec",categoria:"Nozes",unidade_padrao:"g",preco_medio_nacional:.12},{id:"amendoim",nome:"Amendoim",categoria:"Nozes",unidade_padrao:"g",preco_medio_nacional:.015},{id:"pistache",nome:"Pistache",categoria:"Nozes",unidade_padrao:"g",preco_medio_nacional:.2},{id:"canela_po",nome:"Canela em P",categoria:"Especiarias",unidade_padrao:"g",preco_medio_nacional:.1},{id:"canela_pau",nome:"Canela em Pau",categoria:"Especiarias",unidade_padrao:"g",preco_medio_nacional:.15},{id:"noz_moscada",nome:"Noz Moscada",categoria:"Especiarias",unidade_padrao:"g",preco_medio_nacional:.3},{id:"cravo_po",nome:"Cravo em P",categoria:"Especiarias",unidade_padrao:"g",preco_medio_nacional:.4},{id:"gengibre_po",nome:"Gengibre em P",categoria:"Especiarias",unidade_padrao:"g",preco_medio_nacional:.25},{id:"gelatina_incolor",nome:"Gelatina Incolor",categoria:"Gelatinas",unidade_padrao:"g",preco_medio_nacional:.15},{id:"gelatina_vermelha",nome:"Gelatina Vermelha",categoria:"Gelatinas",unidade_padrao:"g",preco_medio_nacional:.12},{id:"agar_agar",nome:"gar gar",categoria:"Gelatinas",unidade_padrao:"g",preco_medio_nacional:.8},{id:"corante_vermelho",nome:"Corante Vermelho",categoria:"Corantes",unidade_padrao:"ml",preco_medio_nacional:.3},{id:"corante_azul",nome:"Corante Azul",categoria:"Corantes",unidade_padrao:"ml",preco_medio_nacional:.3},{id:"corante_amarelo",nome:"Corante Amarelo",categoria:"Corantes",unidade_padrao:"ml",preco_medio_nacional:.3},{id:"corante_verde",nome:"Corante Verde",categoria:"Corantes",unidade_padrao:"ml",preco_medio_nacional:.3},{id:"corante_rosa",nome:"Corante Rosa",categoria:"Corantes",unidade_padrao:"ml",preco_medio_nacional:.3},{id:"chantilly_po",nome:"Chantilly em P",categoria:"Coberturas",unidade_padrao:"g",preco_medio_nacional:.04},{id:"brigadeiro_pronto",nome:"Brigadeiro Pronto",categoria:"Coberturas",unidade_padrao:"g",preco_medio_nacional:.025},{id:"doce_leite",nome:"Doce de Leite",categoria:"Coberturas",unidade_padrao:"g",preco_medio_nacional:.018},{id:"geleia_morango",nome:"Gelia de Morango",categoria:"Coberturas",unidade_padrao:"g",preco_medio_nacional:.02},{id:"nutella",nome:"Nutella",categoria:"Coberturas",unidade_padrao:"g",preco_medio_nacional:.045},{id:"creme_avela",nome:"Creme de Avel",categoria:"Coberturas",unidade_padrao:"g",preco_medio_nacional:.035},{id:"confeitos_coloridos",nome:"Confeitos Coloridos",categoria:"Decorao",unidade_padrao:"g",preco_medio_nacional:.08},{id:"granulado_chocolate",nome:"Granulado de Chocolate",categoria:"Decorao",unidade_padrao:"g",preco_medio_nacional:.025},{id:"granulado_colorido",nome:"Granulado Colorido",categoria:"Decorao",unidade_padrao:"g",preco_medio_nacional:.03},{id:"coco_ralado",nome:"Coco Ralado",categoria:"Decorao",unidade_padrao:"g",preco_medio_nacional:.02},{id:"pacoca_farofa",nome:"Paoca Farofa",categoria:"Decorao",unidade_padrao:"g",preco_medio_nacional:.035},{id:"bolinhas_chocolate",nome:"Bolinhas de Chocolate",categoria:"Decorao",unidade_padrao:"g",preco_medio_nacional:.12},{id:"perolas_acucar",nome:"Prolas de Acar",categoria:"Decorao",unidade_padrao:"g",preco_medio_nacional:.2},{id:"pasta_americana",nome:"Pasta Americana Branca",categoria:"Modelagem",unidade_padrao:"g",preco_medio_nacional:.025},{id:"pasta_americana_colorida",nome:"Pasta Americana Colorida",categoria:"Modelagem",unidade_padrao:"g",preco_medio_nacional:.035},{id:"fondant",nome:"Fondant",categoria:"Modelagem",unidade_padrao:"g",preco_medio_nacional:.04},{id:"goma_tragacanto",nome:"Goma Tragacanto",categoria:"Modelagem",unidade_padrao:"g",preco_medio_nacional:2.5},{id:"cafe_liquido",nome:"Caf Lquido",categoria:"Lquidos",unidade_padrao:"ml",preco_medio_nacional:.008},{id:"rum",nome:"Rum",categoria:"Lquidos",unidade_padrao:"ml",preco_medio_nacional:.08},{id:"conhaque",nome:"Conhaque",categoria:"Lquidos",unidade_padrao:"ml",preco_medio_nacional:.1},{id:"licor_chocolate",nome:"Licor de Chocolate",categoria:"Lquidos",unidade_padrao:"ml",preco_medio_nacional:.12},{id:"sal_refinado",nome:"Sal Refinado",categoria:"Outros",unidade_padrao:"g",preco_medio_nacional:.002},{id:"vinagre_branco",nome:"Vinagre Branco",categoria:"Outros",unidade_padrao:"ml",preco_medio_nacional:.005},{id:"suco_limao",nome:"Suco de Limo",categoria:"Outros",unidade_padrao:"ml",preco_medio_nacional:.015},{id:"raspas_limao",nome:"Raspas de Limo",categoria:"Outros",unidade_padrao:"g",preco_medio_nacional:.2},{id:"raspas_laranja",nome:"Raspas de Laranja",categoria:"Outros",unidade_padrao:"g",preco_medio_nacional:.18}],rw=["acucar_cristal","farinha_trigo","ovos","manteiga","leite_integral","fermento_po","chocolate_po","leite_condensado","creme_leite","essencia_baunilha","acucar_confeiteiro","oleo_girassol","bicarbonato_sodio","sal_refinado","doce_leite","chantilly_po","granulado_chocolate","coco_ralado","limao_tahiti","corante_vermelho","margarina","glucose_liquida","amido_milho","queijo_cream","chocolate_meio_amargo","essencia_morango","polpa_morango","canela_po","gelatina_incolor","confeitos_coloridos","acucar_refinado","acucar_mascavo","acucar_demerara","acucar_impalpavel","mel","glucose_po","xarope_milho","farinha_trigo_integral","farinha_amendoa","farinha_aveia","farinha_coco","polvilho_doce","polvilho_azedo","fuba","achocolatado_po","chocolate_amargo","chocolate_branco","chocolate_ao_leite","gotas_chocolate","cacau_po","leite_desnatado","iogurte_natural","ricota","mascarpone","clara_ovos","gema_ovos","ovo_desidratado","cremor_tartaro","fermento_biologico","oleo_canola","oleo_coco","gordura_vegetal","extrato_baunilha","essencia_chocolate","essencia_limao","essencia_coco","morango_fresco","banana_nanica","maca_fuji","laranja_pera","polpa_maracuja","polpa_acai","amendoa_laminas","amendoa_picada","castanha_para","castanha_caju","noz_peca","amendoim","pistache","canela_pau","noz_moscada","cravo_po","gengibre_po","gelatina_vermelha","agar_agar","corante_azul","corante_amarelo","corante_verde","corante_rosa","brigadeiro_pronto","geleia_morango","nutella","creme_avela","granulado_colorido","pacoca_farofa","bolinhas_chocolate","perolas_acucar","pasta_americana","pasta_americana_colorida","fondant","goma_tragacanto","cafe_liquido","rum","conhaque","licor_chocolate","vinagre_branco","suco_limao","raspas_limao","raspas_laranja"],Zp=["Acares","Farinhas","Chocolates","Laticnios","Ovos","Fermentos","leos","Essncias","Frutas","Nozes","Especiarias","Gelatinas","Corantes","Coberturas","Decorao","Modelagem","Lquidos","Outros"],aw=({onAddIngredient:e,selectedIngredients:t=[],className:s=""})=>{const{user:a}=we(),[n,o]=N.useState(""),[i,l]=N.useState("Todos"),[c,d]=N.useState(!1),[h,m]=N.useState([]),[p,b]=N.useState([]);N.useEffect(()=>{if(a){const f=G(`doce_historico_ingredientes_${a.id}`,[]),w=G(F.INGREDIENTES_USUARIO,[]);m(f),b(w.filter(y=>y.usuario_id===a.id))}},[a]);const x=N.useMemo(()=>{let f=Lo;if(i!=="Todos"&&(f=f.filter(y=>y.categoria===i)),n.trim()){const y=n.toLowerCase();f=f.filter(C=>C.nome.toLowerCase().includes(y)||C.categoria.toLowerCase().includes(y))}const w=t.map(y=>y.ingrediente_id);return f=f.filter(y=>!w.includes(y.id)),f.sort((y,C)=>{var L,K;const S=((L=h.find(se=>se.ingrediente_id===y.id))==null?void 0:L.contador)||0,I=((K=h.find(se=>se.ingrediente_id===C.id))==null?void 0:K.contador)||0;return S!==I?I-S:y.nome.localeCompare(C.nome)})},[n,i,t,h]),j=N.useMemo(()=>Lo.filter(f=>!t.map(y=>y.ingrediente_id).includes(f.id)).map(f=>{var w;return{...f,uso:((w=h.find(y=>y.ingrediente_id===f.id))==null?void 0:w.contador)||0}}).sort((f,w)=>w.uso-f.uso).slice(0,5).filter(f=>f.uso>0),[h,t]),_=f=>{if(!a)return;const w=[...h],y=w.findIndex(C=>C.ingrediente_id===f);y>=0?(w[y].contador+=1,w[y].ultima_utilizacao=new Date().toISOString()):w.push({ingrediente_id:f,contador:1,ultima_utilizacao:new Date().toISOString()}),m(w),Se(`doce_historico_ingredientes_${a.id}`,w)},v=f=>{e(f),_(f.id),o("")},g=f=>{const w=p.find(y=>y.nome.toLowerCase()===f.nome.toLowerCase());return(w==null?void 0:w.preco_atual)||f.preco_medio_nacional},u=["Todos",...Zp];return r.jsxs("div",{className:`bg-white border border-gray-200 rounded-lg ${s}`,children:[r.jsxs("div",{className:"p-4 border-b border-gray-200",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Kt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),r.jsx("input",{type:"text",value:n,onChange:f=>o(f.target.value),onFocus:()=>d(!0),placeholder:"Buscar ingredientes (ex: farinha, acar...)",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),n&&r.jsx("button",{onClick:()=>o(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:r.jsx(Jt,{className:"h-5 w-5"})})]}),c&&r.jsx("div",{className:"mt-4",children:r.jsx("div",{className:"flex flex-wrap gap-2",children:u.map(f=>r.jsx("button",{onClick:()=>l(f),className:`px-3 py-1 rounded-full text-sm transition-colors ${i===f?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:f},f))})})]}),c&&r.jsxs("div",{className:"p-4",children:[!n&&j.length>0&&r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[r.jsx(ea,{className:"h-4 w-4 text-gray-500"}),r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Mais usados por voc"})]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:j.map(f=>r.jsx("div",{className:"border border-gray-200 rounded-lg p-3 hover:shadow-md transition-shadow",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:f.nome}),r.jsx("p",{className:"text-xs text-gray-500",children:f.categoria}),r.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["R$ ",g(f).toFixed(4),"/",f.unidade_padrao]}),r.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[r.jsx(Mt,{className:"h-3 w-3 text-yellow-400 fill-current"}),r.jsxs("span",{className:"text-xs text-gray-500",children:[f.uso," vezes"]})]})]}),r.jsx("button",{onClick:()=>v(f),className:"ml-2 p-2 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition-colors",children:r.jsx(_t,{className:"h-4 w-4"})})]})},f.id))})]}),r.jsxs("div",{children:[n&&r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[x.length," ingredientes encontrados"]}),x.length>0&&r.jsx("button",{onClick:()=>d(!1),className:"text-sm text-gray-500 hover:text-gray-700",children:"Fechar"})]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 max-h-96 overflow-y-auto",children:x.slice(0,12).map(f=>{var y;const w=((y=h.find(C=>C.ingrediente_id===f.id))==null?void 0:y.contador)||0;return r.jsx("div",{className:"border border-gray-200 rounded-lg p-3 hover:shadow-md transition-shadow",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:f.nome}),r.jsx("p",{className:"text-xs text-gray-500",children:f.categoria}),r.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["R$ ",g(f).toFixed(4),"/",f.unidade_padrao]}),w>0&&r.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[r.jsx(Mt,{className:"h-3 w-3 text-yellow-400 fill-current"}),r.jsxs("span",{className:"text-xs text-gray-500",children:[w," vezes"]})]})]}),r.jsx("button",{onClick:()=>v(f),className:"ml-2 p-2 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition-colors",children:r.jsx(_t,{className:"h-4 w-4"})})]})},f.id)})}),x.length===0&&n&&r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"text-gray-400 mb-2",children:r.jsx(Kt,{className:"h-12 w-12 mx-auto"})}),r.jsxs("p",{className:"text-gray-500",children:['Nenhum ingrediente encontrado para "',n,'"']}),r.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Tente buscar por nome ou categoria"})]})]}),(n||j.length>0)&&r.jsx("div",{className:"mt-4 text-center",children:r.jsx("button",{onClick:()=>{d(!1),o("")},className:"text-sm text-gray-500 hover:text-gray-700",children:"Fechar busca"})})]})]})};var bh;(function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"})(bh||(bh={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jh;(function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"})(jh||(jh={}));var wh;(function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(wh||(wh={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nh=["user","model","function","system"];var _h;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(_h||(_h={}));var Ch;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(Ch||(Ch={}));var kh;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(kh||(kh={}));var Sh;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})(Sh||(Sh={}));var Ta;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.OTHER="OTHER"})(Ta||(Ta={}));var Eh;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(Eh||(Eh={}));var Ph;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(Ph||(Ph={}));var Th;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(Th||(Th={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class cr extends De{constructor(t,s){super(t),this.response=s}}class eg extends De{constructor(t,s,a,n){super(t),this.status=s,this.statusText=a,this.errorDetails=n}}class js extends De{}class tg extends De{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw="https://generativelanguage.googleapis.com",ow="v1beta",iw="0.24.1",lw="genai-js";var Ys;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Ys||(Ys={}));class cw{constructor(t,s,a,n,o){this.model=t,this.task=s,this.apiKey=a,this.stream=n,this.requestOptions=o}toString(){var t,s;const a=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||ow;let o=`${((s=this.requestOptions)===null||s===void 0?void 0:s.baseUrl)||nw}/${a}/${this.model}:${this.task}`;return this.stream&&(o+="?alt=sse"),o}}function dw(e){const t=[];return e!=null&&e.apiClient&&t.push(e.apiClient),t.push(`${lw}/${iw}`),t.join(" ")}async function uw(e){var t;const s=new Headers;s.append("Content-Type","application/json"),s.append("x-goog-api-client",dw(e.requestOptions)),s.append("x-goog-api-key",e.apiKey);let a=(t=e.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(a){if(!(a instanceof Headers))try{a=new Headers(a)}catch(n){throw new js(`unable to convert customHeaders value ${JSON.stringify(a)} to Headers: ${n.message}`)}for(const[n,o]of a.entries()){if(n==="x-goog-api-key")throw new js(`Cannot set reserved header name ${n}`);if(n==="x-goog-api-client")throw new js(`Header name ${n} can only be set using the apiClient field`);s.append(n,o)}}return s}async function hw(e,t,s,a,n,o){const i=new cw(e,t,s,a,o);return{url:i.toString(),fetchOptions:Object.assign(Object.assign({},gw(o)),{method:"POST",headers:await uw(i),body:n})}}async function gn(e,t,s,a,n,o={},i=fetch){const{url:l,fetchOptions:c}=await hw(e,t,s,a,n,o);return mw(l,c,i)}async function mw(e,t,s=fetch){let a;try{a=await s(e,t)}catch(n){fw(n,e)}return a.ok||await pw(a,e),a}function fw(e,t){let s=e;throw s.name==="AbortError"?(s=new tg(`Request aborted when fetching ${t.toString()}: ${e.message}`),s.stack=e.stack):e instanceof eg||e instanceof js||(s=new De(`Error fetching from ${t.toString()}: ${e.message}`),s.stack=e.stack),s}async function pw(e,t){let s="",a;try{const n=await e.json();s=n.error.message,n.error.details&&(s+=` ${JSON.stringify(n.error.details)}`,a=n.error.details)}catch{}throw new eg(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${s}`,e.status,e.statusText,a)}function gw(e){const t={};if((e==null?void 0:e.signal)!==void 0||(e==null?void 0:e.timeout)>=0){const s=new AbortController;(e==null?void 0:e.timeout)>=0&&setTimeout(()=>s.abort(),e.timeout),e!=null&&e.signal&&e.signal.addEventListener("abort",()=>{s.abort()}),t.signal=s.signal}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ed(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),ao(e.candidates[0]))throw new cr(`${rs(e)}`,e);return xw(e)}else if(e.promptFeedback)throw new cr(`Text not available. ${rs(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),ao(e.candidates[0]))throw new cr(`${rs(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),Rh(e)[0]}else if(e.promptFeedback)throw new cr(`Function call not available. ${rs(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),ao(e.candidates[0]))throw new cr(`${rs(e)}`,e);return Rh(e)}else if(e.promptFeedback)throw new cr(`Function call not available. ${rs(e)}`,e)},e}function xw(e){var t,s,a,n;const o=[];if(!((s=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||s===void 0)&&s.parts)for(const i of(n=(a=e.candidates)===null||a===void 0?void 0:a[0].content)===null||n===void 0?void 0:n.parts)i.text&&o.push(i.text),i.executableCode&&o.push("\n```"+i.executableCode.language+`
`+i.executableCode.code+"\n```\n"),i.codeExecutionResult&&o.push("\n```\n"+i.codeExecutionResult.output+"\n```\n");return o.length>0?o.join(""):""}function Rh(e){var t,s,a,n;const o=[];if(!((s=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||s===void 0)&&s.parts)for(const i of(n=(a=e.candidates)===null||a===void 0?void 0:a[0].content)===null||n===void 0?void 0:n.parts)i.functionCall&&o.push(i.functionCall);if(o.length>0)return o}const vw=[Ta.RECITATION,Ta.SAFETY,Ta.LANGUAGE];function ao(e){return!!e.finishReason&&vw.includes(e.finishReason)}function rs(e){var t,s,a;let n="";if((!e.candidates||e.candidates.length===0)&&e.promptFeedback)n+="Response was blocked",!((t=e.promptFeedback)===null||t===void 0)&&t.blockReason&&(n+=` due to ${e.promptFeedback.blockReason}`),!((s=e.promptFeedback)===null||s===void 0)&&s.blockReasonMessage&&(n+=`: ${e.promptFeedback.blockReasonMessage}`);else if(!((a=e.candidates)===null||a===void 0)&&a[0]){const o=e.candidates[0];ao(o)&&(n+=`Candidate was blocked due to ${o.finishReason}`,o.finishMessage&&(n+=`: ${o.finishMessage}`))}return n}function sn(e){return this instanceof sn?(this.v=e,this):new sn(e)}function yw(e,t,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=s.apply(e,t||[]),n,o=[];return n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n;function i(p){a[p]&&(n[p]=function(b){return new Promise(function(x,j){o.push([p,b,x,j])>1||l(p,b)})})}function l(p,b){try{c(a[p](b))}catch(x){m(o[0][3],x)}}function c(p){p.value instanceof sn?Promise.resolve(p.value.v).then(d,h):m(o[0][2],p)}function d(p){l("next",p)}function h(p){l("throw",p)}function m(p,b){p(b),o.shift(),o.length&&l(o[0][0],o[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ih=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function bw(e){const t=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),s=Nw(t),[a,n]=s.tee();return{stream:ww(a),response:jw(n)}}async function jw(e){const t=[],s=e.getReader();for(;;){const{done:a,value:n}=await s.read();if(a)return Ed(_w(t));t.push(n)}}function ww(e){return yw(this,arguments,function*(){const s=e.getReader();for(;;){const{value:a,done:n}=yield sn(s.read());if(n)break;yield yield sn(Ed(a))}})}function Nw(e){const t=e.getReader();return new ReadableStream({start(a){let n="";return o();function o(){return t.read().then(({value:i,done:l})=>{if(l){if(n.trim()){a.error(new De("Failed to parse stream"));return}a.close();return}n+=i;let c=n.match(Ih),d;for(;c;){try{d=JSON.parse(c[1])}catch{a.error(new De(`Error parsing JSON response: "${c[1]}"`));return}a.enqueue(d),n=n.substring(c[0].length),c=n.match(Ih)}return o()}).catch(i=>{let l=i;throw l.stack=i.stack,l.name==="AbortError"?l=new tg("Request aborted when reading from the stream"):l=new De("Error reading from the stream"),l})}}})}function _w(e){const t=e[e.length-1],s={promptFeedback:t==null?void 0:t.promptFeedback};for(const a of e){if(a.candidates){let n=0;for(const o of a.candidates)if(s.candidates||(s.candidates=[]),s.candidates[n]||(s.candidates[n]={index:n}),s.candidates[n].citationMetadata=o.citationMetadata,s.candidates[n].groundingMetadata=o.groundingMetadata,s.candidates[n].finishReason=o.finishReason,s.candidates[n].finishMessage=o.finishMessage,s.candidates[n].safetyRatings=o.safetyRatings,o.content&&o.content.parts){s.candidates[n].content||(s.candidates[n].content={role:o.content.role||"user",parts:[]});const i={};for(const l of o.content.parts)l.text&&(i.text=l.text),l.functionCall&&(i.functionCall=l.functionCall),l.executableCode&&(i.executableCode=l.executableCode),l.codeExecutionResult&&(i.codeExecutionResult=l.codeExecutionResult),Object.keys(i).length===0&&(i.text=""),s.candidates[n].content.parts.push(i)}n++}a.usageMetadata&&(s.usageMetadata=a.usageMetadata)}return s}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sg(e,t,s,a){const n=await gn(t,Ys.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(s),a);return bw(n)}async function rg(e,t,s,a){const o=await(await gn(t,Ys.GENERATE_CONTENT,e,!1,JSON.stringify(s),a)).json();return{response:Ed(o)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ag(e){if(e!=null){if(typeof e=="string")return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function rn(e){let t=[];if(typeof e=="string")t=[{text:e}];else for(const s of e)typeof s=="string"?t.push({text:s}):t.push(s);return Cw(t)}function Cw(e){const t={role:"user",parts:[]},s={role:"function",parts:[]};let a=!1,n=!1;for(const o of e)"functionResponse"in o?(s.parts.push(o),n=!0):(t.parts.push(o),a=!0);if(a&&n)throw new De("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!a&&!n)throw new De("No content is provided for sending chat message.");return a?t:s}function kw(e,t){var s;let a={model:t==null?void 0:t.model,generationConfig:t==null?void 0:t.generationConfig,safetySettings:t==null?void 0:t.safetySettings,tools:t==null?void 0:t.tools,toolConfig:t==null?void 0:t.toolConfig,systemInstruction:t==null?void 0:t.systemInstruction,cachedContent:(s=t==null?void 0:t.cachedContent)===null||s===void 0?void 0:s.name,contents:[]};const n=e.generateContentRequest!=null;if(e.contents){if(n)throw new js("CountTokensRequest must have one of contents or generateContentRequest, not both.");a.contents=e.contents}else if(n)a=Object.assign(Object.assign({},a),e.generateContentRequest);else{const o=rn(e);a.contents=[o]}return{generateContentRequest:a}}function Ah(e){let t;return e.contents?t=e:t={contents:[rn(e)]},e.systemInstruction&&(t.systemInstruction=ag(e.systemInstruction)),t}function Sw(e){return typeof e=="string"||Array.isArray(e)?{content:rn(e)}:e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oh=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],Ew={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function Pw(e){let t=!1;for(const s of e){const{role:a,parts:n}=s;if(!t&&a!=="user")throw new De(`First content should be with role 'user', got ${a}`);if(!Nh.includes(a))throw new De(`Each item should include role field. Got ${a} but valid roles are: ${JSON.stringify(Nh)}`);if(!Array.isArray(n))throw new De("Content should have 'parts' property with an array of Parts");if(n.length===0)throw new De("Each Content should have at least one part");const o={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const l of n)for(const c of Oh)c in l&&(o[c]+=1);const i=Ew[a];for(const l of Oh)if(!i.includes(l)&&o[l]>0)throw new De(`Content with role '${a}' can't contain '${l}' part`);t=!0}}function Mh(e){var t;if(e.candidates===void 0||e.candidates.length===0)return!1;const s=(t=e.candidates[0])===null||t===void 0?void 0:t.content;if(s===void 0||s.parts===void 0||s.parts.length===0)return!1;for(const a of s.parts)if(a===void 0||Object.keys(a).length===0||a.text!==void 0&&a.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lh="SILENT_ERROR";class Tw{constructor(t,s,a,n={}){this.model=s,this.params=a,this._requestOptions=n,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,a!=null&&a.history&&(Pw(a.history),this._history=a.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,s={}){var a,n,o,i,l,c;await this._sendPromise;const d=rn(t),h={safetySettings:(a=this.params)===null||a===void 0?void 0:a.safetySettings,generationConfig:(n=this.params)===null||n===void 0?void 0:n.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(i=this.params)===null||i===void 0?void 0:i.toolConfig,systemInstruction:(l=this.params)===null||l===void 0?void 0:l.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,d]},m=Object.assign(Object.assign({},this._requestOptions),s);let p;return this._sendPromise=this._sendPromise.then(()=>rg(this._apiKey,this.model,h,m)).then(b=>{var x;if(Mh(b.response)){this._history.push(d);const j=Object.assign({parts:[],role:"model"},(x=b.response.candidates)===null||x===void 0?void 0:x[0].content);this._history.push(j)}else{const j=rs(b.response);j&&console.warn(`sendMessage() was unsuccessful. ${j}. Inspect response object for details.`)}p=b}).catch(b=>{throw this._sendPromise=Promise.resolve(),b}),await this._sendPromise,p}async sendMessageStream(t,s={}){var a,n,o,i,l,c;await this._sendPromise;const d=rn(t),h={safetySettings:(a=this.params)===null||a===void 0?void 0:a.safetySettings,generationConfig:(n=this.params)===null||n===void 0?void 0:n.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(i=this.params)===null||i===void 0?void 0:i.toolConfig,systemInstruction:(l=this.params)===null||l===void 0?void 0:l.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,d]},m=Object.assign(Object.assign({},this._requestOptions),s),p=sg(this._apiKey,this.model,h,m);return this._sendPromise=this._sendPromise.then(()=>p).catch(b=>{throw new Error(Lh)}).then(b=>b.response).then(b=>{if(Mh(b)){this._history.push(d);const x=Object.assign({},b.candidates[0].content);x.role||(x.role="model"),this._history.push(x)}else{const x=rs(b);x&&console.warn(`sendMessageStream() was unsuccessful. ${x}. Inspect response object for details.`)}}).catch(b=>{b.message!==Lh&&console.error(b)}),p}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rw(e,t,s,a){return(await gn(t,Ys.COUNT_TOKENS,e,!1,JSON.stringify(s),a)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iw(e,t,s,a){return(await gn(t,Ys.EMBED_CONTENT,e,!1,JSON.stringify(s),a)).json()}async function Aw(e,t,s,a){const n=s.requests.map(i=>Object.assign(Object.assign({},i),{model:t}));return(await gn(t,Ys.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:n}),a)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(t,s,a={}){this.apiKey=t,this._requestOptions=a,s.model.includes("/")?this.model=s.model:this.model=`models/${s.model}`,this.generationConfig=s.generationConfig||{},this.safetySettings=s.safetySettings||[],this.tools=s.tools,this.toolConfig=s.toolConfig,this.systemInstruction=ag(s.systemInstruction),this.cachedContent=s.cachedContent}async generateContent(t,s={}){var a;const n=Ah(t),o=Object.assign(Object.assign({},this._requestOptions),s);return rg(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(a=this.cachedContent)===null||a===void 0?void 0:a.name},n),o)}async generateContentStream(t,s={}){var a;const n=Ah(t),o=Object.assign(Object.assign({},this._requestOptions),s);return sg(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(a=this.cachedContent)===null||a===void 0?void 0:a.name},n),o)}startChat(t){var s;return new Tw(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},t),this._requestOptions)}async countTokens(t,s={}){const a=kw(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),n=Object.assign(Object.assign({},this._requestOptions),s);return Rw(this.apiKey,this.model,a,n)}async embedContent(t,s={}){const a=Sw(t),n=Object.assign(Object.assign({},this._requestOptions),s);return Iw(this.apiKey,this.model,a,n)}async batchEmbedContents(t,s={}){const a=Object.assign(Object.assign({},this._requestOptions),s);return Aw(this.apiKey,this.model,t,a)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(t){this.apiKey=t}getGenerativeModel(t,s){if(!t.model)throw new De("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new Dh(this.apiKey,t,s)}getGenerativeModelFromCachedContent(t,s,a){if(!t.name)throw new js("Cached content must contain a `name` field.");if(!t.model)throw new js("Cached content must contain a `model` field.");const n=["model","systemInstruction"];for(const i of n)if(s!=null&&s[i]&&t[i]&&(s==null?void 0:s[i])!==t[i]){if(i==="model"){const l=s.model.startsWith("models/")?s.model.replace("models/",""):s.model,c=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(l===c)continue}throw new js(`Different value for "${i}" specified in modelParams (${s[i]}) and cachedContent (${t[i]})`)}const o=Object.assign(Object.assign({},s),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new Dh(this.apiKey,o,a)}}const ng=()=>{const e="AIzaSyB8oFTAhIXFaf_Pwjv9rgz8NKzgoi-Uex4";return new Ow(e)};async function Mw(e){try{const s=ng().getGenerativeModel({model:"gemini-1.5-flash"}),a=await $w(e),n=`
    Analise esta imagem de receita manuscrita ou impressa e extraia TODO o texto legvel.
    Mantenha a estrutura original e no interprete ainda - apenas extraia o texto como est.
    Se houver partes ilegveis, indique com [ILEGVEL].
    `,o={inlineData:{data:a,mimeType:e.type}};return(await(await s.generateContent([n,o])).response).text()||""}catch(t){throw console.error("Erro ao extrair texto da imagem:",t),new Error("Erro ao processar a imagem. Tente novamente.")}}async function Lw(e){try{const s=ng().getGenerativeModel({model:"gemini-1.5-flash"}),a=`
    Voc  especialista em organizar receitas de confeitaria brasileira.
    Analise este texto extrado de uma receita e estruture em formato JSON.
    
    Texto da receita:
    ${e}
    
    Retorne JSON exatamente neste formato:
    {
      "nome": "nome da receita (string)",
      "ingredientes": [
        {
          "nome": "nome do ingrediente (string)",
          "quantidade": nmero ou null se no especificado,
          "unidade": "unidade de medida (string: g, ml, xcara, colher, unidade, etc)"
        }
      ],
      "modo_preparo": ["passo 1", "passo 2", "passo 3"],
      "tempo_estimado": minutos estimados (number) ou null,
      "rendimento": "descrio do rendimento (string)" ou null
    }
    
    REGRAS IMPORTANTES:
    - Se algo no estiver claro, coloque null para nmeros ou string vazia para texto
    - Para unidades, use: g, ml, xcara, colher de sopa, colher de ch, unidade, pitada, etc
    - Para quantidades, converta fraes: 1/2 = 0.5, 1/4 = 0.25, etc
    - Modo de preparo deve ser lista de passos numerados
    - Se no conseguir identificar o nome, use "Receita Digitalizada"
    `,i=(await(await s.generateContent(a)).response).text();try{const l=Uw(i),c=JSON.parse(l);if(!c||typeof c.nome!="string")throw new Error("Estrutura invlida");return{nome:c.nome||"Receita Digitalizada",ingredientes:Array.isArray(c.ingredientes)?c.ingredientes:[],modo_preparo:Array.isArray(c.modo_preparo)?c.modo_preparo:[e],tempo_estimado:c.tempo_estimado||null,rendimento:c.rendimento||null}}catch(l){return console.error("Erro ao fazer parse do JSON:",l),{nome:"Receita Digitalizada",ingredientes:[],modo_preparo:[e],tempo_estimado:null,rendimento:null}}}catch(t){throw console.error("Erro ao estruturar receita:",t),new Error("Erro ao processar a receita. Tente novamente.")}}async function Dw(e){try{const t=await Mw(e);if(!t.trim())throw new Error("No foi possvel extrair texto da imagem. Certifique-se de que a imagem contm texto legvel.");return await Lw(t)}catch(t){throw console.error("Erro no processamento completo:",t),t}}function $w(e){return new Promise((t,s)=>{const a=new FileReader;a.onload=()=>{const o=a.result.split(",")[1];t(o)},a.onerror=s,a.readAsDataURL(e)})}function Uw(e){let t=e.trim();t.startsWith("```json")&&(t=t.replace(/^```json\s*/,"")),t.startsWith("```")&&(t=t.replace(/^```\s*/,"")),t.endsWith("```")&&(t=t.replace(/\s*```$/,""));const s=t.indexOf("{"),a=t.lastIndexOf("}");return s!==-1&&a!==-1&&s<=a&&(t=t.substring(s,a+1)),t.trim()}function Fw({onRecipeExtracted:e,onClose:t,isOpen:s}){const[a,n]=N.useState(!1),[o,i]=N.useState(!1),[l,c]=N.useState(""),[d,h]=N.useState(""),m=N.useRef(null),p=N.useRef(null);if(!s)return null;const b=async g=>{if(!g.type.startsWith("image/")){h("Por favor, selecione apenas arquivos de imagem.");return}n(!0),h("");try{c("Extraindo texto da imagem...");const u=await Dw(g);c("Receita digitalizada com sucesso!"),setTimeout(()=>{e(u),v()},1e3)}catch(u){console.error("Erro ao processar imagem:",u),h(u instanceof Error?u.message:"Erro ao processar a imagem"),n(!1),c("")}},x=g=>{g.preventDefault(),g.stopPropagation(),g.type==="dragenter"||g.type==="dragover"?i(!0):g.type==="dragleave"&&i(!1)},j=g=>{g.preventDefault(),g.stopPropagation(),i(!1),g.dataTransfer.files&&g.dataTransfer.files[0]&&b(g.dataTransfer.files[0])},_=g=>{g.target.files&&g.target.files[0]&&b(g.target.files[0])},v=()=>{a||(h(""),c(""),t())};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full mx-4",children:[r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Digitalizar Receita"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Tire uma foto ou faa upload da sua receita"})]}),!a&&r.jsx("button",{onClick:v,className:"text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx(Jt,{className:"h-6 w-6"})})]}),a?r.jsx("div",{className:"text-center py-8",children:r.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[r.jsx("div",{className:"relative",children:r.jsx(zp,{className:"h-12 w-12 text-blue-600 animate-spin"})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-lg font-medium text-gray-900",children:"Processando receita..."}),r.jsx("p",{className:"text-sm text-gray-600",children:l})]})]})}):r.jsxs(r.Fragment,{children:[d&&r.jsxs("div",{className:"mb-4 p-3 bg-red-100 border border-red-300 rounded-lg flex items-center space-x-2",children:[r.jsx(Dp,{className:"h-5 w-5 text-red-600 flex-shrink-0"}),r.jsx("p",{className:"text-sm text-red-700",children:d})]}),r.jsx("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${o?"border-blue-400 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:x,onDragLeave:x,onDragOver:x,onDrop:j,children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"text-gray-400",children:r.jsx(Xa,{className:"h-12 w-12 mx-auto"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-lg font-medium text-gray-900",children:"Adicione sua receita"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Arraste uma imagem ou clique para selecionar"})]})]})}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-6",children:[r.jsxs("button",{onClick:()=>{var g;return(g=p.current)==null?void 0:g.click()},className:"flex items-center justify-center space-x-2 px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx(Xa,{className:"h-5 w-5"}),r.jsx("span",{className:"text-sm font-medium",children:"Cmera"})]}),r.jsxs("button",{onClick:()=>{var g;return(g=m.current)==null?void 0:g.click()},className:"flex items-center justify-center space-x-2 px-4 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[r.jsx(pc,{className:"h-5 w-5"}),r.jsx("span",{className:"text-sm font-medium",children:"Arquivo"})]})]}),r.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[r.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Dicas para melhor resultado:"}),r.jsxs("ul",{className:"text-xs text-blue-800 space-y-1",children:[r.jsx("li",{children:" Use boa iluminao"}),r.jsx("li",{children:" Mantenha a receita plana"}),r.jsx("li",{children:" Evite sombras sobre o texto"}),r.jsx("li",{children:" Certifique-se de que o texto est legvel"})]})]})]})]}),r.jsx("input",{ref:m,type:"file",accept:"image/*",onChange:_,className:"hidden"}),r.jsx("input",{ref:p,type:"file",accept:"image/*",capture:"environment",onChange:_,className:"hidden"})]})})}function zw(){const{user:e}=we(),t=Ct(),{canAddReceita:s}=Xp(),[a,n]=N.useState(!1),[o,i]=N.useState([]),[l,c]=N.useState([]),[d,h]=N.useState([]),[m,p]=N.useState(""),[b,x]=N.useState("todas"),[j,_]=N.useState(!1),[v,g]=N.useState(null),[u,f]=N.useState({nome:"",categoria:"Bolos",categoria_id:"",modo_preparo:[""],tempo_preparo_mins:60,rendimento:"",foto_principal:""}),[w,y]=N.useState([]),[C,S]=N.useState(!1);N.useEffect(()=>{if(e){const P=G(F.RECEITAS,[]),U=G(F.CATEGORIAS,[]),z=G(F.INGREDIENTES_USUARIO,[]);i(P.filter(X=>X.usuario_id===e.id)),c(U.filter(X=>X.usuario_id===e.id)),h(z.filter(X=>X.usuario_id===e.id))}},[e]);const I=o.filter(P=>{const U=P.nome.toLowerCase().includes(m.toLowerCase()),z=b==="todas"||P.categoria_id===b;return U&&z&&P.ativo}),L=P=>l.find(U=>U.id===P),K=P=>{if(window.confirm("Tem certeza que deseja excluir esta receita?")){const U=o.map(le=>le.id===P?{...le,ativo:!1}:le);i(U);const X=G(F.RECEITAS,[]).map(le=>le.id===P?{...le,ativo:!1}:le);Se(F.RECEITAS,X)}},se=()=>{f({nome:"",categoria:"Bolos",categoria_id:"",modo_preparo:[""],tempo_preparo_mins:60,rendimento:"",foto_principal:""}),y([]),g(null),_(!1)},he=P=>{if(!e)return;const U=P.ingredientes.map((z,X)=>({id:Date.now().toString()+X,receita_id:"",ingrediente_id:"",quantidade:z.quantidade||0,unidade:z.unidade||"g",observacoes:"",ordem:X}));f({nome:P.nome||"Receita Digitalizada",categoria:"Bolos",categoria_id:"",modo_preparo:P.modo_preparo||[""],tempo_preparo_mins:P.tempo_estimado||60,rendimento:P.rendimento||"",foto_principal:""}),y(U),g(null),_(!0),S(!1)},Ue=P=>{if(P.preventDefault(),!e||!u.nome.trim())return;const U={id:(v==null?void 0:v.id)||Date.now().toString(),usuario_id:e.id,categoria_id:u.categoria_id||(u.categoria==="Bolos"?"cat_bolos":"cat_"+u.categoria.toLowerCase()),nome:u.nome.trim(),descricao:"",modo_preparo:u.modo_preparo.filter(k=>k.trim()),tempo_preparo_mins:u.tempo_preparo_mins,rendimento:u.rendimento.trim(),dificuldade:u.tempo_preparo_mins<=30?"iniciante":u.tempo_preparo_mins<=120?"intermediario":"avancado",foto_principal:u.foto_principal,ingredientes:w,tags:[u.categoria.toLowerCase()],ativo:!0,criado_em:(v==null?void 0:v.criado_em)||new Date().toISOString(),atualizado_em:new Date().toISOString()};let z;v?z=o.map(k=>k.id===v.id?U:k):z=[...o,U],i(z);const le=G(F.RECEITAS,[]).filter(k=>k.usuario_id!==e.id);Se(F.RECEITAS,[...le,...z]),se()},He=P=>{var U;f({nome:P.nome,categoria:P.categoria_id&&((U=l.find(z=>z.id===P.categoria_id))==null?void 0:U.nome)||"Bolos",categoria_id:P.categoria_id,modo_preparo:P.modo_preparo.length>0?P.modo_preparo:[""],tempo_preparo_mins:P.tempo_preparo_mins,rendimento:P.rendimento,foto_principal:P.foto_principal||""}),y(P.ingredientes),g(P),_(!0)},E=P=>{const U={id:Date.now().toString(),receita_id:"",ingrediente_id:P.id,quantidade:0,unidade:P.unidade_padrao,observacoes:"",ordem:w.length};y([...w,U])},ee=P=>{y(w.filter((U,z)=>z!==P))},A=(P,U,z)=>{const X=[...w];X[P]={...X[P],[U]:z},y(X)},H=()=>{f({...u,modo_preparo:[...u.modo_preparo,""]})},V=P=>{f({...u,modo_preparo:u.modo_preparo.filter((U,z)=>z!==P)})},Z=(P,U)=>{const z=[...u.modo_preparo];z[P]=U,f({...u,modo_preparo:z})};return r.jsxs("div",{className:"min-h-screen bg-background",children:[r.jsxs("div",{className:"container mx-auto px-4 py-6 lg:py-8",children:[r.jsxs("div",{className:"mb-6 lg:mb-8 flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(q,{to:"/dashboard",className:"p-2 hover:bg-muted rounded-lg transition-colors",children:r.jsx(ye,{className:"h-6 w-6"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-foreground mb-1 lg:mb-2",children:"Minhas Receitas"}),r.jsx("p",{className:"text-muted-foreground text-sm lg:text-base",children:"Gerencie suas receitas e organize seus doces"})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center space-y-2 sm:space-y-0 sm:space-x-4",children:[r.jsxs("button",{onClick:()=>{s()?_(!0):n(!0)},className:`flex items-center space-x-2 px-6 py-3 rounded-lg transition-colors ${s()?"bg-pink-500 text-white hover:bg-pink-600":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[r.jsx(_t,{className:"h-5 w-5"}),r.jsx("span",{children:"Nova Receita"})]}),r.jsxs("button",{onClick:()=>{s()?S(!0):n(!0)},className:`flex items-center space-x-2 px-6 py-3 rounded-lg transition-colors ${s()?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[r.jsx(Xa,{className:"h-5 w-5"}),r.jsx("span",{children:"Digitalizar"})]}),r.jsx(sw,{type:"receitas"})]})]}),r.jsx("div",{className:"bg-card p-4 lg:p-6 rounded-lg shadow-md mb-6 lg:mb-8",children:r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Kt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Buscar receitas...",value:m,onChange:P=>p(P.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500"})]}),r.jsxs("select",{value:b,onChange:P=>x(P.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500",children:[r.jsx("option",{value:"todas",children:"Todas as categorias"}),l.map(P=>r.jsx("option",{value:P.id,children:P.nome},P.id))]}),r.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[r.jsx(Ej,{className:"h-5 w-5"}),r.jsxs("span",{children:[I.length," receitas encontradas"]})]})]})}),I.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"text-gray-400 mb-4",children:r.jsx(Mt,{className:"h-16 w-16 mx-auto"})}),r.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:o.length===0?"Nenhuma receita cadastrada":"Nenhuma receita encontrada"}),r.jsx("p",{className:"text-gray-500 mb-6",children:o.length===0?"Comece criando sua primeira receita!":"Tente ajustar os filtros para encontrar o que procura."}),o.length===0&&r.jsx("button",{onClick:()=>_(!0),className:"bg-pink-500 text-white px-6 py-3 rounded-lg hover:bg-pink-600 transition-colors",children:"Criar primeira receita"})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 lg:gap-6",children:I.map(P=>{var z;const U=L(P.categoria_id);return r.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow",children:[r.jsx("div",{className:"h-48 bg-gradient-to-br from-pink-100 to-purple-100 flex items-center justify-center",children:P.foto_principal?r.jsx("img",{src:P.foto_principal,alt:P.nome,className:"w-full h-full object-cover"}):r.jsx("div",{className:"text-6xl",children:(U==null?void 0:U.icone)||""})}),r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsx("h3",{className:"text-xl font-semibold text-gray-900 truncate",children:P.nome}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{onClick:()=>He(P),className:"text-gray-400 hover:text-blue-500 transition-colors",children:r.jsx(Tr,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>K(P.id),className:"text-gray-400 hover:text-red-500 transition-colors",children:r.jsx(Js,{className:"h-4 w-4"})})]})]}),r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(ea,{className:"h-4 w-4"}),r.jsxs("span",{children:[P.tempo_preparo_mins,"min"]})]}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(Qs,{className:"h-4 w-4"}),r.jsx("span",{children:P.rendimento})]})]}),r.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:((z=L(P.categoria_id))==null?void 0:z.nome)||"Outros"})]}),r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:(U==null?void 0:U.cor_hex)||"#gray"}}),r.jsx("span",{className:"text-sm text-gray-600",children:U==null?void 0:U.nome})]})}),P.tags.length>0&&r.jsxs("div",{className:"mt-4 flex flex-wrap gap-1",children:[P.tags.slice(0,3).map(X=>r.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full",children:["#",X]},X)),P.tags.length>3&&r.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full",children:["+",P.tags.length-3]})]})]})]},P.id)})}),j&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-4xl w-full m-4 max-h-screen overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:v?"Editar Receita":"Nova Receita"}),r.jsx("button",{onClick:se,className:"text-gray-400 hover:text-gray-600",children:r.jsx(Jt,{className:"h-6 w-6"})})]}),r.jsxs("form",{onSubmit:Ue,className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome da Receita *"}),r.jsx("input",{type:"text",value:u.nome,onChange:P=>f({...u,nome:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500",placeholder:"Ex: Brigadeiro Gourmet",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Categoria *"}),r.jsxs("select",{value:u.categoria,onChange:P=>f({...u,categoria:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500",required:!0,children:[r.jsx("option",{value:"Bolos",children:"Bolos"}),r.jsx("option",{value:"Doces",children:"Doces"}),r.jsx("option",{value:"Salgados",children:"Salgados"}),r.jsx("option",{value:"Outros",children:"Outros"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Tempo de Preparo: ",Math.floor(u.tempo_preparo_mins/60),"h ",u.tempo_preparo_mins%60,"min"]}),r.jsx("input",{type:"range",min:"15",max:"240",step:"15",value:u.tempo_preparo_mins,onChange:P=>f({...u,tempo_preparo_mins:parseInt(P.target.value)}),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),r.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[r.jsx("span",{children:"15min"}),r.jsx("span",{children:"2h"}),r.jsx("span",{children:"4h"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rendimento *"}),r.jsx("input",{type:"text",value:u.rendimento,onChange:P=>f({...u,rendimento:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500",placeholder:"Ex: 12 pores, 1 bolo grande",required:!0})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-4",children:"Ingredientes *"}),r.jsx(aw,{onAddIngredient:E,selectedIngredients:w,className:"mb-6"}),w.length>0&&r.jsxs("div",{className:"space-y-3",children:[r.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:["Ingredientes da Receita (",w.length,")"]}),w.map((P,U)=>{const z=d.find(X=>X.id===P.ingrediente_id)||Lo.find(X=>X.id===P.ingrediente_id);return r.jsx("div",{className:"border border-gray-200 p-3 rounded-lg bg-gray-50",children:r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-3 items-center",children:[r.jsxs("div",{className:"sm:col-span-2",children:[r.jsx("p",{className:"font-medium text-gray-900 text-sm",children:(z==null?void 0:z.nome)||"Ingrediente desconhecido"}),r.jsx("p",{className:"text-xs text-gray-500",children:(z==null?void 0:z.categoria)||"Categoria no definida"})]}),r.jsx("div",{children:r.jsx("input",{type:"number",step:"0.01",value:P.quantidade,onChange:X=>A(U,"quantidade",parseFloat(X.target.value)||0),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Quantidade"})}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("select",{value:P.unidade,onChange:X=>A(U,"unidade",X.target.value),className:"flex-1 px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",children:[r.jsx("option",{value:"g",children:"g"}),r.jsx("option",{value:"kg",children:"kg"}),r.jsx("option",{value:"ml",children:"ml"}),r.jsx("option",{value:"l",children:"l"}),r.jsx("option",{value:"xcara",children:"xcara"}),r.jsx("option",{value:"colher de sopa",children:"colher de sopa"}),r.jsx("option",{value:"colher de ch",children:"colher de ch"}),r.jsx("option",{value:"unidade",children:"unidade"})]}),r.jsx("button",{type:"button",onClick:()=>ee(U),className:"text-red-500 hover:text-red-700 p-1",children:r.jsx(Jt,{className:"h-4 w-4"})})]})]})},U)})]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Modo de Preparo"}),r.jsxs("button",{type:"button",onClick:H,className:"flex items-center space-x-2 bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors",children:[r.jsx(_t,{className:"h-4 w-4"}),r.jsx("span",{children:"Adicionar Passo"})]})]}),r.jsx("div",{className:"space-y-4",children:u.modo_preparo.map((P,U)=>r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("span",{className:"flex-shrink-0 w-8 h-8 bg-pink-100 text-pink-600 rounded-full flex items-center justify-center text-sm font-medium",children:U+1}),r.jsx("textarea",{value:P,onChange:z=>Z(U,z.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500",rows:2,placeholder:`Passo ${U+1}...`}),u.modo_preparo.length>1&&r.jsx("button",{type:"button",onClick:()=>V(U),className:"text-red-500 hover:text-red-700 p-2",children:r.jsx(Js,{className:"h-4 w-4"})})]},U))})]}),r.jsxs("div",{className:"flex justify-end space-x-4 mt-6",children:[r.jsx("button",{type:"button",onClick:se,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancelar"}),r.jsx("button",{type:"submit",className:"px-4 py-2 bg-pink-500 text-white rounded-lg hover:bg-pink-600",children:v?"Salvar Alteraes":"Criar Receita"})]})]})]})})]}),r.jsx(tw,{isOpen:a,onClose:()=>n(!1),feature:"receitas",onUpgrade:P=>{t(P==="pix"?"/upgrade/pix":"/upgrade/stripe")}}),r.jsx(Fw,{isOpen:C,onClose:()=>S(!1),onRecipeExtracted:he})]})}function Bw(){const{user:e}=we(),[t,s]=N.useState([]),[a,n]=N.useState(""),[o,i]=N.useState("todas"),[l,c]=N.useState(!1),[d,h]=N.useState(!1),[m,p]=N.useState(!1),[b,x]=N.useState(""),[j,_]=N.useState({valorPago:0,quantidade:0}),[v,g]=N.useState(null),[u,f]=N.useState({nome:"",preco_atual:0,unidade:"kg",categoria:"Outros",fornecedor:"",estoque_atual:0,estoque_minimo:0,modo_receitas:!1});N.useEffect(()=>{if(e){const E=G(F.INGREDIENTES_USUARIO,[]);s(E.filter(ee=>ee.usuario_id===e.id))}},[e]);const w=Zp,y=t.filter(E=>{const ee=E.nome.toLowerCase().includes(a.toLowerCase()),A=o==="todas"||E.categoria===o;return ee&&A}),C=t.filter(E=>!E.modo_receitas&&E.estoque_atual!==void 0&&E.estoque_minimo!==void 0&&E.estoque_atual<=E.estoque_minimo),S=E=>{if(E.preventDefault(),!e)return;const ee={id:(v==null?void 0:v.id)||Date.now().toString(),usuario_id:e.id,nome:u.nome,preco_atual:u.preco_atual,preco_anterior:v==null?void 0:v.preco_atual,unidade:u.unidade,categoria:u.categoria,fornecedor:u.fornecedor,estoque_atual:u.modo_receitas?void 0:u.estoque_atual,estoque_minimo:u.modo_receitas?void 0:u.estoque_minimo,modo_receitas:u.modo_receitas,data_atualizacao:new Date().toISOString()};let A;v?A=t.map(Z=>Z.id===v.id?ee:Z):A=[...t,ee],s(A);const V=G(F.INGREDIENTES_USUARIO,[]).filter(Z=>Z.usuario_id!==e.id);Se(F.INGREDIENTES_USUARIO,[...V,...A]),I()},I=()=>{f({nome:"",preco_atual:0,unidade:"kg",categoria:"Outros",fornecedor:"",estoque_atual:0,estoque_minimo:0,modo_receitas:!1}),g(null),c(!1)},L=E=>{f({nome:E.nome,preco_atual:E.preco_atual,unidade:E.unidade,categoria:E.categoria,fornecedor:E.fornecedor||"",estoque_atual:E.estoque_atual||0,estoque_minimo:E.estoque_minimo||0,modo_receitas:E.modo_receitas||!1}),g(E),c(!0)},K=E=>{if(window.confirm("Tem certeza que deseja excluir este ingrediente?")){const ee=t.filter(V=>V.id!==E);s(ee);const H=G(F.INGREDIENTES_USUARIO,[]).filter(V=>V.id!==E);Se(F.INGREDIENTES_USUARIO,H)}},se=E=>{if(e){if(E.id==="ovos"){p(!0),h(!1);return}f({nome:E.nome,preco_atual:0,unidade:E.unidade_padrao,categoria:E.categoria,fornecedor:"",estoque_atual:0,estoque_minimo:0,modo_receitas:!1}),g(null),h(!1),c(!0)}},he=()=>{if(!e||j.valorPago<=0||j.quantidade<=0)return;const E=j.valorPago/j.quantidade,ee={id:Date.now().toString(),usuario_id:e.id,nome:"Ovos",preco_atual:E,unidade:"unidade",categoria:"Ovos",data_atualizacao:new Date().toISOString()},A=[...t,ee];s(A);const V=G(F.INGREDIENTES_USUARIO,[]).filter(Z=>Z.usuario_id!==e.id);Se(F.INGREDIENTES_USUARIO,[...V,...A]),p(!1),h(!1),_({valorPago:0,quantidade:0})},Ue=Lo.filter(E=>rw.includes(E.id)).filter(E=>b===""||E.nome.toLowerCase().includes(b.toLowerCase())||E.categoria.toLowerCase().includes(b.toLowerCase())).filter(E=>!t.some(ee=>ee.nome.toLowerCase()===E.nome.toLowerCase())),He=E=>E.preco_anterior?(E.preco_atual-E.preco_anterior)/E.preco_anterior*100:null;return r.jsx("div",{className:"min-h-screen bg-background",children:r.jsxs("div",{className:"container mx-auto px-4 py-6 lg:py-8",children:[r.jsxs("div",{className:"mb-6 lg:mb-8 flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(q,{to:"/dashboard",className:"p-2 hover:bg-muted rounded-lg transition-colors",children:r.jsx(ye,{className:"h-6 w-6"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-foreground mb-1 lg:mb-2",children:"Ingredientes & Estoque"}),r.jsx("p",{className:"text-muted-foreground text-sm lg:text-base",children:"Gerencie preos e controle seu estoque"})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center space-y-2 sm:space-y-0 sm:space-x-4",children:[r.jsxs("button",{onClick:()=>c(!0),className:"flex items-center space-x-2 bg-blue-500 text-white px-6 py-3 rounded-lg hover:bg-blue-600 transition-colors",children:[r.jsx(_t,{className:"h-5 w-5"}),r.jsx("span",{children:"Novo Ingrediente"})]}),r.jsxs("button",{onClick:()=>h(!0),className:"flex items-center space-x-2 bg-yellow-500 text-white px-6 py-3 rounded-lg hover:bg-yellow-600 transition-colors",children:[r.jsx(Mt,{className:"h-5 w-5"}),r.jsx("span",{children:"Ingredientes Populares"})]})]})]}),C.length>0&&r.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6",children:r.jsxs("div",{className:"flex",children:[r.jsx(eo,{className:"h-5 w-5 text-yellow-400"}),r.jsx("div",{className:"ml-3",children:r.jsxs("p",{className:"text-sm text-yellow-700",children:[r.jsxs("strong",{children:[C.length," ingredientes"]})," com estoque baixo precisam de reposio."]})})]})}),r.jsx("div",{className:"bg-card p-4 lg:p-6 rounded-lg shadow-md mb-6 lg:mb-8",children:r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Kt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Buscar ingredientes...",value:a,onChange:E=>n(E.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("select",{value:o,onChange:E=>i(E.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"todas",children:"Todas as categorias"}),w.map(E=>r.jsx("option",{value:E,children:E},E))]}),r.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[r.jsx(li,{className:"h-5 w-5"}),r.jsxs("span",{children:[y.length," ingredientes"]})]})]})}),r.jsx("div",{className:"bg-card rounded-lg shadow-md overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ingrediente"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Preo Atual"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Variao"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estoque"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fornecedor"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aes"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:y.map(E=>{const ee=He(E),A=!E.modo_receitas&&E.estoque_atual!==void 0&&E.estoque_minimo!==void 0&&E.estoque_atual<=E.estoque_minimo;return r.jsxs("tr",{className:A?"bg-yellow-50":"",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:E.nome}),r.jsx("div",{className:"text-sm text-gray-500",children:E.categoria})]})}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[r.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["R$ ",E.preco_atual.toFixed(2)]}),r.jsxs("div",{className:"text-xs text-gray-500",children:["por ",E.unidade]})]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:ee!==null&&r.jsxs("div",{className:`flex items-center text-sm ${ee>0?"text-red-600":ee<0?"text-green-600":"text-gray-600"}`,children:[r.jsx(sr,{className:`h-4 w-4 mr-1 ${ee<0?"transform rotate-180":""}`}),Math.abs(ee).toFixed(1),"%"]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:E.modo_receitas?r.jsx("span",{className:"text-sm text-blue-600",children:"Modo receitas"}):E.estoque_atual!==void 0?r.jsxs("div",{className:`text-sm ${A?"text-yellow-600 font-medium":"text-gray-900"}`,children:[E.estoque_atual," ",E.unidade,A&&r.jsx("div",{className:"text-xs text-yellow-600",children:"Repor!"})]}):r.jsx("span",{className:"text-gray-400",children:"-"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:E.fornecedor||"-"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{onClick:()=>L(E),className:"text-blue-600 hover:text-blue-900",children:r.jsx(Tr,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>K(E.id),className:"text-red-600 hover:text-red-900",children:r.jsx(Js,{className:"h-4 w-4"})})]})})]},E.id)})})]})})}),l&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-md w-full m-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:v?"Editar Ingrediente":"Novo Ingrediente"}),r.jsxs("form",{onSubmit:S,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome do Ingrediente"}),r.jsx("input",{type:"text",value:u.nome,onChange:E=>f({...u,nome:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preo Atual"}),r.jsx(Ir,{value:u.preco_atual,onChange:E=>f({...u,preco_atual:E||0}),className:"border-gray-300",placeholder:"R$ 0,00",allowEmpty:!1})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Unidade"}),r.jsxs("select",{value:u.unidade,onChange:E=>f({...u,unidade:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"kg",children:"Quilos (kg)"}),r.jsx("option",{value:"g",children:"Gramas (g)"}),r.jsx("option",{value:"l",children:"Litros (l)"}),r.jsx("option",{value:"ml",children:"Mililitros (ml)"}),r.jsx("option",{value:"unidade",children:"Unidade"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Categoria"}),r.jsx("select",{value:u.categoria,onChange:E=>f({...u,categoria:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:w.map(E=>r.jsx("option",{value:E,children:E},E))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fornecedor (Opcional)"}),r.jsx("input",{type:"text",value:u.fornecedor,onChange:E=>f({...u,fornecedor:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",id:"modo-receitas",checked:u.modo_receitas,onChange:E=>f({...u,modo_receitas:E.target.checked}),className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),r.jsx("label",{htmlFor:"modo-receitas",className:"text-sm font-medium text-gray-700",children:"Modo para receitas: no contabilizar estoque, apenas ficar liberado para receitas"})]}),!u.modo_receitas&&r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estoque Atual"}),r.jsx("input",{type:"number",step:"0.01",value:u.estoque_atual,onChange:E=>f({...u,estoque_atual:parseFloat(E.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estoque Mnimo"}),r.jsx("input",{type:"number",step:"0.01",value:u.estoque_minimo,onChange:E=>f({...u,estoque_minimo:parseFloat(E.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),r.jsxs("div",{className:"flex justify-end space-x-4 mt-6",children:[r.jsx("button",{type:"button",onClick:I,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancelar"}),r.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:v?"Salvar Alteraes":"Adicionar Ingrediente"})]})]})]})}),d&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-4xl w-full m-4 max-h-[80vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Ingredientes Mais Utilizados por Confeiteiras"}),r.jsx("button",{onClick:()=>h(!1),className:"text-gray-400 hover:text-gray-600",children:""})]}),r.jsx("div",{className:"mb-4",children:r.jsxs("div",{className:"relative",children:[r.jsx(Kt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Buscar ingredientes...",value:b,onChange:E=>x(E.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Ue.map(E=>r.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[r.jsx("h4",{className:"font-medium text-gray-900",children:E.nome}),r.jsx("p",{className:"text-sm text-gray-600",children:E.categoria}),r.jsxs("p",{className:"text-sm text-gray-500 mb-3",children:["Unidade: ",E.unidade_padrao]}),r.jsx("button",{onClick:()=>se(E),className:"w-full px-3 py-2 bg-blue-500 text-white rounded text-sm hover:bg-blue-600 transition-colors",children:"Adicionar"})]},E.id))}),Ue.length===0&&r.jsx("div",{className:"text-center py-8 text-gray-500",children:"Nenhum ingrediente encontrado ou todos j foram adicionados."})]})}),m&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-md w-full m-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Calcular Preo dos Ovos"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quanto voc pagou?"}),r.jsx(Ir,{value:j.valorPago,onChange:E=>_({...j,valorPago:E||0}),className:"border-gray-300",placeholder:"R$ 0,00",allowEmpty:!1})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Por quantos ovos?"}),r.jsx("input",{type:"number",value:j.quantidade,onChange:E=>_({...j,quantidade:parseInt(E.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex: 30"})]}),j.valorPago>0&&j.quantidade>0&&r.jsx("div",{className:"bg-green-50 p-3 rounded-lg",children:r.jsx("p",{className:"text-sm text-green-700",children:r.jsxs("strong",{children:["Preo por ovo: R$ ",(j.valorPago/j.quantidade).toFixed(2)]})})})]}),r.jsxs("div",{className:"flex justify-end space-x-4 mt-6",children:[r.jsx("button",{onClick:()=>{p(!1),_({valorPago:0,quantidade:0})},className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancelar"}),r.jsx("button",{onClick:he,disabled:j.valorPago<=0||j.quantidade<=0,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed",children:"Adicionar Ovos"})]})]})})]})})}function qw(){const{user:e}=we(),[t,s]=N.useState([]),[a,n]=N.useState(""),[o,i]=N.useState(!1),[l,c]=N.useState(null),[d,h]=N.useState({nome:"",telefone:"",whatsapp:"",email:"",endereco_completo:"",data_nascimento:"",observacoes:""});N.useEffect(()=>{if(e){const u=G(F.CLIENTES,[]);s(u.filter(f=>f.usuario_id===e.id&&f.ativo))}},[e]);const m=t.filter(u=>{var w,y;const f=a.toLowerCase();return u.nome.toLowerCase().includes(f)||((w=u.telefone)==null?void 0:w.toLowerCase().includes(f))||((y=u.email)==null?void 0:y.toLowerCase().includes(f))}),p=u=>{if(u.preventDefault(),!e)return;const f={id:(l==null?void 0:l.id)||Date.now().toString(),usuario_id:e.id,nome:d.nome,telefone:d.telefone,whatsapp:d.whatsapp,email:d.email,endereco_completo:d.endereco_completo,data_nascimento:d.data_nascimento,observacoes:d.observacoes,criado_em:(l==null?void 0:l.criado_em)||new Date().toISOString(),ativo:!0,historico_pedidos:(l==null?void 0:l.historico_pedidos)||0,valor_total_gasto:(l==null?void 0:l.valor_total_gasto)||0};let w;l?w=t.map(S=>S.id===l.id?f:S):w=[...t,f],s(w);const C=G(F.CLIENTES,[]).filter(S=>S.usuario_id!==e.id);Se(F.CLIENTES,[...C,...w]),b()},b=()=>{h({nome:"",telefone:"",whatsapp:"",email:"",endereco_completo:"",data_nascimento:"",observacoes:""}),c(null),i(!1)},x=u=>{h({nome:u.nome,telefone:u.telefone||"",whatsapp:u.whatsapp||"",email:u.email||"",endereco_completo:u.endereco_completo||"",data_nascimento:u.data_nascimento||"",observacoes:u.observacoes||""}),c(u),i(!0)},j=u=>{if(window.confirm("Tem certeza que deseja excluir este cliente?")){const f=t.map(C=>C.id===u?{...C,ativo:!1}:C);s(f.filter(C=>C.ativo));const y=G(F.CLIENTES,[]).map(C=>C.id===u?{...C,ativo:!1}:C);Se(F.CLIENTES,y)}},_=u=>{const f=u.replace(/\D/g,"");return f.length===11?`(${f.slice(0,2)}) ${f.slice(2,7)}-${f.slice(7)}`:u},v=(u,f)=>{const w=u.replace(/\D/g,""),y=encodeURIComponent(`Ol ${f}! Tudo bem?`);window.open(`https://wa.me/55${w}?text=${y}`,"_blank")},g=u=>{if(!u)return null;const f=new Date,w=new Date(u);let y=f.getFullYear()-w.getFullYear();const C=f.getMonth()-w.getMonth();return(C<0||C===0&&f.getDate()<w.getDate())&&y--,y};return r.jsx("div",{className:"min-h-screen bg-background",children:r.jsxs("div",{className:"container mx-auto px-4 py-6 lg:py-8",children:[r.jsxs("div",{className:"mb-6 lg:mb-8 flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(q,{to:"/dashboard",className:"p-2 hover:bg-muted rounded-lg transition-colors",children:r.jsx(ye,{className:"h-6 w-6"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-foreground mb-1 lg:mb-2",children:"Clientes"}),r.jsx("p",{className:"text-muted-foreground text-sm lg:text-base",children:"Gerencie seus clientes e histrico de pedidos"})]})]}),r.jsxs("button",{onClick:()=>i(!0),className:"flex items-center justify-center space-x-2 bg-primary text-primary-foreground px-6 py-3 rounded-lg hover:bg-primary/90 transition-colors",children:[r.jsx(_t,{className:"h-5 w-5"}),r.jsx("span",{children:"Novo Cliente"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 lg:gap-6 mb-6 lg:mb-8",children:[r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total de Clientes"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.length})]}),r.jsx(bs,{className:"h-8 w-8 text-purple-500"})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Clientes Ativos"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(u=>u.historico_pedidos>0).length})]}),r.jsx($p,{className:"h-8 w-8 text-green-500"})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Com WhatsApp"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(u=>u.whatsapp).length})]}),r.jsx(_s,{className:"h-8 w-8 text-green-500"})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Valor Total"}),r.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["R$ ",t.reduce((u,f)=>u+f.valor_total_gasto,0).toFixed(2)]})]}),r.jsx(Ao,{className:"h-8 w-8 text-blue-500"})]})})]}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md mb-8",children:r.jsxs("div",{className:"relative",children:[r.jsx(Kt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Buscar clientes por nome, telefone ou email...",value:a,onChange:u=>n(u.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"})]})}),m.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"text-gray-400 mb-4",children:r.jsx(bs,{className:"h-16 w-16 mx-auto"})}),r.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:t.length===0?"Nenhum cliente cadastrado":"Nenhum cliente encontrado"}),r.jsx("p",{className:"text-gray-500 mb-6",children:t.length===0?"Comece adicionando seu primeiro cliente!":"Tente ajustar os termos de busca."}),t.length===0&&r.jsx("button",{onClick:()=>i(!0),className:"bg-purple-500 text-white px-6 py-3 rounded-lg hover:bg-purple-600 transition-colors",children:"Adicionar primeiro cliente"})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 lg:gap-6",children:m.map(u=>{const f=g(u.data_nascimento||"");return r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center",children:r.jsx(bs,{className:"h-6 w-6 text-purple-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:u.nome}),f&&r.jsxs("p",{className:"text-sm text-gray-500",children:[f," anos"]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{onClick:()=>x(u),className:"text-gray-400 hover:text-blue-500 transition-colors",children:r.jsx(Tr,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>j(u.id),className:"text-gray-400 hover:text-red-500 transition-colors",children:r.jsx(Js,{className:"h-4 w-4"})})]})]}),r.jsxs("div",{className:"space-y-2 mb-4",children:[u.telefone&&r.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[r.jsx(Vp,{className:"h-4 w-4"}),r.jsx("span",{children:_(u.telefone)})]}),u.email&&r.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[r.jsx(Ao,{className:"h-4 w-4"}),r.jsx("span",{children:u.email})]}),u.whatsapp&&r.jsxs("button",{onClick:()=>v(u.whatsapp,u.nome),className:"flex items-center space-x-2 text-sm text-green-600 hover:text-green-700",children:[r.jsx(_s,{className:"h-4 w-4"}),r.jsx("span",{children:"WhatsApp"})]})]}),r.jsx("div",{className:"border-t pt-4",children:r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-lg font-semibold text-gray-900",children:u.historico_pedidos}),r.jsx("p",{className:"text-xs text-gray-500",children:"Pedidos"})]}),r.jsxs("div",{children:[r.jsxs("p",{className:"text-lg font-semibold text-green-600",children:["R$ ",u.valor_total_gasto.toFixed(2)]}),r.jsx("p",{className:"text-xs text-gray-500",children:"Total Gasto"})]})]})}),u.observacoes&&r.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:r.jsx("p",{className:"text-sm text-gray-600",children:u.observacoes})})]},u.id)})}),o&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-2xl w-full m-4 max-h-screen overflow-y-auto",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:l?"Editar Cliente":"Novo Cliente"}),r.jsxs("form",{onSubmit:p,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome Completo *"}),r.jsx("input",{type:"text",value:d.nome,onChange:u=>h({...d,nome:u.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telefone"}),r.jsx("input",{type:"tel",value:d.telefone,onChange:u=>h({...d,telefone:u.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"(11) 99999-9999"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"WhatsApp"}),r.jsx("input",{type:"tel",value:d.whatsapp,onChange:u=>h({...d,whatsapp:u.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"(11) 99999-9999"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),r.jsx("input",{type:"email",value:d.email,onChange:u=>h({...d,email:u.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data de Nascimento"}),r.jsx("input",{type:"date",value:d.data_nascimento,onChange:u=>h({...d,data_nascimento:u.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Endereo Completo"}),r.jsx("textarea",{value:d.endereco_completo,onChange:u=>h({...d,endereco_completo:u.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",rows:2})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observaes"}),r.jsx("textarea",{value:d.observacoes,onChange:u=>h({...d,observacoes:u.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",rows:3,placeholder:"Preferncias, alergias, informaes importantes..."})]}),r.jsxs("div",{className:"flex justify-end space-x-4 mt-6",children:[r.jsx("button",{type:"button",onClick:b,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancelar"}),r.jsx("button",{type:"submit",className:"px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600",children:l?"Salvar Alteraes":"Adicionar Cliente"})]})]})]})})]})})}var xn={},Vw=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},og={},nt={};let Pd;const Hw=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];nt.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17};nt.getSymbolTotalCodewords=function(t){return Hw[t]};nt.getBCHDigit=function(e){let t=0;for(;e!==0;)t++,e>>>=1;return t};nt.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');Pd=t};nt.isKanjiModeEnabled=function(){return typeof Pd<"u"};nt.toSJIS=function(t){return Pd(t)};var di={};(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function t(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+s)}}e.isValid=function(a){return a&&typeof a.bit<"u"&&a.bit>=0&&a.bit<4},e.from=function(a,n){if(e.isValid(a))return a;try{return t(a)}catch{return n}}})(di);function ig(){this.buffer=[],this.length=0}ig.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let s=0;s<t;s++)this.putBit((e>>>t-s-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var Gw=ig;function vn(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}vn.prototype.set=function(e,t,s,a){const n=e*this.size+t;this.data[n]=s,a&&(this.reservedBit[n]=!0)};vn.prototype.get=function(e,t){return this.data[e*this.size+t]};vn.prototype.xor=function(e,t,s){this.data[e*this.size+t]^=s};vn.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]};var Ww=vn,lg={};(function(e){const t=nt.getSymbolSize;e.getRowColCoords=function(a){if(a===1)return[];const n=Math.floor(a/7)+2,o=t(a),i=o===145?26:Math.ceil((o-13)/(2*n-2))*2,l=[o-7];for(let c=1;c<n-1;c++)l[c]=l[c-1]-i;return l.push(6),l.reverse()},e.getPositions=function(a){const n=[],o=e.getRowColCoords(a),i=o.length;for(let l=0;l<i;l++)for(let c=0;c<i;c++)l===0&&c===0||l===0&&c===i-1||l===i-1&&c===0||n.push([o[l],o[c]]);return n}})(lg);var cg={};const Kw=nt.getSymbolSize,$h=7;cg.getPositions=function(t){const s=Kw(t);return[[0,0],[s-$h,0],[0,s-$h]]};var dg={};(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};e.isValid=function(n){return n!=null&&n!==""&&!isNaN(n)&&n>=0&&n<=7},e.from=function(n){return e.isValid(n)?parseInt(n,10):void 0},e.getPenaltyN1=function(n){const o=n.size;let i=0,l=0,c=0,d=null,h=null;for(let m=0;m<o;m++){l=c=0,d=h=null;for(let p=0;p<o;p++){let b=n.get(m,p);b===d?l++:(l>=5&&(i+=t.N1+(l-5)),d=b,l=1),b=n.get(p,m),b===h?c++:(c>=5&&(i+=t.N1+(c-5)),h=b,c=1)}l>=5&&(i+=t.N1+(l-5)),c>=5&&(i+=t.N1+(c-5))}return i},e.getPenaltyN2=function(n){const o=n.size;let i=0;for(let l=0;l<o-1;l++)for(let c=0;c<o-1;c++){const d=n.get(l,c)+n.get(l,c+1)+n.get(l+1,c)+n.get(l+1,c+1);(d===4||d===0)&&i++}return i*t.N2},e.getPenaltyN3=function(n){const o=n.size;let i=0,l=0,c=0;for(let d=0;d<o;d++){l=c=0;for(let h=0;h<o;h++)l=l<<1&2047|n.get(d,h),h>=10&&(l===1488||l===93)&&i++,c=c<<1&2047|n.get(h,d),h>=10&&(c===1488||c===93)&&i++}return i*t.N3},e.getPenaltyN4=function(n){let o=0;const i=n.data.length;for(let c=0;c<i;c++)o+=n.data[c];return Math.abs(Math.ceil(o*100/i/5)-10)*t.N4};function s(a,n,o){switch(a){case e.Patterns.PATTERN000:return(n+o)%2===0;case e.Patterns.PATTERN001:return n%2===0;case e.Patterns.PATTERN010:return o%3===0;case e.Patterns.PATTERN011:return(n+o)%3===0;case e.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(o/3))%2===0;case e.Patterns.PATTERN101:return n*o%2+n*o%3===0;case e.Patterns.PATTERN110:return(n*o%2+n*o%3)%2===0;case e.Patterns.PATTERN111:return(n*o%3+(n+o)%2)%2===0;default:throw new Error("bad maskPattern:"+a)}}e.applyMask=function(n,o){const i=o.size;for(let l=0;l<i;l++)for(let c=0;c<i;c++)o.isReserved(c,l)||o.xor(c,l,s(n,c,l))},e.getBestMask=function(n,o){const i=Object.keys(e.Patterns).length;let l=0,c=1/0;for(let d=0;d<i;d++){o(d),e.applyMask(d,n);const h=e.getPenaltyN1(n)+e.getPenaltyN2(n)+e.getPenaltyN3(n)+e.getPenaltyN4(n);e.applyMask(d,n),h<c&&(c=h,l=d)}return l}})(dg);var ui={};const ds=di,Fn=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],zn=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];ui.getBlocksCount=function(t,s){switch(s){case ds.L:return Fn[(t-1)*4+0];case ds.M:return Fn[(t-1)*4+1];case ds.Q:return Fn[(t-1)*4+2];case ds.H:return Fn[(t-1)*4+3];default:return}};ui.getTotalCodewordsCount=function(t,s){switch(s){case ds.L:return zn[(t-1)*4+0];case ds.M:return zn[(t-1)*4+1];case ds.Q:return zn[(t-1)*4+2];case ds.H:return zn[(t-1)*4+3];default:return}};var ug={},hi={};const Ra=new Uint8Array(512),Do=new Uint8Array(256);(function(){let t=1;for(let s=0;s<255;s++)Ra[s]=t,Do[t]=s,t<<=1,t&256&&(t^=285);for(let s=255;s<512;s++)Ra[s]=Ra[s-255]})();hi.log=function(t){if(t<1)throw new Error("log("+t+")");return Do[t]};hi.exp=function(t){return Ra[t]};hi.mul=function(t,s){return t===0||s===0?0:Ra[Do[t]+Do[s]]};(function(e){const t=hi;e.mul=function(a,n){const o=new Uint8Array(a.length+n.length-1);for(let i=0;i<a.length;i++)for(let l=0;l<n.length;l++)o[i+l]^=t.mul(a[i],n[l]);return o},e.mod=function(a,n){let o=new Uint8Array(a);for(;o.length-n.length>=0;){const i=o[0];for(let c=0;c<n.length;c++)o[c]^=t.mul(n[c],i);let l=0;for(;l<o.length&&o[l]===0;)l++;o=o.slice(l)}return o},e.generateECPolynomial=function(a){let n=new Uint8Array([1]);for(let o=0;o<a;o++)n=e.mul(n,new Uint8Array([1,t.exp(o)]));return n}})(ug);const hg=ug;function Td(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}Td.prototype.initialize=function(t){this.degree=t,this.genPoly=hg.generateECPolynomial(this.degree)};Td.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const s=new Uint8Array(t.length+this.degree);s.set(t);const a=hg.mod(s,this.genPoly),n=this.degree-a.length;if(n>0){const o=new Uint8Array(this.degree);return o.set(a,n),o}return a};var Jw=Td,mg={},Ts={},Rd={};Rd.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40};var Lt={};const fg="[0-9]+",Qw="[A-Z $%*+\\-./:]+";let an="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";an=an.replace(/u/g,"\\u");const Yw="(?:(?![A-Z0-9 $%*+\\-./:]|"+an+`)(?:.|[\r
]))+`;Lt.KANJI=new RegExp(an,"g");Lt.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Lt.BYTE=new RegExp(Yw,"g");Lt.NUMERIC=new RegExp(fg,"g");Lt.ALPHANUMERIC=new RegExp(Qw,"g");const Xw=new RegExp("^"+an+"$"),Zw=new RegExp("^"+fg+"$"),e1=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Lt.testKanji=function(t){return Xw.test(t)};Lt.testNumeric=function(t){return Zw.test(t)};Lt.testAlphanumeric=function(t){return e1.test(t)};(function(e){const t=Rd,s=Lt;e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(o,i){if(!o.ccBits)throw new Error("Invalid mode: "+o);if(!t.isValid(i))throw new Error("Invalid version: "+i);return i>=1&&i<10?o.ccBits[0]:i<27?o.ccBits[1]:o.ccBits[2]},e.getBestModeForData=function(o){return s.testNumeric(o)?e.NUMERIC:s.testAlphanumeric(o)?e.ALPHANUMERIC:s.testKanji(o)?e.KANJI:e.BYTE},e.toString=function(o){if(o&&o.id)return o.id;throw new Error("Invalid mode")},e.isValid=function(o){return o&&o.bit&&o.ccBits};function a(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+n)}}e.from=function(o,i){if(e.isValid(o))return o;try{return a(o)}catch{return i}}})(Ts);(function(e){const t=nt,s=ui,a=di,n=Ts,o=Rd,i=7973,l=t.getBCHDigit(i);function c(p,b,x){for(let j=1;j<=40;j++)if(b<=e.getCapacity(j,x,p))return j}function d(p,b){return n.getCharCountIndicator(p,b)+4}function h(p,b){let x=0;return p.forEach(function(j){const _=d(j.mode,b);x+=_+j.getBitsLength()}),x}function m(p,b){for(let x=1;x<=40;x++)if(h(p,x)<=e.getCapacity(x,b,n.MIXED))return x}e.from=function(b,x){return o.isValid(b)?parseInt(b,10):x},e.getCapacity=function(b,x,j){if(!o.isValid(b))throw new Error("Invalid QR Code version");typeof j>"u"&&(j=n.BYTE);const _=t.getSymbolTotalCodewords(b),v=s.getTotalCodewordsCount(b,x),g=(_-v)*8;if(j===n.MIXED)return g;const u=g-d(j,b);switch(j){case n.NUMERIC:return Math.floor(u/10*3);case n.ALPHANUMERIC:return Math.floor(u/11*2);case n.KANJI:return Math.floor(u/13);case n.BYTE:default:return Math.floor(u/8)}},e.getBestVersionForData=function(b,x){let j;const _=a.from(x,a.M);if(Array.isArray(b)){if(b.length>1)return m(b,_);if(b.length===0)return 1;j=b[0]}else j=b;return c(j.mode,j.getLength(),_)},e.getEncodedBits=function(b){if(!o.isValid(b)||b<7)throw new Error("Invalid QR Code version");let x=b<<12;for(;t.getBCHDigit(x)-l>=0;)x^=i<<t.getBCHDigit(x)-l;return b<<12|x}})(mg);var pg={};const gc=nt,gg=1335,t1=21522,Uh=gc.getBCHDigit(gg);pg.getEncodedBits=function(t,s){const a=t.bit<<3|s;let n=a<<10;for(;gc.getBCHDigit(n)-Uh>=0;)n^=gg<<gc.getBCHDigit(n)-Uh;return(a<<10|n)^t1};var xg={};const s1=Ts;function qr(e){this.mode=s1.NUMERIC,this.data=e.toString()}qr.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};qr.prototype.getLength=function(){return this.data.length};qr.prototype.getBitsLength=function(){return qr.getBitsLength(this.data.length)};qr.prototype.write=function(t){let s,a,n;for(s=0;s+3<=this.data.length;s+=3)a=this.data.substr(s,3),n=parseInt(a,10),t.put(n,10);const o=this.data.length-s;o>0&&(a=this.data.substr(s),n=parseInt(a,10),t.put(n,o*3+1))};var r1=qr;const a1=Ts,Qi=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Vr(e){this.mode=a1.ALPHANUMERIC,this.data=e}Vr.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)};Vr.prototype.getLength=function(){return this.data.length};Vr.prototype.getBitsLength=function(){return Vr.getBitsLength(this.data.length)};Vr.prototype.write=function(t){let s;for(s=0;s+2<=this.data.length;s+=2){let a=Qi.indexOf(this.data[s])*45;a+=Qi.indexOf(this.data[s+1]),t.put(a,11)}this.data.length%2&&t.put(Qi.indexOf(this.data[s]),6)};var n1=Vr;const o1=Ts;function Hr(e){this.mode=o1.BYTE,typeof e=="string"?this.data=new TextEncoder().encode(e):this.data=new Uint8Array(e)}Hr.getBitsLength=function(t){return t*8};Hr.prototype.getLength=function(){return this.data.length};Hr.prototype.getBitsLength=function(){return Hr.getBitsLength(this.data.length)};Hr.prototype.write=function(e){for(let t=0,s=this.data.length;t<s;t++)e.put(this.data[t],8)};var i1=Hr;const l1=Ts,c1=nt;function Gr(e){this.mode=l1.KANJI,this.data=e}Gr.getBitsLength=function(t){return t*13};Gr.prototype.getLength=function(){return this.data.length};Gr.prototype.getBitsLength=function(){return Gr.getBitsLength(this.data.length)};Gr.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let s=c1.toSJIS(this.data[t]);if(s>=33088&&s<=40956)s-=33088;else if(s>=57408&&s<=60351)s-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);s=(s>>>8&255)*192+(s&255),e.put(s,13)}};var d1=Gr,vg={exports:{}};(function(e){var t={single_source_shortest_paths:function(s,a,n){var o={},i={};i[a]=0;var l=t.PriorityQueue.make();l.push(a,0);for(var c,d,h,m,p,b,x,j,_;!l.empty();){c=l.pop(),d=c.value,m=c.cost,p=s[d]||{};for(h in p)p.hasOwnProperty(h)&&(b=p[h],x=m+b,j=i[h],_=typeof i[h]>"u",(_||j>x)&&(i[h]=x,l.push(h,x),o[h]=d))}if(typeof n<"u"&&typeof i[n]>"u"){var v=["Could not find a path from ",a," to ",n,"."].join("");throw new Error(v)}return o},extract_shortest_path_from_predecessor_list:function(s,a){for(var n=[],o=a;o;)n.push(o),s[o],o=s[o];return n.reverse(),n},find_path:function(s,a,n){var o=t.single_source_shortest_paths(s,a,n);return t.extract_shortest_path_from_predecessor_list(o,n)},PriorityQueue:{make:function(s){var a=t.PriorityQueue,n={},o;s=s||{};for(o in a)a.hasOwnProperty(o)&&(n[o]=a[o]);return n.queue=[],n.sorter=s.sorter||a.default_sorter,n},default_sorter:function(s,a){return s.cost-a.cost},push:function(s,a){var n={value:s,cost:a};this.queue.push(n),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=t})(vg);var u1=vg.exports;(function(e){const t=Ts,s=r1,a=n1,n=i1,o=d1,i=Lt,l=nt,c=u1;function d(v){return unescape(encodeURIComponent(v)).length}function h(v,g,u){const f=[];let w;for(;(w=v.exec(u))!==null;)f.push({data:w[0],index:w.index,mode:g,length:w[0].length});return f}function m(v){const g=h(i.NUMERIC,t.NUMERIC,v),u=h(i.ALPHANUMERIC,t.ALPHANUMERIC,v);let f,w;return l.isKanjiModeEnabled()?(f=h(i.BYTE,t.BYTE,v),w=h(i.KANJI,t.KANJI,v)):(f=h(i.BYTE_KANJI,t.BYTE,v),w=[]),g.concat(u,f,w).sort(function(C,S){return C.index-S.index}).map(function(C){return{data:C.data,mode:C.mode,length:C.length}})}function p(v,g){switch(g){case t.NUMERIC:return s.getBitsLength(v);case t.ALPHANUMERIC:return a.getBitsLength(v);case t.KANJI:return o.getBitsLength(v);case t.BYTE:return n.getBitsLength(v)}}function b(v){return v.reduce(function(g,u){const f=g.length-1>=0?g[g.length-1]:null;return f&&f.mode===u.mode?(g[g.length-1].data+=u.data,g):(g.push(u),g)},[])}function x(v){const g=[];for(let u=0;u<v.length;u++){const f=v[u];switch(f.mode){case t.NUMERIC:g.push([f,{data:f.data,mode:t.ALPHANUMERIC,length:f.length},{data:f.data,mode:t.BYTE,length:f.length}]);break;case t.ALPHANUMERIC:g.push([f,{data:f.data,mode:t.BYTE,length:f.length}]);break;case t.KANJI:g.push([f,{data:f.data,mode:t.BYTE,length:d(f.data)}]);break;case t.BYTE:g.push([{data:f.data,mode:t.BYTE,length:d(f.data)}])}}return g}function j(v,g){const u={},f={start:{}};let w=["start"];for(let y=0;y<v.length;y++){const C=v[y],S=[];for(let I=0;I<C.length;I++){const L=C[I],K=""+y+I;S.push(K),u[K]={node:L,lastCount:0},f[K]={};for(let se=0;se<w.length;se++){const he=w[se];u[he]&&u[he].node.mode===L.mode?(f[he][K]=p(u[he].lastCount+L.length,L.mode)-p(u[he].lastCount,L.mode),u[he].lastCount+=L.length):(u[he]&&(u[he].lastCount=L.length),f[he][K]=p(L.length,L.mode)+4+t.getCharCountIndicator(L.mode,g))}}w=S}for(let y=0;y<w.length;y++)f[w[y]].end=0;return{map:f,table:u}}function _(v,g){let u;const f=t.getBestModeForData(v);if(u=t.from(g,f),u!==t.BYTE&&u.bit<f.bit)throw new Error('"'+v+'" cannot be encoded with mode '+t.toString(u)+`.
 Suggested mode is: `+t.toString(f));switch(u===t.KANJI&&!l.isKanjiModeEnabled()&&(u=t.BYTE),u){case t.NUMERIC:return new s(v);case t.ALPHANUMERIC:return new a(v);case t.KANJI:return new o(v);case t.BYTE:return new n(v)}}e.fromArray=function(g){return g.reduce(function(u,f){return typeof f=="string"?u.push(_(f,null)):f.data&&u.push(_(f.data,f.mode)),u},[])},e.fromString=function(g,u){const f=m(g,l.isKanjiModeEnabled()),w=x(f),y=j(w,u),C=c.find_path(y.map,"start","end"),S=[];for(let I=1;I<C.length-1;I++)S.push(y.table[C[I]].node);return e.fromArray(b(S))},e.rawSplit=function(g){return e.fromArray(m(g,l.isKanjiModeEnabled()))}})(xg);const mi=nt,Yi=di,h1=Gw,m1=Ww,f1=lg,p1=cg,xc=dg,vc=ui,g1=Jw,$o=mg,x1=pg,v1=Ts,Xi=xg;function y1(e,t){const s=e.size,a=p1.getPositions(t);for(let n=0;n<a.length;n++){const o=a[n][0],i=a[n][1];for(let l=-1;l<=7;l++)if(!(o+l<=-1||s<=o+l))for(let c=-1;c<=7;c++)i+c<=-1||s<=i+c||(l>=0&&l<=6&&(c===0||c===6)||c>=0&&c<=6&&(l===0||l===6)||l>=2&&l<=4&&c>=2&&c<=4?e.set(o+l,i+c,!0,!0):e.set(o+l,i+c,!1,!0))}}function b1(e){const t=e.size;for(let s=8;s<t-8;s++){const a=s%2===0;e.set(s,6,a,!0),e.set(6,s,a,!0)}}function j1(e,t){const s=f1.getPositions(t);for(let a=0;a<s.length;a++){const n=s[a][0],o=s[a][1];for(let i=-2;i<=2;i++)for(let l=-2;l<=2;l++)i===-2||i===2||l===-2||l===2||i===0&&l===0?e.set(n+i,o+l,!0,!0):e.set(n+i,o+l,!1,!0)}}function w1(e,t){const s=e.size,a=$o.getEncodedBits(t);let n,o,i;for(let l=0;l<18;l++)n=Math.floor(l/3),o=l%3+s-8-3,i=(a>>l&1)===1,e.set(n,o,i,!0),e.set(o,n,i,!0)}function Zi(e,t,s){const a=e.size,n=x1.getEncodedBits(t,s);let o,i;for(o=0;o<15;o++)i=(n>>o&1)===1,o<6?e.set(o,8,i,!0):o<8?e.set(o+1,8,i,!0):e.set(a-15+o,8,i,!0),o<8?e.set(8,a-o-1,i,!0):o<9?e.set(8,15-o-1+1,i,!0):e.set(8,15-o-1,i,!0);e.set(a-8,8,1,!0)}function N1(e,t){const s=e.size;let a=-1,n=s-1,o=7,i=0;for(let l=s-1;l>0;l-=2)for(l===6&&l--;;){for(let c=0;c<2;c++)if(!e.isReserved(n,l-c)){let d=!1;i<t.length&&(d=(t[i]>>>o&1)===1),e.set(n,l-c,d),o--,o===-1&&(i++,o=7)}if(n+=a,n<0||s<=n){n-=a,a=-a;break}}}function _1(e,t,s){const a=new h1;s.forEach(function(c){a.put(c.mode.bit,4),a.put(c.getLength(),v1.getCharCountIndicator(c.mode,e)),c.write(a)});const n=mi.getSymbolTotalCodewords(e),o=vc.getTotalCodewordsCount(e,t),i=(n-o)*8;for(a.getLengthInBits()+4<=i&&a.put(0,4);a.getLengthInBits()%8!==0;)a.putBit(0);const l=(i-a.getLengthInBits())/8;for(let c=0;c<l;c++)a.put(c%2?17:236,8);return C1(a,e,t)}function C1(e,t,s){const a=mi.getSymbolTotalCodewords(t),n=vc.getTotalCodewordsCount(t,s),o=a-n,i=vc.getBlocksCount(t,s),l=a%i,c=i-l,d=Math.floor(a/i),h=Math.floor(o/i),m=h+1,p=d-h,b=new g1(p);let x=0;const j=new Array(i),_=new Array(i);let v=0;const g=new Uint8Array(e.buffer);for(let C=0;C<i;C++){const S=C<c?h:m;j[C]=g.slice(x,x+S),_[C]=b.encode(j[C]),x+=S,v=Math.max(v,S)}const u=new Uint8Array(a);let f=0,w,y;for(w=0;w<v;w++)for(y=0;y<i;y++)w<j[y].length&&(u[f++]=j[y][w]);for(w=0;w<p;w++)for(y=0;y<i;y++)u[f++]=_[y][w];return u}function k1(e,t,s,a){let n;if(Array.isArray(e))n=Xi.fromArray(e);else if(typeof e=="string"){let d=t;if(!d){const h=Xi.rawSplit(e);d=$o.getBestVersionForData(h,s)}n=Xi.fromString(e,d||40)}else throw new Error("Invalid data");const o=$o.getBestVersionForData(n,s);if(!o)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=o;else if(t<o)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+o+`.
`);const i=_1(t,s,n),l=mi.getSymbolSize(t),c=new m1(l);return y1(c,t),b1(c),j1(c,t),Zi(c,s,0),t>=7&&w1(c,t),N1(c,i),isNaN(a)&&(a=xc.getBestMask(c,Zi.bind(null,c,s))),xc.applyMask(a,c),Zi(c,s,a),{modules:c,version:t,errorCorrectionLevel:s,maskPattern:a,segments:n}}og.create=function(t,s){if(typeof t>"u"||t==="")throw new Error("No input text");let a=Yi.M,n,o;return typeof s<"u"&&(a=Yi.from(s.errorCorrectionLevel,Yi.M),n=$o.from(s.version),o=xc.from(s.maskPattern),s.toSJISFunc&&mi.setToSJISFunction(s.toSJISFunc)),k1(t,n,a,o)};var yg={},Id={};(function(e){function t(s){if(typeof s=="number"&&(s=s.toString()),typeof s!="string")throw new Error("Color should be defined as hex string");let a=s.slice().replace("#","").split("");if(a.length<3||a.length===5||a.length>8)throw new Error("Invalid hex color: "+s);(a.length===3||a.length===4)&&(a=Array.prototype.concat.apply([],a.map(function(o){return[o,o]}))),a.length===6&&a.push("F","F");const n=parseInt(a.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:n&255,hex:"#"+a.slice(0,6).join("")}}e.getOptions=function(a){a||(a={}),a.color||(a.color={});const n=typeof a.margin>"u"||a.margin===null||a.margin<0?4:a.margin,o=a.width&&a.width>=21?a.width:void 0,i=a.scale||4;return{width:o,scale:o?4:i,margin:n,color:{dark:t(a.color.dark||"#000000ff"),light:t(a.color.light||"#ffffffff")},type:a.type,rendererOpts:a.rendererOpts||{}}},e.getScale=function(a,n){return n.width&&n.width>=a+n.margin*2?n.width/(a+n.margin*2):n.scale},e.getImageWidth=function(a,n){const o=e.getScale(a,n);return Math.floor((a+n.margin*2)*o)},e.qrToImageData=function(a,n,o){const i=n.modules.size,l=n.modules.data,c=e.getScale(i,o),d=Math.floor((i+o.margin*2)*c),h=o.margin*c,m=[o.color.light,o.color.dark];for(let p=0;p<d;p++)for(let b=0;b<d;b++){let x=(p*d+b)*4,j=o.color.light;if(p>=h&&b>=h&&p<d-h&&b<d-h){const _=Math.floor((p-h)/c),v=Math.floor((b-h)/c);j=m[l[_*i+v]?1:0]}a[x++]=j.r,a[x++]=j.g,a[x++]=j.b,a[x]=j.a}}})(Id);(function(e){const t=Id;function s(n,o,i){n.clearRect(0,0,o.width,o.height),o.style||(o.style={}),o.height=i,o.width=i,o.style.height=i+"px",o.style.width=i+"px"}function a(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(o,i,l){let c=l,d=i;typeof c>"u"&&(!i||!i.getContext)&&(c=i,i=void 0),i||(d=a()),c=t.getOptions(c);const h=t.getImageWidth(o.modules.size,c),m=d.getContext("2d"),p=m.createImageData(h,h);return t.qrToImageData(p.data,o,c),s(m,d,h),m.putImageData(p,0,0),d},e.renderToDataURL=function(o,i,l){let c=l;typeof c>"u"&&(!i||!i.getContext)&&(c=i,i=void 0),c||(c={});const d=e.render(o,i,c),h=c.type||"image/png",m=c.rendererOpts||{};return d.toDataURL(h,m.quality)}})(yg);var bg={};const S1=Id;function Fh(e,t){const s=e.a/255,a=t+'="'+e.hex+'"';return s<1?a+" "+t+'-opacity="'+s.toFixed(2).slice(1)+'"':a}function el(e,t,s){let a=e+t;return typeof s<"u"&&(a+=" "+s),a}function E1(e,t,s){let a="",n=0,o=!1,i=0;for(let l=0;l<e.length;l++){const c=Math.floor(l%t),d=Math.floor(l/t);!c&&!o&&(o=!0),e[l]?(i++,l>0&&c>0&&e[l-1]||(a+=o?el("M",c+s,.5+d+s):el("m",n,0),n=0,o=!1),c+1<t&&e[l+1]||(a+=el("h",i),i=0)):n++}return a}bg.render=function(t,s,a){const n=S1.getOptions(s),o=t.modules.size,i=t.modules.data,l=o+n.margin*2,c=n.color.light.a?"<path "+Fh(n.color.light,"fill")+' d="M0 0h'+l+"v"+l+'H0z"/>':"",d="<path "+Fh(n.color.dark,"stroke")+' d="'+E1(i,o,n.margin)+'"/>',h='viewBox="0 0 '+l+" "+l+'"',p='<svg xmlns="http://www.w3.org/2000/svg" '+(n.width?'width="'+n.width+'" height="'+n.width+'" ':"")+h+' shape-rendering="crispEdges">'+c+d+`</svg>
`;return typeof a=="function"&&a(null,p),p};const P1=Vw,yc=og,jg=yg,T1=bg;function Ad(e,t,s,a,n){const o=[].slice.call(arguments,1),i=o.length,l=typeof o[i-1]=="function";if(!l&&!P1())throw new Error("Callback required as last argument");if(l){if(i<2)throw new Error("Too few arguments provided");i===2?(n=s,s=t,t=a=void 0):i===3&&(t.getContext&&typeof n>"u"?(n=a,a=void 0):(n=a,a=s,s=t,t=void 0))}else{if(i<1)throw new Error("Too few arguments provided");return i===1?(s=t,t=a=void 0):i===2&&!t.getContext&&(a=s,s=t,t=void 0),new Promise(function(c,d){try{const h=yc.create(s,a);c(e(h,t,a))}catch(h){d(h)}})}try{const c=yc.create(s,a);n(null,e(c,t,a))}catch(c){n(c)}}xn.create=yc.create;xn.toCanvas=Ad.bind(null,jg.render);xn.toDataURL=Ad.bind(null,jg.renderToDataURL);xn.toString=Ad.bind(null,function(e,t,s){return T1.render(e,s)});function R1(){const{user:e}=we(),[t,s]=N.useState([]),[a,n]=N.useState([]),[o,i]=N.useState([]),[l,c]=N.useState(""),[d,h]=N.useState("todos"),[m,p]=N.useState(!1),[b,x]=N.useState(null),[j,_]=N.useState(!1),[v,g]=N.useState(null),[u,f]=N.useState(null),[w,y]=N.useState({cliente_id:"",cliente_nome_avulso:"",descricao:"",observacoes:"",data_validade:"",incluir_qr_code:!0}),[C,S]=N.useState([]);N.useEffect(()=>{if(e){const k=G(F.ORCAMENTOS,[]),B=G(F.CLIENTES,[]),T=G(F.RECEITAS,[]);s(k.filter(M=>M.usuario_id===e.id)),n(B.filter(M=>M.usuario_id===e.id&&M.ativo)),i(T.filter(M=>M.usuario_id===e.id&&M.ativo))}},[e]);const I=t.filter(k=>{var W;const B=a.find(Ge=>Ge.id===k.cliente_id),T=(B==null?void 0:B.nome)||k.cliente_nome_avulso||"Cliente no informado",M=k.numero_orcamento.toLowerCase().includes(l.toLowerCase())||T.toLowerCase().includes(l.toLowerCase())||((W=k.descricao)==null?void 0:W.toLowerCase().includes(l.toLowerCase())),$=d==="todos"||k.status===d;return M&&$}),L=k=>{switch(k){case"rascunho":return"text-gray-600 bg-gray-100";case"enviado":return"text-blue-600 bg-blue-100";case"aprovado":return"text-green-600 bg-green-100";case"rejeitado":return"text-red-600 bg-red-100";case"expirado":return"text-orange-600 bg-orange-100";default:return"text-gray-600 bg-gray-100"}},K=k=>{switch(k){case"rascunho":return r.jsx(Tr,{className:"h-4 w-4"});case"enviado":return r.jsx(Ea,{className:"h-4 w-4"});case"aprovado":return r.jsx(Bs,{className:"h-4 w-4"});case"rejeitado":return r.jsx(Jt,{className:"h-4 w-4"});case"expirado":return r.jsx(ea,{className:"h-4 w-4"});default:return r.jsx(Rt,{className:"h-4 w-4"})}},se=k=>k.reduce((B,T)=>B+T.valor_total,0),he=k=>{if(k.preventDefault(),!e||C.length===0)return;const B=se(C),T=(b==null?void 0:b.numero_orcamento)||`ORC-${Date.now().toString().slice(-6)}`,M={id:(b==null?void 0:b.id)||Date.now().toString(),usuario_id:e.id,cliente_id:w.cliente_id||"",cliente_nome_avulso:w.cliente_nome_avulso,numero_orcamento:T,data_criacao:(b==null?void 0:b.data_criacao)||new Date().toISOString(),data_validade:w.data_validade,status:"rascunho",valor_total:B,descricao:w.descricao,observacoes:w.observacoes,incluir_qr_code:w.incluir_qr_code,itens:C};let $;b?$=t.map(ot=>ot.id===b.id?M:ot):$=[...t,M],s($);const Ge=G(F.ORCAMENTOS,[]).filter(ot=>ot.usuario_id!==e.id);Se(F.ORCAMENTOS,[...Ge,...$]),Ue()},Ue=()=>{y({cliente_id:"",cliente_nome_avulso:"",descricao:"",observacoes:"",data_validade:"",incluir_qr_code:!0}),S([]),x(null),p(!1)},He=k=>{y({cliente_id:k.cliente_id||"",cliente_nome_avulso:k.cliente_nome_avulso||"",descricao:k.descricao||"",observacoes:k.observacoes||"",data_validade:k.data_validade.split("T")[0],incluir_qr_code:k.incluir_qr_code!==!1}),S(k.itens),x(k),p(!0)},E=k=>{if(window.confirm("Tem certeza que deseja excluir este oramento?")){const B=t.filter($=>$.id!==k);s(B);const M=G(F.ORCAMENTOS,[]).filter($=>$.id!==k);Se(F.ORCAMENTOS,M)}},ee=(k,B)=>{const T=t.map(W=>W.id===k?{...W,status:B}:W);s(T);const $=G(F.ORCAMENTOS,[]).map(W=>W.id===k?{...W,status:B}:W);Se(F.ORCAMENTOS,$)},A=()=>{const k={id:Date.now().toString(),orcamento_id:"",receita_id:"",quantidade:1,valor_unitario:0,valor_total:0};S([...C,k])},H=k=>{S(C.filter((B,T)=>T!==k))},V=(k,B,T)=>{const M=[...C];if(M[k]={...M[k],[B]:T},(B==="quantidade"||B==="valor_unitario")&&(M[k].valor_total=M[k].quantidade*M[k].valor_unitario),B==="receita_id"){const $=o.find(W=>W.id===T);$&&$.preco_sugerido&&(M[k].valor_unitario=$.preco_sugerido,M[k].valor_total=M[k].quantidade*$.preco_sugerido)}S(M)},Z=k=>a.find(B=>B.id===k),P=k=>o.find(B=>B.id===k),U=async k=>{try{const B=Z(k.cliente_id),T=(B==null?void 0:B.nome)||k.cliente_nome_avulso||"Cliente no informado";let M=` *ORAMENTO DOCECALC*

`;M+=` *Nmero:* ${k.numero_orcamento}
`,M+=` *Cliente:* ${T}
`,M+=` *Vlido at:* ${new Date(k.data_validade).toLocaleDateString("pt-BR")}

`,k.descricao&&(M+=` *Descrio:* ${k.descricao}

`),M+=` *ITENS:*
`,k.itens.forEach((W,Ge)=>{const ot=P(W.receita_id);M+=`${Ge+1}. ${ot==null?void 0:ot.nome} (${W.quantidade}x) - R$ ${W.valor_total.toFixed(2)}
`}),M+=`
 *VALOR TOTAL: R$ ${k.valor_total.toFixed(2)}*

`,k.observacoes&&(M+=` *Observaes:* ${k.observacoes}

`),M+=" _Oramento gerado pelo DoceCalc_";const $=`https://wa.me/?text=${encodeURIComponent(M)}`;return k.incluir_qr_code?await xn.toDataURL($,{width:300,margin:2,color:{dark:"#000000",light:"#FFFFFF"}}):$}catch(B){return console.error("Erro ao gerar QR Code:",B),null}},z=async k=>{const B=await U(k);B&&typeof B=="string"&&window.open(B,"_blank")},X=async k=>{try{const B=await U(k);B&&typeof B=="string"&&B.startsWith("data:")?(g(B),f(k),_(!0)):z(k)}catch(B){console.error("Erro ao gerar QR Code:",B),z(k)}},le={total:t.length,rascunho:t.filter(k=>k.status==="rascunho").length,enviado:t.filter(k=>k.status==="enviado").length,aprovado:t.filter(k=>k.status==="aprovado").length,valorTotal:t.reduce((k,B)=>k+B.valor_total,0)};return r.jsx("div",{className:"min-h-screen bg-background",children:r.jsxs("div",{className:"container mx-auto px-4 py-6 lg:py-8",children:[r.jsxs("div",{className:"mb-6 lg:mb-8 flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(q,{to:"/dashboard",className:"p-2 hover:bg-muted rounded-lg transition-colors",children:r.jsx(ye,{className:"h-6 w-6"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-foreground mb-1 lg:mb-2",children:"Oramentos"}),r.jsx("p",{className:"text-muted-foreground text-sm lg:text-base",children:"Crie e gerencie oramentos para seus clientes"})]})]}),r.jsxs("button",{onClick:()=>p(!0),className:"flex items-center justify-center space-x-2 bg-primary text-primary-foreground px-6 py-3 rounded-lg hover:bg-primary/90 transition-colors",children:[r.jsx(_t,{className:"h-5 w-5"}),r.jsx("span",{children:"Novo Oramento"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-4 lg:gap-6 mb-6 lg:mb-8",children:[r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:le.total})]}),r.jsx(Rt,{className:"h-8 w-8 text-blue-500"})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Rascunhos"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:le.rascunho})]}),r.jsx(Tr,{className:"h-8 w-8 text-gray-500"})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Enviados"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:le.enviado})]}),r.jsx(Ea,{className:"h-8 w-8 text-blue-500"})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Aprovados"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:le.aprovado})]}),r.jsx(Bs,{className:"h-8 w-8 text-green-500"})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Valor Total"}),r.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["R$ ",le.valorTotal.toFixed(2)]})]}),r.jsx(Za,{className:"h-8 w-8 text-green-500"})]})})]}),r.jsx("div",{className:"bg-card p-4 lg:p-6 rounded-lg shadow-md mb-6 lg:mb-8",children:r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Kt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Buscar oramentos...",value:l,onChange:k=>c(k.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),r.jsxs("select",{value:d,onChange:k=>h(k.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",children:[r.jsx("option",{value:"todos",children:"Todos os status"}),r.jsx("option",{value:"rascunho",children:"Rascunho"}),r.jsx("option",{value:"enviado",children:"Enviado"}),r.jsx("option",{value:"aprovado",children:"Aprovado"}),r.jsx("option",{value:"rejeitado",children:"Rejeitado"}),r.jsx("option",{value:"expirado",children:"Expirado"})]}),r.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[r.jsx(Rt,{className:"h-5 w-5"}),r.jsxs("span",{children:[I.length," oramentos encontrados"]})]})]})}),I.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"text-gray-400 mb-4",children:r.jsx(Rt,{className:"h-16 w-16 mx-auto"})}),r.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:t.length===0?"Nenhum oramento criado":"Nenhum oramento encontrado"}),r.jsx("p",{className:"text-gray-500 mb-6",children:t.length===0?"Comece criando seu primeiro oramento!":"Tente ajustar os filtros para encontrar o que procura."}),t.length===0&&r.jsx("button",{onClick:()=>p(!0),className:"bg-green-500 text-white px-6 py-3 rounded-lg hover:bg-green-600 transition-colors",children:"Criar primeiro oramento"})]}):r.jsx("div",{className:"space-y-4",children:I.map(k=>{const B=Z(k.cliente_id),T=new Date(k.data_validade)<new Date;return r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:r.jsx(Rt,{className:"h-6 w-6 text-green-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:k.numero_orcamento}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(bs,{className:"h-4 w-4 text-gray-400"}),r.jsx("span",{className:"text-gray-600",children:(B==null?void 0:B.nome)||k.cliente_nome_avulso||"Cliente no informado"})]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${L(T&&k.status==="enviado"?"expirado":k.status)}`,children:[K(T&&k.status==="enviado"?"expirado":k.status),r.jsx("span",{className:"ml-1",children:T&&k.status==="enviado"?"Expirado":k.status})]}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx("button",{onClick:()=>X(k),className:"text-green-600 hover:text-green-800 p-1",title:"Compartilhar no WhatsApp",children:r.jsx(_s,{className:"h-4 w-4"})}),k.status==="rascunho"&&r.jsx("button",{onClick:()=>ee(k.id,"enviado"),className:"text-blue-600 hover:text-blue-800 p-1",title:"Enviar oramento",children:r.jsx(Ea,{className:"h-4 w-4"})}),k.status==="enviado"&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>ee(k.id,"aprovado"),className:"text-green-600 hover:text-green-800 p-1",title:"Aprovar oramento",children:r.jsx(Bs,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>ee(k.id,"rejeitado"),className:"text-red-600 hover:text-red-800 p-1",title:"Rejeitar oramento",children:r.jsx(Jt,{className:"h-4 w-4"})})]}),r.jsx("button",{onClick:()=>He(k),className:"text-gray-400 hover:text-blue-500 transition-colors p-1",children:r.jsx(Tr,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>E(k.id),className:"text-gray-400 hover:text-red-500 transition-colors p-1",children:r.jsx(Js,{className:"h-4 w-4"})})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Data de Criao"}),r.jsx("p",{className:"font-medium",children:new Date(k.data_criacao).toLocaleDateString("pt-BR")})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Vlido at"}),r.jsx("p",{className:`font-medium ${T?"text-red-600":""}`,children:new Date(k.data_validade).toLocaleDateString("pt-BR")})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Valor Total"}),r.jsxs("p",{className:"text-lg font-bold text-green-600",children:["R$ ",k.valor_total.toFixed(2)]})]})]}),k.descricao&&r.jsxs("div",{className:"mb-4",children:[r.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Descrio"}),r.jsx("p",{className:"text-gray-900",children:k.descricao})]}),r.jsxs("div",{className:"border-t pt-4",children:[r.jsxs("p",{className:"text-sm font-medium text-gray-700 mb-2",children:["Itens (",k.itens.length,")"]}),r.jsxs("div",{className:"space-y-2",children:[k.itens.slice(0,3).map(M=>{const $=P(M.receita_id);return r.jsxs("div",{className:"flex justify-between items-center text-sm",children:[r.jsxs("span",{children:[$==null?void 0:$.nome," x",M.quantidade]}),r.jsxs("span",{className:"font-medium",children:["R$ ",M.valor_total.toFixed(2)]})]},M.id)}),k.itens.length>3&&r.jsxs("p",{className:"text-sm text-gray-500",children:["+",k.itens.length-3," itens adicionais"]})]})]})]},k.id)})}),m&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-4xl w-full m-4 max-h-screen overflow-y-auto",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:b?"Editar Oramento":"Novo Oramento"}),r.jsxs("form",{onSubmit:he,className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cliente"}),r.jsxs("select",{value:w.cliente_id,onChange:k=>y({...w,cliente_id:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",children:[r.jsx("option",{value:"",children:"Oramento Avulso (sem cliente)"}),a.map(k=>r.jsx("option",{value:k.id,children:k.nome},k.id))]})]}),!w.cliente_id&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome do Cliente (Opcional)"}),r.jsx("input",{type:"text",value:w.cliente_nome_avulso,onChange:k=>y({...w,cliente_nome_avulso:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Ex: Maria Silva"})]}),r.jsxs("div",{className:w.cliente_id?"":"md:col-start-1",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Vlido at *"}),r.jsx("input",{type:"date",value:w.data_validade,onChange:k=>y({...w,data_validade:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",required:!0})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descrio"}),r.jsx("input",{type:"text",value:w.descricao,onChange:k=>y({...w,descricao:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Ex: Festa de aniversrio - 50 pessoas"})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Itens do Oramento *"}),r.jsxs("button",{type:"button",onClick:A,className:"flex items-center space-x-2 bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors",children:[r.jsx(_t,{className:"h-4 w-4"}),r.jsx("span",{children:"Adicionar Item"})]})]}),r.jsx("div",{className:"space-y-4",children:C.map((k,B)=>r.jsx("div",{className:"border border-gray-200 p-4 rounded-lg",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 items-end",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Receita"}),r.jsxs("select",{value:k.receita_id,onChange:T=>V(B,"receita_id",T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",required:!0,children:[r.jsx("option",{value:"",children:"Selecione uma receita"}),o.map(T=>r.jsx("option",{value:T.id,children:T.nome},T.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantidade"}),r.jsx("input",{type:"number",min:"1",value:k.quantidade,onChange:T=>V(B,"quantidade",parseInt(T.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Valor Unitrio (R$)"}),r.jsx("input",{type:"number",step:"0.01",value:k.valor_unitario,onChange:T=>V(B,"valor_unitario",parseFloat(T.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",required:!0})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total"}),r.jsxs("div",{className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg",children:["R$ ",k.valor_total.toFixed(2)]})]}),r.jsx("button",{type:"button",onClick:()=>H(B),className:"text-red-500 hover:text-red-700 p-2",children:r.jsx(Js,{className:"h-4 w-4"})})]})]})},B))}),C.length>0&&r.jsx("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-lg font-semibold text-gray-900",children:"Total do Oramento:"}),r.jsxs("span",{className:"text-2xl font-bold text-green-600",children:["R$ ",se(C).toFixed(2)]})]})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observaes"}),r.jsx("textarea",{value:w.observacoes,onChange:k=>y({...w,observacoes:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",rows:3,placeholder:"Informaes adicionais, condies de pagamento, etc."})]}),r.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-green-50 border border-green-200 rounded-lg",children:[r.jsx(qs,{className:"h-6 w-6 text-green-600"}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:w.incluir_qr_code,onChange:k=>y({...w,incluir_qr_code:k.target.checked}),className:"mr-3 h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded"}),r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Incluir QR Code para WhatsApp"})]}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Facilita o compartilhamento do oramento via WhatsApp"})]})]}),r.jsxs("div",{className:"flex justify-end space-x-4 mt-6",children:[r.jsx("button",{type:"button",onClick:Ue,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancelar"}),r.jsx("button",{type:"submit",disabled:C.length===0,className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:opacity-50 disabled:cursor-not-allowed",children:b?"Salvar Alteraes":"Criar Oramento"})]})]})]})}),j&&v&&u&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsx("div",{className:"bg-white rounded-lg p-8 max-w-md w-full m-4",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Compartilhar no WhatsApp"}),r.jsxs("p",{className:"text-sm text-gray-600 mb-6",children:["Escaneie o QR Code com seu celular para compartilhar o oramento"," ",r.jsx("strong",{children:u.numero_orcamento})," no WhatsApp"]}),r.jsx("div",{className:"flex justify-center mb-6",children:r.jsx("img",{src:v,alt:"QR Code WhatsApp",className:"border border-gray-200 rounded-lg"})}),r.jsxs("div",{className:"flex justify-center space-x-4",children:[r.jsxs("button",{onClick:()=>z(u),className:"flex items-center space-x-2 bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition-colors",children:[r.jsx(_s,{className:"h-4 w-4"}),r.jsx("span",{children:"Abrir WhatsApp"})]}),r.jsx("button",{onClick:()=>_(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Fechar"})]})]})})})]})})}function I1(){const{user:e}=we(),[t,s]=N.useState([]),[a,n]=N.useState([]),[o,i]=N.useState([]),[l,c]=N.useState("30");N.useEffect(()=>{if(e){const u=G(F.ORCAMENTOS,[]),f=G(F.CLIENTES,[]),w=G(F.RECEITAS,[]);s(u.filter(y=>y.usuario_id===e.id)),n(f.filter(y=>y.usuario_id===e.id&&y.ativo)),i(w.filter(y=>y.usuario_id===e.id&&y.ativo))}},[e]);const d=()=>{const u=new Date,f=parseInt(l);return new Date(u.getTime()-f*24*60*60*1e3)},h=t.filter(u=>new Date(u.data_criacao)>=d()),m=h.filter(u=>u.status==="aprovado"),p={totalVendas:m.reduce((u,f)=>u+f.valor_total,0),totalOrcamentos:h.length,orcamentosAprovados:m.length,taxaAprovacao:h.length>0?m.length/h.length*100:0,ticketMedio:m.length>0?m.reduce((u,f)=>u+f.valor_total,0)/m.length:0,clientesAtivos:new Set(m.map(u=>u.cliente_id)).size},b=()=>{const u={};return m.forEach(f=>{f.itens.forEach(w=>{const y=o.find(C=>C.id===w.receita_id);y&&(u[w.receita_id]||(u[w.receita_id]={nome:y.nome,quantidade:0,valor:0}),u[w.receita_id].quantidade+=w.quantidade,u[w.receita_id].valor+=w.valor_total)})}),Object.values(u).sort((f,w)=>w.valor-f.valor).slice(0,5)},x=()=>{const u={};return m.forEach(f=>{const w=a.find(y=>y.id===f.cliente_id);w&&(u[f.cliente_id]||(u[f.cliente_id]={nome:w.nome,valor:0,pedidos:0}),u[f.cliente_id].valor+=f.valor_total,u[f.cliente_id].pedidos+=1)}),Object.values(u).sort((f,w)=>w.valor-f.valor).slice(0,5)},_=(()=>{const u=new Date,f=[];for(let w=29;w>=0;w--){const y=new Date(u.getTime()-w*24*60*60*1e3),C=y.toISOString().split("T")[0],S=m.filter(I=>I.data_criacao.split("T")[0]===C).reduce((I,L)=>I+L.valor_total,0);f.push({data:y.getDate()+"/"+(y.getMonth()+1),valor:S})}return f})(),v=Math.max(..._.map(u=>u.valor)),g=()=>{const u={periodo:`${l} dias`,dataGeracao:new Date().toLocaleDateString("pt-BR"),metricas:p,produtosMaisVendidos:b(),clientesMaisValiosos:x(),vendasDiarias:_},f="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(u,null,2)),w=document.createElement("a");w.setAttribute("href",f),w.setAttribute("download",`relatorio-${new Date().toISOString().split("T")[0]}.json`),document.body.appendChild(w),w.click(),w.remove()};return r.jsx("div",{className:"min-h-screen bg-background",children:r.jsxs("div",{className:"container mx-auto px-4 py-6 lg:py-8",children:[r.jsxs("div",{className:"mb-6 lg:mb-8 flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(q,{to:"/dashboard",className:"p-2 hover:bg-muted rounded-lg transition-colors",children:r.jsx(ye,{className:"h-6 w-6"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-foreground mb-1 lg:mb-2",children:"Relatrios & Analytics"}),r.jsx("p",{className:"text-muted-foreground text-sm lg:text-base",children:"Acompanhe o desempenho do seu negcio"})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center space-y-2 sm:space-y-0 sm:space-x-4",children:[r.jsxs("select",{value:l,onChange:u=>c(u.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",children:[r.jsx("option",{value:"7",children:"ltimos 7 dias"}),r.jsx("option",{value:"30",children:"ltimos 30 dias"}),r.jsx("option",{value:"90",children:"ltimos 90 dias"}),r.jsx("option",{value:"365",children:"ltimo ano"})]}),r.jsxs("button",{onClick:g,className:"flex items-center space-x-2 bg-purple-500 text-white px-6 py-3 rounded-lg hover:bg-purple-600 transition-colors",children:[r.jsx(ta,{className:"h-5 w-5"}),r.jsx("span",{children:"Exportar"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 lg:gap-6 mb-6 lg:mb-8",children:[r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total de Vendas"}),r.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["R$ ",p.totalVendas.toFixed(2)]}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[m.length," oramentos aprovados"]})]}),r.jsx(Za,{className:"h-8 w-8 text-green-500"})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Taxa de Aprovao"}),r.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[p.taxaAprovacao.toFixed(1),"%"]}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[p.orcamentosAprovados," de ",p.totalOrcamentos," oramentos"]})]}),r.jsx(sr,{className:"h-8 w-8 text-blue-500"})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Ticket Mdio"}),r.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:["R$ ",p.ticketMedio.toFixed(2)]}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Valor mdio por pedido"})]}),r.jsx(ii,{className:"h-8 w-8 text-purple-500"})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Clientes Ativos"}),r.jsx("p",{className:"text-2xl font-bold text-orange-600",children:p.clientesAtivos}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Clientes com pedidos"})]}),r.jsx(Qs,{className:"h-8 w-8 text-orange-500"})]})})]}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md mb-8",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Vendas Dirias - ltimos 30 dias"}),r.jsx("div",{className:"space-y-2",children:_.map((u,f)=>r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-16 text-sm text-gray-600 text-right",children:u.data}),r.jsxs("div",{className:"flex-1 flex items-center",children:[r.jsx("div",{className:"bg-purple-500 h-6 rounded",style:{width:v>0?`${u.valor/v*100}%`:"0%",minWidth:u.valor>0?"20px":"0px"}}),r.jsxs("span",{className:"ml-3 text-sm font-medium text-gray-900",children:["R$ ",u.valor.toFixed(2)]})]})]},f))})]}),r.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6 lg:gap-8",children:[r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Produtos Mais Vendidos"}),b().length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(li,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500",children:"Nenhuma venda no perodo"})]}):r.jsx("div",{className:"space-y-4",children:b().map((u,f)=>r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-sm font-bold text-purple-600",children:f+1})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:u.nome}),r.jsxs("p",{className:"text-sm text-gray-500",children:[u.quantidade," unidades vendidas"]})]})]}),r.jsx("div",{className:"text-right",children:r.jsxs("p",{className:"font-bold text-green-600",children:["R$ ",u.valor.toFixed(2)]})})]},f))})]}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Clientes Mais Valiosos"}),x().length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Qs,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500",children:"Nenhum cliente no perodo"})]}):r.jsx("div",{className:"space-y-4",children:x().map((u,f)=>r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-sm font-bold text-blue-600",children:f+1})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:u.nome}),r.jsxs("p",{className:"text-sm text-gray-500",children:[u.pedidos," pedidos realizados"]})]})]}),r.jsx("div",{className:"text-right",children:r.jsxs("p",{className:"font-bold text-green-600",children:["R$ ",u.valor.toFixed(2)]})})]},f))})]})]}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md mt-8",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:["Resumo do Perodo (",l," dias)"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-3xl font-bold text-green-600 mb-2",children:m.length}),r.jsx("div",{className:"text-sm text-gray-600",children:"Vendas Realizadas"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:new Set(m.map(u=>u.cliente_id)).size}),r.jsx("div",{className:"text-sm text-gray-600",children:"Clientes nicos"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-3xl font-bold text-purple-600 mb-2",children:m.reduce((u,f)=>u+f.itens.length,0)}),r.jsx("div",{className:"text-sm text-gray-600",children:"Itens Vendidos"})]})]})]})]})})}function A1(){const[e,t]=N.useState("volume"),[s,a]=N.useState({nome_produto:"",preco:0,data_validade:"",ingredientes:""}),[n,o]=N.useState({valor:null,unidade:"ml"}),[i,l]=N.useState({valor:null,unidade:"g"}),c={ml:1,l:1e3,xcara:240,"colher-sopa":15,"colher-ch":5},d={g:1,kg:1e3,"xcara-acar":200,"xcara-farinha":120,"colher-sopa-acar":12,"colher-ch-acar":4},h=(x,j,_)=>x===null||x===0?0:x*c[j]/c[_],m=(x,j,_)=>x===null||x===0?0:x*d[j]/d[_],p=()=>{const x=`
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Etiqueta - ${s.nome_produto}</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: white;
        }
        .etiqueta {
            width: 10cm;
            height: 6cm;
            border: 2px solid #333;
            padding: 10px;
            margin: 10px;
            display: inline-block;
            position: relative;
            background: white;
        }
        .produto-nome {
            font-size: 18px;
            font-weight: bold;
            text-align: center;
            margin-bottom: 10px;
        }
        .preco {
            font-size: 24px;
            font-weight: bold;
            color: #d63384;
            text-align: center;
            margin: 10px 0;
        }
        .validade {
            font-size: 12px;
            margin: 5px 0;
        }
        .ingredientes {
            font-size: 10px;
            margin-top: 10px;
            line-height: 1.2;
        }
        .rodape {
            position: absolute;
            bottom: 5px;
            right: 10px;
            font-size: 8px;
            color: #666;
        }
        @media print {
            body { margin: 0; padding: 0; }
            .etiqueta { margin: 0; }
        }
    </style>
</head>
<body>
    <div class="etiqueta">
        <div class="produto-nome">${s.nome_produto}</div>
        <div class="preco">R$ ${s.preco.toFixed(2)}</div>
        ${s.data_validade?`<div class="validade">Validade: ${new Date(s.data_validade).toLocaleDateString("pt-BR")}</div>`:""}
        ${s.ingredientes?`<div class="ingredientes">Ingredientes: ${s.ingredientes}</div>`:""}
        <div class="rodape">DoceCalc</div>
    </div>
    <script>
        window.onload = function() {
            window.print();
        }
    <\/script>
</body>
</html>
    `,j=new Blob([x],{type:"text/html"}),_=URL.createObjectURL(j),v=window.open(_,"_blank");v&&(v.onload=()=>{setTimeout(()=>{URL.revokeObjectURL(_)},1e3)})},b=()=>{const x=["Acar cristal - 1kg","Farinha de trigo - 1kg","Ovos - 1 dzia","Manteiga - 500g","Leite integral - 1L","Fermento em p - 100g","Essncia de baunilha - 30ml","Chocolate em p - 200g"],j=`
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Lista de Compras - DoceCalc</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        h1 { color: #d63384; text-align: center; }
        .item { 
            padding: 10px; 
            border-bottom: 1px dashed #ccc; 
            display: flex; 
            align-items: center; 
        }
        .checkbox { 
            width: 20px; 
            height: 20px; 
            border: 2px solid #333; 
            margin-right: 15px; 
        }
        .rodape { 
            margin-top: 30px; 
            text-align: center; 
            color: #666; 
            font-size: 12px; 
        }
    </style>
</head>
<body>
    <h1> Lista de Compras</h1>
    <p><strong>Data:</strong> ${new Date().toLocaleDateString("pt-BR")}</p>
    ${x.map(u=>`
        <div class="item">
            <div class="checkbox"></div>
            <span>${u}</span>
        </div>
    `).join("")}
    <div class="rodape">
        <p>Gerado pelo DoceCalc - Calculadora para Confeiteiras</p>
    </div>
</body>
</html>
    `,_=new Blob([j],{type:"text/html"}),v=URL.createObjectURL(_),g=window.open(v,"_blank");g&&(g.onload=()=>{setTimeout(()=>{URL.revokeObjectURL(v)},1e3)})};return r.jsx("div",{className:"min-h-screen bg-gray-50",children:r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"mb-8 flex items-center space-x-4",children:[r.jsx(q,{to:"/dashboard",className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",children:r.jsx(ye,{className:"h-6 w-6"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Ferramentas Auxiliares"}),r.jsx("p",{className:"text-gray-600",children:"Conversores, etiquetas e outras ferramentas teis"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[r.jsx(Dj,{className:"h-6 w-6 text-blue-500"}),r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Conversor de Medidas"})]}),r.jsxs("div",{className:"flex space-x-4 mb-6",children:[r.jsx("button",{onClick:()=>t("volume"),className:`px-4 py-2 rounded-lg transition-colors ${e==="volume"?"bg-blue-500 text-white":"bg-gray-100 text-gray-700"}`,children:"Volume"}),r.jsx("button",{onClick:()=>t("peso"),className:`px-4 py-2 rounded-lg transition-colors ${e==="peso"?"bg-blue-500 text-white":"bg-gray-100 text-gray-700"}`,children:"Peso"})]}),e==="volume"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Valor"}),r.jsx("input",{type:"number",value:Pa(n.valor),onChange:x=>o({...n,valor:Rr(x.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Digite o valor"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Unidade"}),r.jsxs("select",{value:n.unidade,onChange:x=>o({...n,unidade:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"ml",children:"Mililitros (ml)"}),r.jsx("option",{value:"l",children:"Litros (l)"}),r.jsx("option",{value:"xcara",children:"Xcara"}),r.jsx("option",{value:"colher-sopa",children:"Colher de sopa"}),r.jsx("option",{value:"colher-ch",children:"Colher de ch"})]})]})]}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Converses:"}),r.jsx("div",{className:"space-y-1 text-sm",children:Object.keys(c).filter(x=>x!==n.unidade).map(x=>r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("span",{children:[x,":"]}),r.jsx("span",{className:"font-medium",children:h(n.valor,n.unidade,x).toFixed(2)})]},x))})]})]}),e==="peso"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Valor"}),r.jsx("input",{type:"number",value:Pa(i.valor),onChange:x=>l({...i,valor:Rr(x.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Digite o valor"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Unidade"}),r.jsxs("select",{value:i.unidade,onChange:x=>l({...i,unidade:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"g",children:"Gramas (g)"}),r.jsx("option",{value:"kg",children:"Quilos (kg)"}),r.jsx("option",{value:"xcara-acar",children:"Xcara de acar"}),r.jsx("option",{value:"xcara-farinha",children:"Xcara de farinha"}),r.jsx("option",{value:"colher-sopa-acar",children:"Colher sopa acar"}),r.jsx("option",{value:"colher-ch-acar",children:"Colher ch acar"})]})]})]}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Converses:"}),r.jsx("div",{className:"space-y-1 text-sm",children:Object.keys(d).filter(x=>x!==i.unidade).map(x=>r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("span",{children:[x,":"]}),r.jsx("span",{className:"font-medium",children:m(i.valor,i.unidade,x).toFixed(2)})]},x))})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[r.jsx(gh,{className:"h-6 w-6 text-green-500"}),r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Gerador de Etiquetas"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome do Produto *"}),r.jsx("input",{type:"text",value:s.nome_produto,onChange:x=>a({...s,nome_produto:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Ex: Bolo de Chocolate"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preo (R$) *"}),r.jsx("input",{type:"number",step:"0.01",value:s.preco,onChange:x=>{const j=Rr(x.target.value);a({...s,preco:j||0})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Digite o preo"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data de Validade"}),r.jsx("input",{type:"date",value:s.data_validade,onChange:x=>a({...s,data_validade:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ingredientes"}),r.jsx("textarea",{value:s.ingredientes,onChange:x=>a({...s,ingredientes:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",rows:3,placeholder:"Lista de ingredientes separados por vrgula"})]}),r.jsxs("button",{onClick:p,disabled:!s.nome_produto||s.preco<=0,className:"w-full bg-green-500 text-white px-6 py-3 rounded-lg hover:bg-green-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:[r.jsx(gh,{className:"h-5 w-5"}),r.jsx("span",{children:"Gerar Etiqueta"})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[r.jsx(mc,{className:"h-6 w-6 text-purple-500"}),r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Lista de Compras"})]}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Gere uma lista de compras com ingredientes bsicos para confeitaria."}),r.jsxs("button",{onClick:b,className:"w-full bg-purple-500 text-white px-6 py-3 rounded-lg hover:bg-purple-600 transition-colors flex items-center justify-center space-x-2",children:[r.jsx(ta,{className:"h-5 w-5"}),r.jsx("span",{children:"Gerar Lista de Compras"})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[r.jsx(Ot,{className:"h-6 w-6 text-orange-500"}),r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Calculadora Nutricional"})]}),r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Ot,{className:"h-16 w-16 text-orange-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Em Desenvolvimento"}),r.jsx("p",{className:"text-gray-500 mb-4",children:"Esta funcionalidade estar disponvel em breve para calcular informaes nutricionais dos seus produtos."}),r.jsx("div",{className:"bg-orange-50 p-4 rounded-lg",children:r.jsxs("p",{className:"text-sm text-orange-700",children:[" ",r.jsx("strong",{children:"Prvia:"})," Calcule calorias, carboidratos, protenas e gorduras automaticamente com base nos ingredientes das suas receitas."]})})]})]})]}),r.jsxs("div",{className:"bg-blue-50 rounded-lg p-6 mt-8",children:[r.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-4",children:" Dicas de Uso"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Conversores"}),r.jsx("p",{className:"text-sm text-blue-700",children:"Use os conversores para adaptar receitas de outros pases ou quando no tiver as medidas exatas."})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Etiquetas"}),r.jsx("p",{className:"text-sm text-blue-700",children:"Crie etiquetas profissionais para seus produtos. Inclua sempre os ingredientes para clientes com alergias."})]})]})]})]})})}function O1(){var c;const{user:e,profile:t}=we(),s=Ct(),[a,n]=N.useState(null),o=async d=>{n(d);try{s(d==="pix"?"/upgrade/pix":"/upgrade/stripe")}catch(h){console.error("Erro no upgrade:",h)}finally{n(null)}},i=d=>{switch(d){case"free":return r.jsx(Bs,{className:"h-8 w-8"});case"professional":return r.jsx(Mt,{className:"h-8 w-8"});case"premium":return r.jsx(zr,{className:"h-8 w-8"});case"master":return r.jsx(ft,{className:"h-8 w-8"});default:return r.jsx(Bs,{className:"h-8 w-8"})}},l=d=>{switch(d){case"free":return"border-gray-200 bg-white";case"professional":return"border-blue-200 bg-blue-50";case"premium":return"border-purple-200 bg-purple-50";case"master":return"border-yellow-200 bg-yellow-50";default:return"border-gray-200 bg-white"}};return r.jsx("div",{className:"min-h-screen bg-gray-50",children:r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"mb-8 flex items-center space-x-4",children:[r.jsx(q,{to:"/dashboard",className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",children:r.jsx(ye,{className:"h-6 w-6"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Escolha seu Plano"}),r.jsx("p",{className:"text-gray-600",children:"Desbloqueie recursos avanados para fazer seu negcio crescer"})]})]}),t&&r.jsx("div",{className:"bg-white border border-blue-200 rounded-lg p-6 mb-8",children:r.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:i(t.plano)}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Plano Atual: ",(c=Br.find(d=>d.id===t.plano))==null?void 0:c.nome]}),r.jsx("p",{className:"text-gray-600",children:t.plano==="free"?"Upgrade para desbloquear mais recursos":"Obrigado por ser nosso cliente!"})]})]})}),r.jsx("div",{className:"grid md:grid-cols-2 gap-8 max-w-4xl mx-auto mb-12",children:Br.map(d=>{const h=(t==null?void 0:t.plano)===d.id;return r.jsxs("div",{className:`relative rounded-lg border-2 p-8 ${l(d.id)} ${d.popular?"ring-2 ring-purple-500 transform scale-105":""}`,children:[d.popular&&r.jsx("div",{className:"absolute -top-4 left-1/2 transform -translate-x-1/2",children:r.jsx("span",{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white px-4 py-1 rounded-full text-sm font-medium",children:"Mais Popular"})}),r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4 ${d.id==="free"?"bg-gray-100 text-gray-600":"bg-blue-100 text-blue-600"}`,children:i(d.id)}),r.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:d.nome}),r.jsx("div",{className:"mb-4",children:d.preco_mensal===0?r.jsx("span",{className:"text-4xl font-bold text-gray-900",children:"Grtis"}):r.jsxs("div",{children:[r.jsxs("span",{className:"text-4xl font-bold text-gray-900",children:["R$ ",d.preco_mensal.toFixed(2).replace(".",",")]}),r.jsx("span",{className:"text-xl text-gray-600 font-normal",children:"/ms"})]})}),r.jsx("p",{className:"text-gray-600",children:d.descricao})]}),r.jsx("div",{className:"space-y-3 mb-8",children:d.funcionalidades.map((m,p)=>r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(Bs,{className:"h-5 w-5 text-green-500 flex-shrink-0 mt-0.5"}),r.jsx("span",{className:"text-gray-700",children:m})]},p))}),r.jsx("div",{className:"mt-auto",children:h?r.jsx("div",{className:"w-full py-3 px-4 bg-gray-100 text-gray-600 rounded-lg text-center font-medium",children:"Plano Atual"}):d.id==="free"?r.jsx("button",{disabled:!0,className:"w-full py-3 px-4 bg-gray-100 text-gray-400 rounded-lg font-medium cursor-not-allowed",children:"Plano Gratuito"}):r.jsxs("div",{className:"space-y-3",children:[r.jsx("div",{className:"text-center text-sm font-medium text-gray-700 mb-4",children:"Escolha sua forma de pagamento:"}),r.jsxs("button",{onClick:()=>o("pix"),disabled:a!==null,className:"w-full bg-green-600 hover:bg-green-700 disabled:bg-gray-300 text-white font-medium py-3 px-4 rounded-lg flex items-center justify-center gap-2 transition-colors",children:[a==="pix"?r.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):r.jsx(qs,{className:"w-5 h-5"}),"Pagar com PIX",a!=="pix"&&r.jsx("span",{className:"bg-green-500 px-2 py-1 rounded text-xs ml-2",children:"Instantneo"})]}),r.jsxs("button",{onClick:()=>o("card"),disabled:a!==null,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 text-white font-medium py-3 px-4 rounded-lg flex items-center justify-center gap-2 transition-colors",children:[a==="card"?r.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):r.jsx(fn,{className:"w-5 h-5"}),"Pagar com Carto"]})]})})]},d.id)})}),r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-8",children:[r.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-6 text-center",children:"Perguntas Frequentes"}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Posso mudar de plano a qualquer momento?"}),r.jsx("p",{className:"text-gray-600",children:"Sim! Voc pode fazer upgrade ou downgrade do seu plano a qualquer momento. As alteraes entram em vigor imediatamente."})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Como funciona o perodo de teste?"}),r.jsx("p",{className:"text-gray-600",children:"Todos os planos pagos incluem 7 dias de teste gratuito. Voc pode cancelar a qualquer momento durante o perodo de teste."})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Meus dados ficam seguros?"}),r.jsx("p",{className:"text-gray-600",children:"Sim! Seus dados so criptografados e armazenados com segurana. Fazemos backup automtico de todas as informaes."})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Preciso de carto de crdito para o teste?"}),r.jsx("p",{className:"text-gray-600",children:"No! O plano gratuito  permanente e no requer carto de crdito. Para planos pagos, s pedimos carto aps o perodo de teste."})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Posso cancelar a qualquer momento?"}),r.jsx("p",{className:"text-gray-600",children:"Sim! No h contratos ou fidelidade. Voc pode cancelar sua assinatura a qualquer momento e continuar usando at o final do perodo pago."})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Oferecem suporte tcnico?"}),r.jsx("p",{className:"text-gray-600",children:"Sim! Oferecemos suporte por email para todos os planos. Planos Premium e Master incluem suporte prioritrio e telefnico."})]})]})]})]}),r.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 rounded-lg text-white p-8 mt-8 text-center",children:[r.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Pronto para fazer seu negcio crescer?"}),r.jsx("p",{className:"text-lg mb-6 opacity-90",children:"Junte-se a milhares de confeiteiras que j esto vendendo mais com o DoceCalc"}),r.jsx(q,{to:"/dashboard",className:"inline-block bg-white text-purple-600 px-8 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-colors",children:"Voltar ao Dashboard"})]})]})})}const M1=()=>{const{user:e,profile:t,upgradeUser:s}=we(),a=Ct(),[n,o]=N.useState(!1),[i,l]=N.useState(null),[c,d]=N.useState("form"),[h,m]=N.useState(!1),[p,b]=N.useState({name:(t==null?void 0:t.nome)||"",cellphone:"",email:(e==null?void 0:e.email)||"",taxId:""}),x=Br.find(y=>y.id==="professional"),j=async()=>{o(!0);try{console.log("Creating PIX payment...");const{data:y,error:C}=await ne.functions.invoke("create-pix",{body:{amount:x.preco_mensal,description:`Upgrade para Plano Professional - ${e==null?void 0:e.email}`,customer:{name:p.name,cellphone:p.cellphone,email:p.email,taxId:p.taxId},metadata:{userId:e==null?void 0:e.id,plano:"professional"}}});if(C){console.error("Error creating PIX:",C);let S="Erro ao criar pagamento PIX";C.message&&C.message.includes("CPF invlido")?S="CPF invlido. Digite um CPF vlido no formato: 000.000.000-00":C.message&&C.message.includes("Telefone invlido")?S="Telefone invlido. Use o formato: (11) 99999-9999":C.message&&C.message.includes("Email invlido")?S="Email invlido. Verifique o endereo de email":C.message&&C.message.includes("Invalid taxId")&&(S="CPF invlido. Digite um CPF vlido no formato: 000.000.000-00"),alert(S);return}console.log("PIX created successfully:",y),l(y.data),d("pending")}catch(y){console.error("Error:",y),alert("Erro ao criar pagamento PIX")}finally{o(!1)}},_=async()=>{if(i!=null&&i.id){m(!0);try{console.log("Checking payment status for:",i.id);const{data:y,error:C}=await ne.functions.invoke("check-pix-status",{body:{pixId:i.id}});if(C){console.error("Error checking payment:",C);let S="Erro ao verificar pagamento";C.message&&C.message.includes("expired")?S="O PIX expirou. Gere um novo QR Code.":C.message&&C.message.includes("not found")&&(S="PIX no encontrado. Tente gerar um novo."),alert(S);return}console.log("Payment status:",y),y.data.status==="PAID"?(d("paid"),s&&s("professional"),setTimeout(()=>{a("/dashboard")},3e3)):y.data.status==="EXPIRED"&&d("expired")}catch(y){console.error("Error:",y),alert("Erro ao verificar pagamento")}finally{m(!1)}}},v=()=>{i!=null&&i.brCode&&(navigator.clipboard.writeText(i.brCode),alert("Chave PIX copiada!"))},g=y=>{if(y.preventDefault(),!p.name||!p.cellphone||!p.email||!p.taxId){alert("Todos os campos so obrigatrios");return}j()},u=(y,C)=>{b(S=>({...S,[y]:C}))},f=y=>y.replace(/\D/g,"").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d{1,2})/,"$1-$2").replace(/(-\d{2})\d+?$/,"$1"),w=y=>y.replace(/\D/g,"").replace(/(\d{2})(\d)/,"($1) $2").replace(/(\d{4,5})(\d{4})/,"$1-$2").replace(/(-\d{4})\d+?$/,"$1");return c==="paid"?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center max-w-md mx-auto p-8",children:[r.jsx(ve,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Pagamento Confirmado!"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Seu plano Professional foi ativado com sucesso. Voc ser redirecionado para o dashboard."}),r.jsx("div",{className:"w-8 h-8 border-2 border-purple-500 border-t-transparent rounded-full animate-spin mx-auto"})]})}):r.jsx("div",{className:"min-h-screen bg-gray-50",children:r.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-2xl",children:[r.jsxs("div",{className:"mb-8 flex items-center space-x-4",children:[r.jsx(q,{to:"/upgrade",className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",children:r.jsx(ye,{className:"h-6 w-6"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Pagamento via PIX"}),r.jsx("p",{className:"text-gray-600",children:c==="form"?"Complete seus dados para continuar":"Escaneie o QR Code ou copie a chave PIX"})]})]}),c==="form"&&r.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"bg-green-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(fn,{className:"w-8 h-8 text-green-600"})}),r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Plano Professional"}),r.jsxs("div",{className:"text-3xl font-bold text-green-600",children:["R$ ",x.preco_mensal.toFixed(2).replace(".",",")]})]}),r.jsxs("form",{onSubmit:g,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.jsx(bs,{className:"w-4 h-4 inline mr-1"}),"Nome Completo *"]}),r.jsx("input",{type:"text",value:p.name,onChange:y=>u("name",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.jsx(Vp,{className:"w-4 h-4 inline mr-1"}),"Telefone/WhatsApp *"]}),r.jsx("input",{type:"text",value:p.cellphone,onChange:y=>u("cellphone",w(y.target.value)),placeholder:"(11) 99999-9999",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.jsx(Ao,{className:"w-4 h-4 inline mr-1"}),"E-mail *"]}),r.jsx("input",{type:"email",value:p.email,onChange:y=>u("email",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r.jsx(Rt,{className:"w-4 h-4 inline mr-1"}),"CPF *"]}),r.jsx("input",{type:"text",value:p.taxId,onChange:y=>u("taxId",f(y.target.value)),placeholder:"000.000.000-00",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0})]}),r.jsxs("button",{type:"submit",disabled:n,className:"w-full bg-green-600 hover:bg-green-700 disabled:bg-gray-300 text-white font-medium py-3 px-4 rounded-lg transition-colors flex items-center justify-center gap-2",children:[n?r.jsx(en,{className:"w-5 h-5 animate-spin"}):r.jsx(qs,{className:"w-5 h-5"}),n?"Gerando PIX...":"Gerar QR Code PIX"]})]})]}),c==="pending"&&i&&r.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"bg-green-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(qs,{className:"w-8 h-8 text-green-600"})}),r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"PIX Gerado com Sucesso"}),r.jsxs("div",{className:"text-3xl font-bold text-green-600",children:["R$ ",x.preco_mensal.toFixed(2).replace(".",",")]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:[i.brCodeBase64?r.jsx("img",{src:i.brCodeBase64,alt:"QR Code PIX",className:"w-48 h-48 mx-auto border-2 border-gray-300 rounded-lg bg-white p-2"}):r.jsx("div",{className:"w-48 h-48 bg-white border-2 border-dashed border-gray-300 rounded-lg mx-auto flex items-center justify-center",children:r.jsx(qs,{className:"w-24 h-24 text-gray-400"})}),r.jsx("p",{className:"text-center text-sm text-gray-600 mt-4",children:"Escaneie este QR Code no seu banco ou app de pagamento"})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ou copie a chave PIX:"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"text",value:i.brCode||"",readOnly:!0,className:"flex-1 px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-sm font-mono"}),r.jsx("button",{onClick:v,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:r.jsx(Sj,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("button",{onClick:_,disabled:h,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 text-white font-medium py-3 px-4 rounded-lg transition-colors flex items-center justify-center gap-2",children:[h?r.jsx(en,{className:"w-5 h-5 animate-spin"}):r.jsx(ve,{className:"w-5 h-5"}),h?"Verificando...":"J efetuei o pagamento"]}),r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"flex items-center justify-center space-x-2 text-orange-600",children:[r.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full animate-pulse"}),r.jsx("span",{className:"text-sm font-medium",children:"Aguardando pagamento..."})]}),r.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Expira em: ",new Date(i.expiresAt).toLocaleString("pt-BR")]})]})]}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mt-6",children:[r.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"Como pagar:"}),r.jsxs("ol",{className:"text-sm text-blue-800 space-y-1",children:[r.jsx("li",{children:"1. Abra o app do seu banco"}),r.jsx("li",{children:'2. V em PIX e escolha "Pagar com QR Code"'}),r.jsx("li",{children:"3. Escaneie o cdigo acima ou cole a chave PIX"}),r.jsxs("li",{children:["4. Confirme o pagamento de R$ ",x.preco_mensal.toFixed(2).replace(".",",")]}),r.jsx("li",{children:'5. Clique em "J efetuei o pagamento" para verificar'})]})]})]}),r.jsx("div",{className:"text-center mt-6",children:r.jsxs("p",{className:"text-sm text-gray-500",children:["Problemas com o pagamento?",r.jsx("a",{href:"#",className:"text-purple-600 hover:underline ml-1",children:"Entre em contato"})]})})]})})},L1=()=>{const{user:e,profile:t,upgradeUser:s}=we(),a=Ct(),[n,o]=N.useState(!1),[i,l]=N.useState(!1),c=Br.find(m=>m.id==="professional");N.useEffect(()=>{d()},[]);const d=async()=>{if(e){l(!0);try{console.log("Checking subscription status...");const{data:m,error:p}=await ne.functions.invoke("check-subscription",{body:{userEmail:e.email}});if(p){console.error("Error checking subscription:",p);return}console.log("Subscription status:",m),m.subscribed&&(s&&s("professional"),setTimeout(()=>{a("/dashboard")},2e3))}catch(m){console.error("Error:",m)}finally{l(!1)}}},h=async()=>{if(!e){alert("Voc precisa estar logado para fazer upgrade");return}o(!0);try{console.log("Creating Stripe checkout session...");const{data:m,error:p}=await ne.functions.invoke("create-checkout",{body:{userEmail:e.email,userName:t==null?void 0:t.nome}});if(p){console.error("Error creating checkout:",p),alert("Erro ao criar sesso de pagamento: "+(p.message||"Erro desconhecido"));return}console.log("Checkout session created:",m),m.url&&window.open(m.url,"_blank")}catch(m){console.error("Error:",m),alert("Erro interno. Tente novamente em alguns segundos.")}finally{o(!1)}};return i?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx(en,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-purple-600"}),r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Verificando sua assinatura..."}),r.jsx("p",{className:"text-gray-600",children:"Aguarde um momento"})]})}):r.jsx("div",{className:"min-h-screen bg-gray-50",children:r.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[r.jsxs("div",{className:"mb-8 flex items-center space-x-4",children:[r.jsx(q,{to:"/upgrade",className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",children:r.jsx(ye,{className:"h-6 w-6"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Pagamento com Carto"}),r.jsx("p",{className:"text-gray-600",children:"Finalize sua assinatura do plano Professional"})]})]}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[r.jsx(bs,{className:"w-5 h-5 text-blue-600"}),r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Dados da Conta"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome"}),r.jsx("input",{type:"text",value:(t==null?void 0:t.nome)||"",readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"E-mail"}),r.jsx("input",{type:"email",value:(e==null?void 0:e.email)||"",readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50"})]})]}),r.jsx("div",{className:"mt-6",children:r.jsxs("button",{onClick:h,disabled:n,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 text-white font-medium py-3 px-4 rounded-lg transition-colors flex items-center justify-center gap-2",children:[n?r.jsx(en,{className:"w-5 h-5 animate-spin"}):r.jsx(fn,{className:"w-5 h-5"}),n?"Processando...":"Pagar com Stripe"]})}),r.jsxs("div",{className:"flex items-center space-x-2 mt-4 text-sm text-gray-500",children:[r.jsx(hc,{className:"w-4 h-4"}),r.jsx("span",{children:"Pagamento seguro processado pelo Stripe"})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Resumo da Assinatura"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-600",children:"Plano Professional"}),r.jsxs("span",{className:"font-medium",children:["R$ ",c.preco_mensal.toFixed(2).replace(".",",")]})]}),r.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-600",children:[r.jsx("span",{children:"Frequncia"}),r.jsx("span",{children:"Mensal"})]}),r.jsx("div",{className:"border-t pt-4",children:r.jsxs("div",{className:"flex justify-between items-center text-lg font-semibold",children:[r.jsx("span",{children:"Total Mensal"}),r.jsxs("span",{children:["R$ ",c.preco_mensal.toFixed(2).replace(".",",")]})]})})]}),r.jsxs("div",{className:"mt-6 space-y-3",children:[r.jsx("h3",{className:"font-medium text-gray-900",children:"Includo na assinatura:"}),c.funcionalidades.slice(0,8).map((m,p)=>r.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[r.jsx(ve,{className:"w-4 h-4 text-green-500 flex-shrink-0"}),r.jsx("span",{className:"text-gray-600",children:m})]},p))]}),r.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[r.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Vantagens:"}),r.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[r.jsx("li",{children:" Cancele a qualquer momento"}),r.jsx("li",{children:" Sem fidelidade ou taxas extras"}),r.jsx("li",{children:" Suporte prioritrio"}),r.jsx("li",{children:" Atualizaes automticas"})]})]})]})]}),r.jsx("div",{className:"text-center mt-8",children:r.jsx("p",{className:"text-sm text-gray-500",children:'Ao clicar em "Pagar com Stripe" voc ser redirecionado para o checkout seguro do Stripe.'})})]})})},D1=()=>{const{user:e,profile:t,upgradeUser:s}=we();Ct();const[a]=ty(),[n,o]=N.useState(!0),[i,l]=N.useState(!1);N.useEffect(()=>{const d=a.get("session_id");d&&e?c(d):o(!1)},[a,e]);const c=async d=>{try{console.log("Verifying payment for session:",d);const{data:h,error:m}=await ne.functions.invoke("check-subscription",{body:{userEmail:e==null?void 0:e.email}});if(m){console.error("Error verifying payment:",m),o(!1);return}console.log("Payment verification result:",h),h.subscribed&&(s&&s("professional"),l(!0))}catch(h){console.error("Error:",h)}finally{o(!1)}};return n?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-8 h-8 border-2 border-purple-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Verificando seu pagamento..."}),r.jsx("p",{className:"text-gray-600",children:"Aguarde um momento"})]})}):r.jsx("div",{className:"min-h-screen bg-gray-50",children:r.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-2xl",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 text-center",children:[r.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:r.jsx(ve,{className:"w-12 h-12 text-green-600"})}),r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:i?"Pagamento Confirmado!":"Obrigado pelo pagamento!"}),r.jsx("p",{className:"text-lg text-gray-600 mb-8",children:i?"Seu plano Professional foi ativado com sucesso. Agora voc tem acesso a todas as funcionalidades premium!":"Estamos processando seu pagamento. Em breve voc receber a confirmao."}),i&&r.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg p-6 mb-8",children:[r.jsxs("div",{className:"flex items-center justify-center space-x-3 mb-4",children:[r.jsx(ft,{className:"w-6 h-6 text-purple-600"}),r.jsx("h2",{className:"text-xl font-semibold text-purple-900",children:"Bem-vindo ao Plano Professional!"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(ve,{className:"w-4 h-4 text-green-500"}),r.jsx("span",{children:"Receitas ilimitadas"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(ve,{className:"w-4 h-4 text-green-500"}),r.jsx("span",{children:"Oramentos ilimitados"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(ve,{className:"w-4 h-4 text-green-500"}),r.jsx("span",{children:"Gesto completa de clientes"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(ve,{className:"w-4 h-4 text-green-500"}),r.jsx("span",{children:"Relatrios avanados"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(ve,{className:"w-4 h-4 text-green-500"}),r.jsx("span",{children:"Backup automtico"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(ve,{className:"w-4 h-4 text-green-500"}),r.jsx("span",{children:"Suporte prioritrio"})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs(q,{to:"/dashboard",className:"inline-flex items-center space-x-2 bg-purple-600 text-white px-8 py-3 rounded-lg hover:bg-purple-700 transition-colors font-medium",children:[r.jsx("span",{children:"Ir para o Dashboard"}),r.jsx(dc,{className:"w-5 h-5"})]}),r.jsx("div",{className:"text-center",children:r.jsx(q,{to:"/subscription",className:"text-gray-600 hover:text-gray-900 text-sm underline",children:"Gerenciar assinatura"})})]})]}),r.jsx("div",{className:"mt-8 text-center",children:r.jsxs("p",{className:"text-sm text-gray-500",children:["Precisa de ajuda?",r.jsx("a",{href:"#",className:"text-purple-600 hover:underline ml-1",children:"Entre em contato conosco"})]})})]})})};function $1(){const{user:e,profile:t,checkSubscription:s}=we(),{toast:a}=_d(),[n,o]=N.useState(null),[i,l]=N.useState(!0),[c,d]=N.useState(!1);N.useEffect(()=>{h();const x=setInterval(h,3e4);return()=>clearInterval(x)},[e]);const h=async()=>{if(e)try{const{data:x,error:j}=await ne.functions.invoke("check-subscription",{body:{userEmail:e.email}});if(j)throw j;o(x),(x!=null&&x.subscribed&&(t==null?void 0:t.plano)!=="professional"||!(x!=null&&x.subscribed)&&(t==null?void 0:t.plano)!=="free")&&s()}catch(x){console.error("Erro ao verificar assinatura:",x)}finally{l(!1)}},m=async()=>{var x;if(e){d(!0);try{const{data:j,error:_}=await ne.functions.invoke("customer-portal",{headers:{Authorization:`Bearer ${(x=(await ne.auth.getSession()).data.session)==null?void 0:x.access_token}`}});if(_)throw _;j!=null&&j.url&&(window.open(j.url,"_blank"),a({title:"Portal aberto!",description:"Voc foi redirecionado para o portal de assinatura do Stripe."}))}catch(j){a({title:"Erro ao abrir portal",description:j.message||"Tente novamente em alguns segundos.",variant:"destructive"})}finally{d(!1)}}},p=x=>new Date(x).toLocaleDateString("pt-BR",{day:"2-digit",month:"long",year:"numeric"}),b=x=>{const j=new Date(x),_=new Date,v=j.getTime()-_.getTime();return Math.ceil(v/(1e3*60*60*24))};return i?r.jsx("div",{className:"min-h-screen bg-gray-50",children:r.jsx("div",{className:"container mx-auto px-4 py-8",children:r.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:r.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[r.jsx(ro,{className:"w-5 h-5 animate-spin text-blue-600"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Verificando assinatura..."})]})})})}):r.jsx("div",{className:"min-h-screen bg-gray-50",children:r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"mb-8 flex items-center space-x-4",children:[r.jsx(q,{to:"/dashboard",className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",children:r.jsx(ye,{className:"h-6 w-6"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gerenciar Assinatura"}),r.jsx("p",{className:"text-gray-600",children:"Controle sua assinatura e histrico de pagamentos"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsxs("div",{className:"lg:col-span-2",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Status da Assinatura"}),r.jsx("button",{onClick:h,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"Atualizar status",children:r.jsx(ro,{className:"w-4 h-4 text-gray-600"})})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[n!=null&&n.subscribed?r.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:r.jsx(ve,{className:"w-8 h-8 text-green-500"})}):r.jsx("div",{className:"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center",children:r.jsx(Dp,{className:"w-8 h-8 text-yellow-500"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-xl font-semibold text-gray-900",children:n!=null&&n.subscribed?"Plano Professional Ativo":"Plano Gratuito"}),r.jsx("p",{className:"text-gray-600",children:n!=null&&n.subscribed?"Voc tem acesso completo a todos os recursos":"Faa upgrade para desbloquear recursos avanados"})]})]}),(n==null?void 0:n.subscribed)&&(n==null?void 0:n.subscription_end)&&r.jsx("div",{className:"bg-blue-50 rounded-lg p-6",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[r.jsx($p,{className:"w-5 h-5 text-blue-600"}),r.jsx("span",{className:"font-medium text-blue-900",children:"Prxima cobrana"})]}),r.jsx("p",{className:"text-blue-800",children:p(n.subscription_end)}),r.jsx("p",{className:"text-sm text-blue-600 mt-1",children:b(n.subscription_end)>0?`${b(n.subscription_end)} dias restantes`:"Renovao hoje"})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[r.jsx(Za,{className:"w-5 h-5 text-blue-600"}),r.jsx("span",{className:"font-medium text-blue-900",children:"Valor mensal"})]}),r.jsx("p",{className:"text-blue-800 text-lg font-semibold",children:"R$ 39,90"}),r.jsx("p",{className:"text-sm text-blue-600",children:"Cobrana automtica"})]})]})})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:n!=null&&n.subscribed?"Recursos Ativos":"Recursos do Plano Professional"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(ve,{className:"w-5 h-5 text-green-500"}),r.jsx("span",{className:"text-gray-700",children:"Receitas ilimitadas"})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(ve,{className:"w-5 h-5 text-green-500"}),r.jsx("span",{className:"text-gray-700",children:"Oramentos ilimitados"})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(ve,{className:"w-5 h-5 text-green-500"}),r.jsx("span",{className:"text-gray-700",children:"Gesto completa de clientes"})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(ve,{className:"w-5 h-5 text-green-500"}),r.jsx("span",{className:"text-gray-700",children:"Relatrios avanados"})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(ve,{className:"w-5 h-5 text-green-500"}),r.jsx("span",{className:"text-gray-700",children:"Backup automtico"})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(ve,{className:"w-5 h-5 text-green-500"}),r.jsx("span",{className:"text-gray-700",children:"Suporte prioritrio"})]})]})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Aes"}),r.jsxs("div",{className:"space-y-3",children:[n!=null&&n.subscribed?r.jsxs("button",{onClick:m,disabled:c,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 text-white font-medium py-3 px-4 rounded-lg transition-colors flex items-center justify-center gap-2",children:[c?r.jsx(ro,{className:"w-4 h-4 animate-spin"}):r.jsx(fn,{className:"w-4 h-4"}),c?"Abrindo...":"Portal de Pagamento",!c&&r.jsx(Up,{className:"w-4 h-4"})]}):r.jsxs(q,{to:"/upgrade",className:"w-full bg-green-600 hover:bg-green-700 text-white font-medium py-3 px-4 rounded-lg transition-colors flex items-center justify-center gap-2",children:[r.jsx(ft,{className:"w-4 h-4"}),"Fazer Upgrade"]}),(n==null?void 0:n.subscribed)&&r.jsxs("div",{className:"text-xs text-gray-500 text-center p-3 bg-gray-50 rounded-lg",children:[r.jsx("p",{className:"mb-2",children:r.jsx("strong",{children:"No portal voc pode:"})}),r.jsxs("ul",{className:"text-left space-y-1",children:[r.jsx("li",{children:" Cancelar assinatura"}),r.jsx("li",{children:" Alterar mtodo de pagamento"}),r.jsx("li",{children:" Baixar faturas"}),r.jsx("li",{children:" Ver histrico completo"})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Precisa de ajuda?"}),r.jsxs("div",{className:"space-y-3 text-sm text-gray-600",children:[r.jsx("p",{children:"Tem dvidas sobre sua assinatura ou precisa de suporte?"}),r.jsxs("p",{children:[r.jsx("strong",{children:"Email:"})," suporte@docecalc.com"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Horrio:"})," Segunda a Sexta, 9h s 18h"]})]})]})]})]})]})})}function U1(){const[e,t]=N.useState(null),s=n=>{t(e===n?null:n)},a=[{id:"calculadora",nome:"Calculadora de Custos",icone:r.jsx(Ot,{className:"h-6 w-6"}),cor:"bg-blue-500",resumo:"Calcula o preo real dos seus produtos considerando todos os custos",oQueE:"A calculadora  a ferramenta mais importante do DoceCalc. Ela calcula automaticamente quanto voc deve cobrar por cada produto, considerando ingredientes, mo de obra e margem de lucro.",paraque:'Para voc nunca mais vender no prejuzo! Muitas confeiteiras cobram baseado no "achismo", mas a calculadora mostra o preo cientfico baseado nos seus custos reais.',comoFunciona:['1. Crie uma nova receita clicando em "Nova Receita"',"2. Adicione todos os ingredientes com quantidades exatas","3. Defina o tempo de preparo (sua mo de obra)","4. Escolha a margem de lucro desejada (recomendamos 30-50%)","5. O sistema calcula automaticamente o preo sugerido"],dicasImportantes:[" Sempre inclua TODOS os ingredientes, at os menores (acar, sal, fermento)"," O tempo de preparo inclui misturar, assar, esfriar e decorar"," Margem de 30%  mnima, 50%  ideal para crescer"," Atualize os preos dos ingredientes mensalmente"],exemplo:"Exemplo: Brigadeiro gourmet  Chocolate (R$8), Leite condensado (R$4), Manteiga (R$2), Tempo (30min = R$12,50) = Custo R$26,50. Com margem 40% = Preo final: R$37,10 (6 brigadeiros = R$6,18 cada)"},{id:"ingredientes",nome:"Gesto de Ingredientes",icone:r.jsx(li,{className:"h-6 w-6"}),cor:"bg-purple-500",resumo:"Controla estoque e preos dos seus ingredientes",oQueE:"Um sistema para cadastrar todos os ingredientes que voc usa, com preos atualizados e controle de estoque.",paraque:"Para ter controle total dos seus custos e nunca ficar sem ingredientes na hora de produzir.",comoFunciona:['1. V em "Ingredientes" no menu','2. Clique em "Adicionar Ingrediente"',"3. Preencha nome, categoria, unidade e preo atual","4. Atualize o estoque quando comprar/usar ingredientes","5. O sistema avisa quando o estoque est baixo"],dicasImportantes:[" Sempre cadastre o preo por unidade (kg, litro, unidade)"," Atualize o estoque regularmente para no faltar ingredientes"," Revise os preos mensalmente (inflao afeta seus custos)"," Use categorias para organizar melhor (Chocolates, Farinhas, etc.)"],exemplo:"Exemplo: Chocolate em p  Categoria: Chocolates, Unidade: kg, Preo: R$25,00/kg, Estoque: 2kg. Quando usar 500g numa receita, atualiza para 1,5kg automaticamente."},{id:"receitas",nome:"Receitas e Produtos",icone:r.jsx(Cd,{className:"h-6 w-6"}),cor:"bg-green-500",resumo:"Armazena suas receitas com custos calculados automaticamente",oQueE:"Aqui voc guarda todas as suas receitas com ingredientes, quantidades e instrues. O sistema calcula automaticamente o custo de cada receita.",paraque:"Para ter todas suas receitas organizadas e saber exatamente quanto custa fazer cada produto.",comoFunciona:['1. Clique em "Receitas" no menu','2. Clique em "Nova Receita"',"3. D nome, descrio e escolha categoria","4. Adicione ingredientes um por um com quantidades","5. Adicione modo de preparo e tempo","6. O custo  calculado automaticamente"],dicasImportantes:[" Escreva instrues claras para no esquecer os passos",' Use quantidades exatas (500g, no "meio pacote")'," Inclua tempo real: preparo + forno + decorao"," Use categorias para organizar (Bolos, Doces, Salgados)"],exemplo:"Exemplo: Bolo de chocolate  Farinha (500g), Acar (300g), Chocolate (200g), Ovos (3 unidades). Tempo total: 2h. Custo calculado: R$18,50 + mo de obra."},{id:"clientes",nome:"Gesto de Clientes",icone:r.jsx(Qs,{className:"h-6 w-6"}),cor:"bg-indigo-500",resumo:"Cadastra e organiza informaes dos seus clientes",oQueE:"Sistema para guardar dados dos seus clientes: nome, telefone, preferncias e histrico de pedidos.",paraque:"Para ter controle de quem so seus clientes, facilitar contato e oferecer atendimento personalizado.",comoFunciona:['1. V em "Clientes" no menu','2. Clique em "Novo Cliente"',"3. Preencha nome, telefone, WhatsApp","4. Adicione endereo se faz entrega","5. Anote observaes importantes (alergias, preferncias)","6. Consulte quando precisar fazer oramento"],dicasImportantes:[" Sempre cadastre WhatsApp para facilitar contato"," Endereo completo se faz entregas"," Anote datas importantes (aniversrios, casamentos)"," Registre alergias e restries alimentares"],exemplo:'Exemplo: Maria Silva  Tel: (11) 99999-9999, Endereo: Rua das Flores 123, Obs: "Alrgica a amendoim, gosta de chocolate 70%, aniversrio do filho em dezembro"'},{id:"orcamentos",nome:"Oramentos",icone:r.jsx(Rt,{className:"h-6 w-6"}),cor:"bg-pink-500",resumo:"Cria oramentos profissionais para seus clientes",oQueE:"Ferramenta para criar oramentos organizados com mltiplos produtos, quantidades e valores totais.",paraque:"Para enviar oramentos profissionais aos clientes e acompanhar quais foram aprovados.",comoFunciona:['1. V em "Oramentos" no menu','2. Clique em "Novo Oramento"',"3. Escolha o cliente ou cadastre um novo","4. Adicione produtos do seu catlogo de receitas","5. Defina quantidades para cada item","6. O total  calculado automaticamente","7. Envie por WhatsApp ou imprima"],dicasImportantes:[" Sempre defina prazo de validade do oramento"," Inclua prazo de entrega dos produtos"," Especifique formas de pagamento aceitas"," Detalhe bem cada item para evitar confuses"],exemplo:"Exemplo: Festa infantil  50 brigadeiros (R$185), 30 beijinhos (R$120), 1 bolo decorado (R$85) = Total: R$390. Prazo entrega: 3 dias."},{id:"relatorios",nome:"Relatrios",icone:r.jsx(ii,{className:"h-6 w-6"}),cor:"bg-orange-500",resumo:"Mostra grficos e dados do seu negcio (Plano Professional)",oQueE:"Dashboard com grficos mostrando vendas, produtos mais vendidos, clientes e evoluo do negcio.",paraque:"Para entender como seu negcio est indo e tomar decises baseadas em dados reais.",comoFunciona:['1. V em "Relatrios" (precisa do plano Professional)',"2. Veja grficos de vendas por perodo","3. Analise quais produtos vendem mais","4. Identifique seus melhores clientes","5. Acompanhe evoluo mensal/anual","6. Use os dados para planejar seu crescimento"],dicasImportantes:[" Produtos mais vendidos merecem promoo especial"," Clientes VIP merecem atendimento diferenciado"," Meses fracos precisam de campanhas de marketing"," Use dados para criar novos produtos"],exemplo:'Exemplo: "Brigadeiro gourmet  40% das vendas", "Dezembro vende 3x mais", "Cliente Maria j gastou R$2.500 este ano" - Use essas informaes!'},{id:"comunidade",nome:"Comunidade",icone:r.jsx(_s,{className:"h-6 w-6"}),cor:"bg-cyan-500",resumo:"Converse com outros confeiteiros e compartilhe experincias",oQueE:"Rede social interna onde confeiteiros compartilham dicas, receitas, fazem perguntas e ajudam uns aos outros.",paraque:"Para aprender com quem j tem experincia, tirar dvidas e fazer networking no ramo.",comoFunciona:['1. V em "Comunidade" no menu',"2. Leia posts de outros confeiteiros","3. Curta e comente posts que achar interessantes","4. Crie seus prprios posts com dicas ou perguntas","5. Use categorias: Dicas, Perguntas, Receitas, Negcio","6. Pesquise por temas especficos"],dicasImportantes:[" Seja respeitoso e prestativo com outros usurios"," Faa perguntas especficas para obter melhores respostas"," Compartilhe suas descobertas para ajudar outros"," Use a busca para ver se sua dvida j foi respondida"],exemplo:'Exemplo: Poste "Dica: Descobri que conservar brigadeiro na geladeira por 1h antes de enrolar facilita muito!" ou pergunte "Como evitar que o merengue murche?"'},{id:"catalogo",nome:"Catlogo Online",icone:r.jsx(Mo,{className:"h-6 w-6"}),cor:"bg-purple-600",resumo:"Crie seu site de vendas online (Em breve)",oQueE:"Funcionalidade em desenvolvimento para criar uma loja online onde clientes podem ver seus produtos e fazer pedidos.",paraque:"Para vender 24 horas por dia atravs de um site prprio, sem depender s de WhatsApp.",comoFunciona:[" Esta funcionalidade est em desenvolvimento","Em breve voc poder:"," Criar um catlogo online bonito"," Receber pedidos automaticamente"," Compartilhar link do seu site"," Integrar com WhatsApp"],dicasImportantes:[" Aguarde o lanamento desta funcionalidade"," V tirando fotos bonitas dos seus produtos"," Prepare descries atrativas"," Pense nas formas de pagamento que vai aceitar"],exemplo:"Em breve: www.docecalc.com/loja/seunome - seus clientes podero ver todos seus produtos e fazer pedidos diretamente online!"}];return r.jsx("div",{className:"min-h-screen bg-gray-50",children:r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"mb-8 flex items-center space-x-4",children:[r.jsx(q,{to:"/dashboard",className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",children:r.jsx(ye,{className:"h-6 w-6"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Como Usar o DoceCalc "}),r.jsx("p",{className:"text-gray-600",children:"Guia completo para dominar todas as ferramentas e vender mais"})]})]}),r.jsxs("div",{className:"bg-gradient-to-r from-pink-500 to-purple-600 rounded-lg text-white p-8 mb-8",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[r.jsx(Fp,{className:"h-8 w-8"}),r.jsx("h2",{className:"text-2xl font-bold",children:"Bem-vinda ao DoceCalc!"})]}),r.jsx("p",{className:"text-lg mb-4",children:"Este guia vai te ensinar a usar cada ferramenta do jeito certo. Mesmo que voc nunca tenha usado um sistema assim, vai conseguir dominar tudo!"}),r.jsxs("div",{className:"bg-white/20 rounded-lg p-4",children:[r.jsx("h3",{className:"font-semibold mb-2",children:" Dica Importante:"}),r.jsxs("p",{children:["Comece pela ",r.jsx("strong",{children:"Calculadora"})," e ",r.jsx("strong",{children:"Ingredientes"}),". Elas so a base de tudo! Depois use as outras ferramentas conforme sua necessidade."]})]})]}),r.jsx("div",{className:"space-y-4",children:a.map(n=>r.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[r.jsxs("button",{onClick:()=>s(n.id),className:"w-full p-6 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:`${n.cor} p-3 rounded-lg text-white`,children:n.icone}),r.jsxs("div",{className:"text-left",children:[r.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:n.nome}),r.jsx("p",{className:"text-gray-600",children:n.resumo})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(q,{to:`/${n.id}`,onClick:o=>o.stopPropagation(),className:"bg-blue-100 text-blue-700 px-3 py-1 rounded-md text-sm hover:bg-blue-200 transition-colors",children:"Usar Agora"}),e===n.id?r.jsx(Cj,{className:"h-5 w-5 text-gray-400"}):r.jsx(kj,{className:"h-5 w-5 text-gray-400"})]})]}),e===n.id&&r.jsx("div",{className:"px-6 pb-6 border-t border-gray-100",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6",children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("h4",{className:"font-semibold text-gray-900 mb-2 flex items-center space-x-2",children:[r.jsx(Uj,{className:"h-4 w-4 text-blue-500"}),r.jsx("span",{children:"O que ?"})]}),r.jsx("p",{className:"text-gray-700",children:n.oQueE})]}),r.jsxs("div",{children:[r.jsxs("h4",{className:"font-semibold text-gray-900 mb-2 flex items-center space-x-2",children:[r.jsx(Mt,{className:"h-4 w-4 text-yellow-500"}),r.jsx("span",{children:"Para que serve?"})]}),r.jsx("p",{className:"text-gray-700",children:n.paraque})]}),r.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[r.jsx("h5",{className:"font-semibold text-yellow-800 mb-2",children:" Dicas Importantes:"}),r.jsx("ul",{className:"space-y-2 text-sm text-yellow-700",children:n.dicasImportantes.map((o,i)=>r.jsx("li",{children:o},i))})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("h4",{className:"font-semibold text-gray-900 mb-3 flex items-center space-x-2",children:[r.jsx(Gp,{className:"h-4 w-4 text-green-500"}),r.jsx("span",{children:"Como usar (passo a passo):"})]}),r.jsx("ol",{className:"space-y-2",children:n.comoFunciona.map((o,i)=>r.jsx("li",{className:"text-gray-700 text-sm",children:o},i))})]}),r.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[r.jsx("h5",{className:"font-semibold text-blue-800 mb-2",children:" Exemplo Prtico:"}),r.jsx("p",{className:"text-sm text-blue-700",children:n.exemplo})]})]})]})})]},n.id))}),r.jsxs("div",{className:"mt-12 bg-white rounded-lg shadow-md p-8",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:" Dicas para Comear Bem"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Primeira semana:"}),r.jsxs("ul",{className:"space-y-1 text-gray-700 text-sm",children:[r.jsx("li",{children:" Cadastre todos seus ingredientes com preos atuais"}),r.jsx("li",{children:" Crie 3-5 receitas principais"}),r.jsx("li",{children:" Faa seu primeiro oramento"}),r.jsx("li",{children:" Cadastre seus clientes frequentes"})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Depois de um ms:"}),r.jsxs("ul",{className:"space-y-1 text-gray-700 text-sm",children:[r.jsx("li",{children:" Use os relatrios para anlises"}),r.jsx("li",{children:" Participe da comunidade"}),r.jsx("li",{children:" Atualize preos mensalmente"}),r.jsx("li",{children:" Configure seu catlogo online"})]})]})]}),r.jsxs("div",{className:"mt-6 p-4 bg-green-50 rounded-lg",children:[r.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:" Precisa de ajuda?"}),r.jsxs("p",{className:"text-green-700 text-sm",children:["Se tiver dvidas, acesse a ",r.jsx(q,{to:"/comunidade",className:"underline hover:no-underline",children:"Comunidade"})," e pergunte! Outros confeiteiros e nossa equipe esto sempre prontos para ajudar."]})]})]})]})})}function F1(){const{user:e,profile:t,updatePerfil:s}=we(),[a,n]=N.useState([]),[o,i]=N.useState([]),[l,c]=N.useState({nomeFantasia:"",whatsapp:"",instagram:"",endereco:"",descricao:""}),[d,h]=N.useState(!1),[m,p]=N.useState(!1),[b,x]=N.useState(!1);N.useEffect(()=>{if(e){const _=G("doce_receitas",[]).filter(u=>u.usuario_id===e.id&&u.ativo),v=G(`produtos_catalogo_${e.id}`,[]),g=G(`dados_confeitaria_${e.id}`,{nomeFantasia:(t==null?void 0:t.nome)||"",whatsapp:"",instagram:"",endereco:"",descricao:""});n(_),i(v),c(g),h(!1)}},[e]);const j=()=>{const _=`${window.location.origin}/catalogo/${e==null?void 0:e.id}`;navigator.clipboard.writeText(_),alert("Link copiado para a rea de transferncia!")};return o.filter(_=>_.ativo),r.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:r.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[r.jsx("div",{className:"mb-8",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(q,{to:"/dashboard",className:"text-gray-600 hover:text-gray-900",children:r.jsx(ye,{className:"h-6 w-6"})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center space-x-3",children:[r.jsx(Mo,{className:"h-8 w-8 text-blue-600"}),r.jsx("span",{children:"Meu Catlogo"})]}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Configure seu catlogo pblico para receber encomendas online"})]})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs("button",{onClick:j,className:"flex items-center space-x-2 bg-blue-100 text-blue-700 px-4 py-2 rounded-lg hover:bg-blue-200 transition-colors",children:[r.jsx(Kp,{className:"h-4 w-4"}),r.jsx("span",{children:"Copiar Link"})]}),r.jsxs("button",{onClick:()=>p(!0),className:"flex items-center space-x-2 bg-purple-100 text-purple-700 px-4 py-2 rounded-lg hover:bg-purple-200 transition-colors",children:[r.jsx(qs,{className:"h-4 w-4"}),r.jsx("span",{children:"QR Code"})]}),r.jsxs(q,{to:`/catalogo/${e==null?void 0:e.id}`,target:"_blank",className:"flex items-center space-x-2 bg-green-100 text-green-700 px-4 py-2 rounded-lg hover:bg-green-200 transition-colors",children:[r.jsx(Up,{className:"h-4 w-4"}),r.jsx("span",{children:"Visualizar"})]})]})]})}),r.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Mo,{className:"h-24 w-24 text-gray-300 mx-auto mb-6"}),r.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Catlogo Online"}),r.jsx("p",{className:"text-xl text-gray-600 mb-2",children:"Em breve!"}),r.jsx("p",{className:"text-gray-500 max-w-md mx-auto",children:"Estamos preparando uma funcionalidade incrvel para voc criar e gerenciar seu catlogo online de produtos."})]})})]})})}function z1(){const{userId:e}=Sv(),t=Ct(),[s,a]=N.useState([]),[n,o]=N.useState(null),[i,l]=N.useState(null),[c,d]=N.useState(!1),[h,m]=N.useState({nome:"",whatsapp:"",dataDesejada:"",observacoes:""}),[p,b]=N.useState(!1);N.useEffect(()=>{if(e){const g=G(`produtos_catalogo_${e}`,[]),u=G(`dados_confeitaria_${e}`,null),f=G(`user_${e}`,null);if(!(f!=null&&f.catalogo_ativo)){t("/");return}a(g.filter(w=>w.ativo)),o(u)}},[e,t]);const x=g=>{l(g),d(!0),m({nome:"",whatsapp:"",dataDesejada:"",observacoes:""})},j=()=>{d(!1),l(null)},_=async()=>{if(!(!i||!e)){if(!h.nome.trim()){alert("Por favor, informe seu nome");return}if(!h.whatsapp.trim()){alert("Por favor, informe seu WhatsApp");return}if(!h.dataDesejada){alert("Por favor, informe a data desejada");return}b(!0);try{const g={id:`encomenda_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,produto_id:i.id,cliente_nome:h.nome.trim(),cliente_whatsapp:h.whatsapp.trim(),data_desejada:h.dataDesejada,observacoes:h.observacoes.trim(),status:"nova",data_encomenda:new Date().toISOString(),confeitaria_id:e,valor_total:i.preco_publico},u=G(`encomendas_${e}`,[]);u.push(g),Se(`encomendas_${e}`,u);const f=` *Nova Encomenda - ${n==null?void 0:n.nomeFantasia}*

 *Produto:* ${i.nome}
 *Cliente:* ${h.nome}
 *WhatsApp:* ${h.whatsapp}
 *Data desejada:* ${new Date(h.dataDesejada).toLocaleDateString("pt-BR")}
 *Valor:* R$ ${i.preco_publico.toFixed(2)}
 *Observaes:* ${h.observacoes||"Nenhuma"}

Encomenda realizada atravs do catlogo online.`;if(alert(` Encomenda enviada com sucesso!

Voc receber a confirmao em breve.`),n!=null&&n.whatsapp){const w=`https://wa.me/${n.whatsapp.replace(/\D/g,"")}?text=${encodeURIComponent(f)}`;window.open(w,"_blank")}j()}catch(g){console.error("Erro ao enviar encomenda:",g),alert("Erro ao enviar encomenda. Tente novamente.")}finally{b(!1)}}},v=g=>g.replace(/\D/g,"");return n?r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("header",{className:"bg-white shadow-sm border-b sticky top-0 z-40",children:r.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:n.nomeFantasia}),n.descricao&&r.jsx("p",{className:"text-gray-600 text-sm mt-1",children:n.descricao})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[n.whatsapp&&r.jsxs("a",{href:`https://wa.me/${v(n.whatsapp)}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-2 bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition-colors",children:[r.jsx(_s,{className:"h-4 w-4"}),r.jsx("span",{className:"hidden sm:inline",children:"WhatsApp"})]}),n.instagram&&r.jsxs("a",{href:`https://instagram.com/${n.instagram.replace("@","")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-2 bg-pink-500 text-white px-4 py-2 rounded-lg hover:bg-pink-600 transition-colors",children:[r.jsx(Ij,{className:"h-4 w-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Instagram"})]})]})]}),n.endereco&&r.jsxs("div",{className:"flex items-center space-x-2 text-gray-600 text-sm mt-2",children:[r.jsx(Oj,{className:"h-4 w-4"}),r.jsx("span",{children:n.endereco})]})]})}),r.jsx("main",{className:"max-w-4xl mx-auto px-4 py-8",children:s.length===0?r.jsxs("div",{className:"text-center py-16",children:[r.jsx("div",{className:"bg-gray-100 rounded-full w-24 h-24 flex items-center justify-center mx-auto mb-6",children:r.jsx(tn,{className:"h-12 w-12 text-gray-400"})}),r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-3",children:"Catlogo em Construo"}),r.jsx("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:"Este catlogo ainda no tem produtos disponveis. Volte em breve para ver nossas deliciosas opes!"}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 max-w-sm mx-auto",children:r.jsxs("p",{className:"text-sm text-blue-700",children:[" ",r.jsx("strong",{children:"Para confeiteiras:"}),' Acesse "Meu Catlogo" para adicionar seus produtos.']})})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Nossos Produtos"}),r.jsx("p",{className:"text-gray-600",children:"Escolha e encomende seus doces favoritos"})]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(g=>r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden hover-lift transition-all duration-200 animate-fade-in",children:[r.jsxs("div",{className:"h-48 bg-gradient-to-br from-pink-100 to-purple-100 flex items-center justify-center relative overflow-hidden",children:[r.jsx("div",{className:"text-6xl opacity-80",children:""}),r.jsx("div",{className:"absolute top-2 right-2 bg-white/90 backdrop-blur-sm text-gray-700 px-2 py-1 rounded-full text-xs font-medium",children:g.serve})]}),r.jsxs("div",{className:"p-6",children:[r.jsx("h3",{className:"font-bold text-gray-900 text-xl mb-3",children:g.nome}),r.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-3 leading-relaxed",children:g.descricao_publica}),r.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-6",children:[r.jsxs("div",{className:"flex items-center space-x-1 bg-gray-100 px-3 py-1 rounded-full",children:[r.jsx(ea,{className:"h-4 w-4"}),r.jsx("span",{children:g.prazo_entrega})]}),r.jsx("div",{className:"text-right",children:r.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:["R$ ",g.preco_publico.toFixed(2)]})})]}),r.jsxs("button",{onClick:()=>x(g),className:"w-full bg-gradient-to-r from-pink-500 to-purple-600 text-white px-6 py-3 rounded-xl hover:shadow-lg hover-scale transition-all duration-200 font-semibold flex items-center justify-center space-x-2",children:[r.jsx(tn,{className:"h-4 w-4"}),r.jsx("span",{children:"Encomendar"})]})]})]},g.id))})]})}),c&&i&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 animate-fade-in",children:r.jsx("div",{className:"bg-white rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto animate-scale-in",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Fazer Encomenda"}),r.jsx("button",{onClick:j,className:"text-gray-400 hover:text-gray-600 transition-colors",children:""})]}),r.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-pink-50 to-purple-50 rounded-xl border border-pink-200",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[r.jsx("span",{className:"text-3xl",children:""}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-gray-900",children:i.nome}),r.jsx("p",{className:"text-sm text-gray-600",children:i.descricao_publica})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("span",{className:"text-xl font-bold text-gray-900",children:["R$ ",i.preco_publico.toFixed(2)]}),r.jsxs("div",{className:"text-right text-sm text-gray-600",children:[r.jsxs("div",{children:["Serve: ",i.serve]}),r.jsxs("div",{children:["Entrega: ",i.prazo_entrega]})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" Seu nome *"}),r.jsx("input",{type:"text",value:h.nome,onChange:g=>m({...h,nome:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-transparent",placeholder:"Como devemos te chamar?",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" WhatsApp *"}),r.jsx("input",{type:"tel",value:h.whatsapp,onChange:g=>m({...h,whatsapp:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-transparent",placeholder:"(11) 99999-9999",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" Data desejada *"}),r.jsx("input",{type:"date",value:h.dataDesejada,onChange:g=>m({...h,dataDesejada:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-transparent",min:new Date().toISOString().split("T")[0],required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" Observaes"}),r.jsx("textarea",{value:h.observacoes,onChange:g=>m({...h,observacoes:g.target.value}),className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-transparent",rows:3,placeholder:"Personalizaes, sabores especiais, decorao..."})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-8",children:[r.jsx("button",{onClick:j,className:"bg-gray-100 text-gray-700 py-3 rounded-lg hover:bg-gray-200 transition-colors font-medium",children:"Cancelar"}),r.jsx("button",{onClick:_,disabled:p,className:"bg-gradient-to-r from-pink-500 to-purple-600 text-white py-3 rounded-lg hover:shadow-lg disabled:opacity-50 transition-all duration-200 font-medium",children:p?r.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),r.jsx("span",{children:"Enviando..."})]}):" Enviar Pedido"})]}),r.jsx("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:r.jsxs("p",{className:"text-sm text-blue-700",children:[r.jsx("strong",{children:" Como funciona:"})," Aps enviar, voc receber uma confirmao e poderemos entrar em contato via WhatsApp para finalizar os detalhes da encomenda."]})})]})})})]}):r.jsx("div",{className:"min-h-screen bg-gradient-soft flex items-center justify-center px-4",children:r.jsxs("div",{className:"text-center max-w-md",children:[r.jsx("div",{className:"bg-white rounded-full w-24 h-24 flex items-center justify-center mx-auto mb-6 shadow-lg",children:r.jsx(Mo,{className:"h-12 w-12 text-gray-400"})}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Catlogo no Encontrado"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Este catlogo no existe ou ainda no foi configurado."}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[r.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:" Para Confeiteiras:"}),r.jsxs("p",{className:"text-sm text-blue-700",children:["Para criar seu catlogo pblico, acesse ",r.jsx("strong",{children:'"Meu Catlogo"'})," no dashboard, ative o catlogo e selecione suas receitas."]})]}),r.jsx("button",{onClick:()=>t("/"),className:"bg-gradient-to-r from-pink-500 to-purple-600 text-white px-6 py-3 rounded-lg hover:shadow-lg transition-all duration-200",children:"Voltar ao Incio"})]})})}function B1(){const{user:e}=we(),[t,s]=N.useState([]),[a,n]=N.useState([]),[o,i]=N.useState("todas");return N.useEffect(()=>{if(e){const l=G(`encomendas_${e.id}`,[]),c=G(`produtos_catalogo_${e.id}`,[]),d=l.sort((h,m)=>new Date(m.data_encomenda).getTime()-new Date(h.data_encomenda).getTime());s(d),n(c)}},[e]),o==="todas"||t.filter(l=>l.status===o),r.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:r.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[r.jsx("div",{className:"mb-8",children:r.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[r.jsx(q,{to:"/dashboard",className:"text-gray-600 hover:text-gray-900",children:r.jsx(ye,{className:"h-6 w-6"})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center space-x-3",children:[r.jsx(tn,{className:"h-8 w-8 text-blue-600"}),r.jsx("span",{children:"Encomendas"})]}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Gerencie as encomendas recebidas atravs do seu catlogo"})]})]})}),r.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:r.jsxs("div",{className:"text-center",children:[r.jsx(tn,{className:"h-24 w-24 text-gray-300 mx-auto mb-6"}),r.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Gesto de Encomendas"}),r.jsx("p",{className:"text-xl text-gray-600 mb-2",children:"Em breve!"}),r.jsx("p",{className:"text-gray-500 max-w-md mx-auto",children:"Estamos desenvolvendo um sistema completo para gerenciar todas as suas encomendas de forma organizada e eficiente."})]})})]})})}function q1(){const{user:e,profile:t}=we(),[s,a]=N.useState([]),[n,o]=N.useState("todos"),[i,l]=N.useState(""),[c,d]=N.useState({titulo:"",conteudo:"",categoria:"dica"}),[h,m]=N.useState(!1),[p,b]=N.useState({}),[x,j]=N.useState({});N.useEffect(()=>{a([{id:"1",autor:"Maria Silva",titulo:"Dica: Como calcular o preo ideal para brigadeiros gourmet",conteudo:"Pessoal, descobri uma tcnica incrvel para precificar brigadeiros gourmet! Sempre multiplico o custo dos ingredientes por 3.5 e adiciono R$ 0,50 por unidade de mo de obra. Tem funcionado super bem!",categoria:"dica",curtidas:15,comentarios:[{id:"1-1",autor:"Pedro Santos",conteudo:"tima dica! Vou testar na minha confeitaria.",data:"2025-09-18"},{id:"1-2",autor:"Ana Costa",conteudo:"Funcionou comigo tambm! Obrigada por compartilhar.",data:"2025-09-18"}],data:"2025-09-18",jaInteragiu:!1},{id:"2",autor:"Ana Costa",titulo:"Ajuda: Massa de bolo murcha depois de assada",conteudo:"Gente, preciso de ajuda! Minha massa de bolo fica linda no forno, mas depois murcha. J tentei vrias receitas e sempre acontece isso. Algum tem alguma dica?",categoria:"pergunta",curtidas:3,comentarios:[{id:"2-1",autor:"Joo",conteudo:"Pode ser excesso de fermento ou abertura do forno antes da hora. Deixa assar uns 40min sem abrir!",data:"2025-09-17"}],data:"2025-09-17",jaInteragiu:!1},{id:"3",autor:"Joo Santos",titulo:"Receita: Brownie que nunca falha",conteudo:"Compartilhando com vocs minha receita secreta de brownie! 200g chocolate meio amargo, 100g manteiga, 2 ovos, 100g acar cristal, 50g farinha. Assa 180C por 25min. Sucesso garantido!",categoria:"receita",curtidas:28,comentarios:[],data:"2025-09-16",jaInteragiu:!0},{id:"4",autor:"Carla Lima",titulo:"Negcio: Como aumentei minhas vendas em 300%",conteudo:"Pessoal, quero compartilhar minha estratgia que triplicou minhas vendas em 6 meses: focar em nichos especficos (casamentos), criar pacotes, usar redes sociais estrategicamente e sempre entregar mais que o esperado!",categoria:"negocio",curtidas:42,comentarios:[],data:"2025-09-15",jaInteragiu:!1}])},[]);const _=y=>{a(s.map(C=>C.id===y?{...C,curtidas:C.jaInteragiu?C.curtidas-1:C.curtidas+1,jaInteragiu:!C.jaInteragiu}:C))},v=()=>{if(!c.titulo.trim()||!c.conteudo.trim())return;const y={id:Date.now().toString(),autor:(t==null?void 0:t.nome)||"Usurio",titulo:c.titulo,conteudo:c.conteudo,categoria:c.categoria,curtidas:0,comentarios:[],data:new Date().toISOString().split("T")[0],jaInteragiu:!1};a([y,...s]),d({titulo:"",conteudo:"",categoria:"dica"}),m(!1)},g=y=>{var L,K;const C=(L=x[y])==null?void 0:L.trim();if(!C||!e)return;const S=((K=t==null?void 0:t.nome)==null?void 0:K.split(" ")[0])||"Usurio",I={id:Date.now().toString(),autor:S,conteudo:C,data:new Date().toISOString().split("T")[0]};a(s.map(se=>se.id===y?{...se,comentarios:[...se.comentarios,I]}:se)),j({...x,[y]:""})},u=y=>{b({...p,[y]:!p[y]})};let f=s;n!=="todos"&&(f=f.filter(y=>y.categoria===n)),i.trim()&&(f=f.filter(y=>y.titulo.toLowerCase().includes(i.toLowerCase())||y.conteudo.toLowerCase().includes(i.toLowerCase())||y.autor.toLowerCase().includes(i.toLowerCase())));const w={dica:{nome:"Dicas",cor:"bg-blue-100 text-blue-800",icon:sr},pergunta:{nome:"Perguntas",cor:"bg-yellow-100 text-yellow-800",icon:Oo},receita:{nome:"Receitas",cor:"bg-green-100 text-green-800",icon:_s},negocio:{nome:"Negcio",cor:"bg-purple-100 text-purple-800",icon:Qs}};return r.jsx("div",{className:"min-h-screen bg-background",children:r.jsxs("div",{className:"container mx-auto px-4 py-6 lg:py-8",children:[r.jsx("div",{className:"mb-6 lg:mb-8",children:r.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[r.jsx(q,{to:"/dashboard",className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:r.jsx(ye,{className:"h-6 w-6 text-gray-600"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-foreground mb-1 lg:mb-2",children:"Comunidade DoceCalc "}),r.jsx("p",{className:"text-muted-foreground text-sm lg:text-base",children:"Conecte-se com outros confeiteiros, compartilhe experincias e aprenda juntos!"})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 lg:gap-6 mb-6 lg:mb-8",children:[r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md",children:r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(Qs,{className:"h-10 w-10 text-blue-500"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-2xl font-bold text-gray-900 filter blur-sm select-none",children:"1.234"}),r.jsx("p",{className:"text-gray-600",children:"Confeiteiros ativos"})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md",children:r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(_s,{className:"h-10 w-10 text-green-500"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-2xl font-bold text-gray-900 filter blur-sm select-none",children:"567"}),r.jsx("p",{className:"text-gray-600",children:"Posts este ms"})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md",children:r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(xh,{className:"h-10 w-10 text-pink-500"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-2xl font-bold text-gray-900 filter blur-sm select-none",children:"2.891"}),r.jsx("p",{className:"text-gray-600",children:"Interaes hoje"})]})]})})]}),r.jsx("div",{className:"mb-6 lg:mb-8",children:r.jsxs("div",{className:"relative",children:[r.jsx(Kt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4 lg:h-5 lg:w-5"}),r.jsx("input",{type:"text",placeholder:"Pesquisar posts, autores ou contedo...",value:i,onChange:y=>l(y.target.value),className:"w-full pl-10 pr-4 py-2 lg:py-3 border border-input rounded-lg focus:outline-none focus:ring-2 focus:ring-ring bg-background text-foreground"})]})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 lg:gap-8",children:[r.jsxs("div",{className:"lg:col-span-1",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Categorias"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("button",{onClick:()=>o("todos"),className:`w-full text-left px-3 py-2 rounded-lg transition-colors ${n==="todos"?"bg-pink-100 text-pink-800":"hover:bg-gray-100"}`,children:"Todos os posts"}),Object.entries(w).map(([y,C])=>r.jsx("button",{onClick:()=>o(y),className:`w-full text-left px-3 py-2 rounded-lg transition-colors ${n===y?"bg-pink-100 text-pink-800":"hover:bg-gray-100"}`,children:C.nome},y))]})]}),r.jsx("button",{onClick:()=>m(!h),className:"w-full bg-pink-500 hover:bg-pink-600 text-white font-medium py-3 px-4 rounded-lg transition-colors",children:"+ Criar Novo Post"})]}),r.jsxs("div",{className:"lg:col-span-3",children:[h&&r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Criar Novo Post"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Categoria"}),r.jsxs("select",{value:c.categoria,onChange:y=>d({...c,categoria:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-pink-500",children:[r.jsx("option",{value:"dica",children:"Dica"}),r.jsx("option",{value:"pergunta",children:"Pergunta"}),r.jsx("option",{value:"receita",children:"Receita"}),r.jsx("option",{value:"negocio",children:"Negcio"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ttulo"}),r.jsx("input",{type:"text",value:c.titulo,onChange:y=>d({...c,titulo:y.target.value}),placeholder:"Digite o ttulo do seu post...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-pink-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contedo"}),r.jsx("textarea",{value:c.conteudo,onChange:y=>d({...c,conteudo:y.target.value}),placeholder:"Compartilhe seu conhecimento com a comunidade...",rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-pink-500"})]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsx("button",{onClick:v,className:"flex-1 bg-pink-500 hover:bg-pink-600 text-white py-2 px-4 rounded-md transition-colors",children:"Publicar"}),r.jsx("button",{onClick:()=>m(!1),className:"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 py-2 px-4 rounded-md transition-colors",children:"Cancelar"})]})]})]}),r.jsx("div",{className:"space-y-6",children:f.map(y=>{const C=w[y.categoria],S=C.icon;return r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-10 h-10 bg-pink-100 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-pink-600 font-semibold",children:y.autor.charAt(0)})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:y.autor}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${C.cor}`,children:C.nome}),r.jsx("span",{className:"text-gray-500 text-sm",children:y.data})]})]})]}),r.jsx(S,{className:"h-5 w-5 text-gray-400"})]}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:y.titulo}),r.jsx("p",{className:"text-gray-700 mb-4",children:y.conteudo}),r.jsxs("div",{className:"flex items-center space-x-6 text-gray-500 border-t pt-4",children:[r.jsxs("button",{onClick:()=>_(y.id),className:`flex items-center space-x-2 hover:text-pink-500 transition-colors ${y.jaInteragiu?"text-pink-500":""}`,children:[r.jsx(xh,{className:"h-4 w-4"}),r.jsx("span",{children:y.curtidas})]}),r.jsxs("button",{onClick:()=>u(y.id),className:"flex items-center space-x-2 hover:text-pink-500 transition-colors",children:[r.jsx(Oo,{className:"h-4 w-4"}),r.jsxs("span",{children:[y.comentarios.length," respostas"]})]})]}),p[y.id]&&r.jsxs("div",{className:"mt-4 border-t pt-4",children:[y.comentarios.length>0&&r.jsx("div",{className:"space-y-3 mb-4",children:y.comentarios.map(I=>r.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[r.jsx("div",{className:"w-6 h-6 bg-pink-100 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-pink-600 font-semibold text-xs",children:I.autor.charAt(0)})}),r.jsx("span",{className:"font-medium text-gray-900 text-sm",children:I.autor}),r.jsx("span",{className:"text-gray-500 text-xs",children:I.data})]}),r.jsx("p",{className:"text-gray-700 text-sm",children:I.conteudo})]},I.id))}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-8 h-8 bg-pink-100 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-pink-600 font-semibold text-sm",children:t!=null&&t.nome?t.nome.split(" ")[0].charAt(0):"U"})}),r.jsxs("div",{className:"flex-1 flex items-center space-x-2",children:[r.jsx("input",{type:"text",placeholder:"Escreva uma resposta...",value:x[y.id]||"",onChange:I=>j({...x,[y.id]:I.target.value}),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-pink-500 text-sm",onKeyDown:I=>{I.key==="Enter"&&g(y.id)}}),r.jsx("button",{onClick:()=>g(y.id),className:"bg-pink-500 hover:bg-pink-600 text-white px-3 py-2 rounded-md transition-colors",children:r.jsx(Ea,{className:"h-4 w-4"})})]})]})]})]},y.id)})})]})]})]})})}function V1(){const{user:e,profile:t}=we(),[s,a]=N.useState(!1),[n,o]=N.useState(null),i=()=>{var d;try{const h={usuario:{id:e==null?void 0:e.id,nome:t==null?void 0:t.nome,email:e==null?void 0:e.email,plano:t==null?void 0:t.plano},receitas:G(F.RECEITAS,[]),ingredientes:G(F.INGREDIENTES_USUARIO,[]),clientes:G(F.CLIENTES,[]),orcamentos:G(F.ORCAMENTOS,[]),categorias:G(F.CATEGORIAS,[]),configuracoes:G(F.CONFIGURACOES,{}),dataBackup:new Date().toISOString(),versao:"1.0"},m=JSON.stringify(h,null,2),p=new Blob([m],{type:"application/json"}),b=URL.createObjectURL(p),x=document.createElement("a");x.href=b,x.download=`backup-docecalc-${(d=t==null?void 0:t.nome)==null?void 0:d.replace(/\s+/g,"-")}-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(x),x.click(),document.body.removeChild(x),URL.revokeObjectURL(b),o({tipo:"sucesso",texto:"Backup local criado e baixado com sucesso!"})}catch(h){console.error("Erro ao gerar backup:",h),o({tipo:"erro",texto:"Erro ao gerar backup local. Tente novamente."})}},l=async()=>{if(!e){o({tipo:"erro",texto:"Usurio no est logado."});return}a(!0);try{const d={receitas:G(F.RECEITAS,[]),ingredientes:G(F.INGREDIENTES_USUARIO,[]),clientes:G(F.CLIENTES,[]),orcamentos:G(F.ORCAMENTOS,[]),categorias:G(F.CATEGORIAS,[]),configuracoes:G(F.CONFIGURACOES,{}),dataBackup:new Date().toISOString(),versao:"1.0"},{error:h}=await ne.from("backups_usuarios").insert({usuario_email:e.email||"",dados:d,dispositivo:navigator.userAgent,versao:"1.0",observacoes:"Backup emergencial criado pelo usurio"});if(h)throw h;o({tipo:"sucesso",texto:"Backup enviado para o servidor com sucesso! Seus dados esto seguros."})}catch(d){console.error("Erro ao enviar backup:",d),o({tipo:"erro",texto:"Erro ao enviar backup para o servidor. Seus dados locais continuam seguros."})}finally{a(!1)}},c=d=>{var p;const h=(p=d.target.files)==null?void 0:p[0];if(!h)return;const m=new FileReader;m.onload=b=>{var x;try{const j=JSON.parse((x=b.target)==null?void 0:x.result);if(!j.dataBackup||!j.versao)throw new Error("Arquivo de backup invlido");if(!window.confirm("ATENO: Esta ao sobrescrever todos os seus dados atuais. Deseja continuar?"))return;j.receitas&&Se(F.RECEITAS,j.receitas),j.ingredientes&&Se(F.INGREDIENTES_USUARIO,j.ingredientes),j.clientes&&Se(F.CLIENTES,j.clientes),j.orcamentos&&Se(F.ORCAMENTOS,j.orcamentos),j.categorias&&Se(F.CATEGORIAS,j.categorias),j.configuracoes&&Se(F.CONFIGURACOES,j.configuracoes),o({tipo:"sucesso",texto:"Backup restaurado com sucesso! Recarregue a pgina para ver as alteraes."}),setTimeout(()=>{window.location.reload()},3e3)}catch(j){console.error("Erro ao restaurar backup:",j),o({tipo:"erro",texto:"Erro ao restaurar backup. Verifique se o arquivo est correto."})}},m.readAsText(h)};return r.jsx("div",{className:"min-h-screen bg-gray-50",children:r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[r.jsx(hc,{className:"h-10 w-10 text-red-500"}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-4xl font-bold text-gray-900",children:"Backup Emergencial"}),r.jsx("p",{className:"text-gray-600",children:"Proteja seus dados importantes"})]})]}),r.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6",children:r.jsxs("div",{className:"flex",children:[r.jsx(eo,{className:"h-5 w-5 text-yellow-400"}),r.jsx("div",{className:"ml-3",children:r.jsxs("p",{className:"text-sm text-yellow-700",children:[r.jsx("strong",{children:"Importante:"})," Faa backups regulares dos seus dados. Recomendamos fazer backup semanal ou antes de atualizaes importantes."]})})]})})]}),n&&r.jsx("div",{className:`mb-6 p-4 rounded-lg ${n.tipo==="sucesso"?"bg-green-50 border border-green-200":n.tipo==="erro"?"bg-red-50 border border-red-200":"bg-blue-50 border border-blue-200"}`,children:r.jsxs("div",{className:"flex",children:[n.tipo==="sucesso"&&r.jsx(_j,{className:"h-5 w-5 text-green-500"}),n.tipo==="erro"&&r.jsx(eo,{className:"h-5 w-5 text-red-500"}),n.tipo==="info"&&r.jsx(Rj,{className:"h-5 w-5 text-blue-500"}),r.jsx("div",{className:"ml-3",children:r.jsx("p",{className:`text-sm ${n.tipo==="sucesso"?"text-green-700":n.tipo==="erro"?"text-red-700":"text-blue-700"}`,children:n.texto})})]})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:"Criar Backup"}),r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[r.jsx(ta,{className:"h-6 w-6 text-blue-500"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Backup Local"})]}),r.jsx("p",{className:"text-gray-600 mb-4",children:"Baixe um arquivo com todos os seus dados para guardar no seu computador ou nuvem pessoal."}),r.jsx("button",{onClick:i,className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-medium py-3 px-4 rounded-lg transition-colors",children:"Baixar Backup Local"}),r.jsxs("div",{className:"mt-3 text-sm text-gray-500",children:[r.jsx("p",{children:" Inclui: receitas, ingredientes, clientes, oramentos"}),r.jsx("p",{children:" Formato: arquivo JSON"}),r.jsx("p",{children:" Segurana: dados ficam apenas com voc"})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[r.jsx(hc,{className:"h-6 w-6 text-green-500"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Backup Automtico no Servidor"})]}),r.jsxs("p",{className:"text-gray-600 mb-4",children:[r.jsx("strong",{children:"Faa backup automtico"})," dos seus dados atuais para nossos servidores seguros. No precisa selecionar arquivo - seus dados sero coletados automaticamente!"]}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:r.jsxs("p",{className:"text-sm text-blue-700",children:[r.jsx("strong",{children:"Como funciona:"})," Clique no boto abaixo e seus dados atuais (receitas, ingredientes, clientes, oramentos) sero automaticamente enviados e salvos com segurana em nossos servidores."]})}),r.jsx("button",{onClick:l,disabled:s,className:"w-full bg-green-500 hover:bg-green-600 disabled:bg-gray-400 text-white font-medium py-3 px-4 rounded-lg transition-colors",children:s?"Enviando dados...":" Fazer Backup Automtico"}),r.jsxs("div",{className:"mt-3 text-sm text-gray-500",children:[r.jsx("p",{children:" Backup automtico dos dados atuais"}),r.jsx("p",{children:" Segurana: criptografado e protegido"}),r.jsx("p",{children:" Acesso: apenas voc e equipe tcnica"}),r.jsx("p",{children:" No precisa selecionar arquivos"})]})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:"Restaurar Backup"}),r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[r.jsx(pc,{className:"h-6 w-6 text-purple-500"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Restaurar do Arquivo"})]}),r.jsx("p",{className:"text-gray-600 mb-4",children:"Selecione um arquivo de backup para restaurar seus dados."}),r.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[r.jsx("input",{type:"file",accept:".json",onChange:c,className:"hidden",id:"backup-file"}),r.jsxs("label",{htmlFor:"backup-file",className:"cursor-pointer",children:[r.jsx(pc,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600 mb-2",children:"Clique para selecionar arquivo de backup"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Apenas arquivos .json so aceitos"})]})]}),r.jsx("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:r.jsxs("div",{className:"flex",children:[r.jsx(eo,{className:"h-5 w-5 text-red-500 flex-shrink-0"}),r.jsx("div",{className:"ml-3",children:r.jsxs("p",{className:"text-sm text-red-700",children:[r.jsx("strong",{children:"Ateno:"})," Restaurar um backup ir sobrescrever todos os seus dados atuais. Esta ao no pode ser desfeita."]})})]})})]}),r.jsxs("div",{className:"bg-blue-50 rounded-lg p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-3",children:"Dicas de Segurana"}),r.jsxs("ul",{className:"space-y-2 text-sm text-blue-800",children:[r.jsx("li",{children:" Faa backups regulares (semanal ou quinzenal)"}),r.jsx("li",{children:" Guarde backups em locais seguros (nuvem, HD externo)"}),r.jsx("li",{children:" Teste a restaurao periodicamente"}),r.jsx("li",{children:" Mantenha mltiplas verses de backup"}),r.jsx("li",{children:" Nunca compartilhe arquivos de backup"})]})]})]})]}),r.jsxs("div",{className:"mt-8 bg-white rounded-lg shadow-md p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Resumo dos Seus Dados"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-blue-600",children:G(F.RECEITAS,[]).filter(d=>d.usuario_id===(e==null?void 0:e.id)).length}),r.jsx("p",{className:"text-sm text-gray-600",children:"Receitas"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-green-600",children:G(F.INGREDIENTES_USUARIO,[]).filter(d=>d.usuario_id===(e==null?void 0:e.id)).length}),r.jsx("p",{className:"text-sm text-gray-600",children:"Ingredientes"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-purple-600",children:G(F.CLIENTES,[]).filter(d=>d.usuario_id===(e==null?void 0:e.id)).length}),r.jsx("p",{className:"text-sm text-gray-600",children:"Clientes"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-pink-600",children:G(F.ORCAMENTOS,[]).filter(d=>d.usuario_id===(e==null?void 0:e.id)).length}),r.jsx("p",{className:"text-sm text-gray-600",children:"Oramentos"})]})]})]})]})})}function H1(){const{plan:e,remainingCredits:t,loading:s,useCredit:a,canUseIA:n,upgradePlanType:o,refreshPlan:i}=pn(),[l,c]=N.useState(!1),[d,h]=N.useState([]),m=_=>{h(v=>[...v,`${new Date().toLocaleTimeString()}: ${_}`])},p=()=>{if(n()){const _=a();m(_?` Crdito usado com sucesso. Restam: ${t-1}`:" Falha ao usar crdito")}else m(" Sem crditos disponveis - deve mostrar modal"),c(!0)},b=_=>{o(_),m(` Upgrade para ${_} realizado com sucesso`),c(!1)},x=()=>{const _={...e,creditsUsedThisMonth:0,resetDate:new Date(Date.now()+2592e6).toISOString()};localStorage.setItem("doce_calc_user_plan",JSON.stringify(_)),i(),m(" Reset mensal simulado - crditos restaurados")},j=()=>{h([]),m(" Resultados dos testes limpos")};return s?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-pink-500 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Carregando sistema de crditos..."})]})}):r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("header",{className:"bg-white shadow-sm border-b",children:r.jsx("div",{className:"container mx-auto px-4 py-4",children:r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(q,{to:"/dashboard",className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:r.jsx(ye,{className:"h-6 w-6 text-gray-600"})}),r.jsx(fc,{className:"h-8 w-8 text-pink-500"}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Teste de Crditos IA"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Validao do sistema FASE 1"})]})]})})})}),r.jsx("div",{className:"container mx-auto px-4 py-8",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[r.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[r.jsx(ft,{className:"h-5 w-5 mr-2 text-blue-500"}),"Status Atual do Plano"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[r.jsx("span",{className:"font-medium text-gray-700",children:"Tipo de Plano:"}),r.jsx("span",{className:"text-lg font-bold text-blue-600 capitalize",children:e.planType})]}),r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[r.jsx("span",{className:"font-medium text-gray-700",children:"Crditos Totais:"}),r.jsx("span",{className:"text-lg font-bold text-green-600",children:e.creditsIA})]}),r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[r.jsx("span",{className:"font-medium text-gray-700",children:"Crditos Usados:"}),r.jsx("span",{className:"text-lg font-bold text-orange-600",children:e.creditsUsedThisMonth})]}),r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[r.jsx("span",{className:"font-medium text-gray-700",children:"Crditos Restantes:"}),r.jsx("span",{className:`text-lg font-bold ${t>5?"text-green-600":t>2?"text-yellow-600":"text-red-600"}`,children:e.planType==="premium"?"Ilimitado":t})]}),r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[r.jsx("span",{className:"font-medium text-gray-700",children:"Prximo Reset:"}),r.jsx("span",{className:"text-sm text-gray-600",children:new Date(e.resetDate).toLocaleDateString("pt-BR")})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[r.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[r.jsx(fc,{className:"h-5 w-5 mr-2 text-pink-500"}),"Controles de Teste"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("button",{onClick:p,disabled:!n()&&e.planType!=="premium",className:`w-full flex items-center justify-center px-4 py-3 rounded-lg font-medium transition-colors ${n()||e.planType==="premium"?"bg-blue-600 hover:bg-blue-700 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[r.jsx(zr,{className:"h-4 w-4 mr-2"}),"Simular Uso de 1 Crdito"]}),r.jsxs("button",{onClick:()=>c(!0),className:"w-full flex items-center justify-center px-4 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-medium transition-colors",children:[r.jsx(ft,{className:"h-4 w-4 mr-2"}),"Abrir Modal de Upgrade"]}),r.jsxs("button",{onClick:x,className:"w-full flex items-center justify-center px-4 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors",children:[r.jsx(ro,{className:"h-4 w-4 mr-2"}),"Simular Reset Mensal"]}),r.jsxs("button",{onClick:j,className:"w-full flex items-center justify-center px-4 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-medium transition-colors",children:[r.jsx(Bp,{className:"h-4 w-4 mr-2"}),"Limpar Resultados"]})]})]}),r.jsxs("div",{className:"lg:col-span-2 bg-white rounded-lg shadow-sm border p-6",children:[r.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[r.jsx(_t,{className:"h-5 w-5 mr-2 text-green-500"}),"Resultados dos Testes"]}),r.jsx("div",{className:"bg-gray-900 text-green-400 p-4 rounded-lg font-mono text-sm h-64 overflow-y-auto",children:d.length===0?r.jsx("p",{className:"text-gray-500",children:"Nenhum teste executado ainda..."}):d.map((_,v)=>r.jsx("div",{className:"mb-1",children:_},v))})]})]})}),r.jsx(Sd,{isOpen:l,onClose:()=>c(!1),onUpgrade:b,currentPlan:e.planType,trigger:"manual"})]})}const G1=[{id:"prec_001",pergunta:"Como calcular preo de brigadeiro?",resposta:"Para calcular o preo do brigadeiro, voc deve considerar todos os custos envolvidos. Primeiro, calcule o custo dos ingredientes (leite condensado, chocolate em p, manteiga, granulado). Depois, adicione os custos indiretos como gs, energia eltrica e embalagem. Considere tambm o tempo de preparo multiplicado pelo seu custo/hora de trabalho. Por fim, aplique uma margem de lucro de 60-80% sobre o custo total. Por exemplo: se o custo total for R$ 0,50 por brigadeiro, o preo de venda deve ficar entre R$ 0,80 e R$ 0,90.",categoria:"precificacao",tags:["brigadeiro","calculo","preco","custo","margem"],dificuldade:"iniciante",palavrasChave:["brigadeiro","preo","calcular","custo","ingredientes","margem","lucro"]},{id:"prec_002",pergunta:"Qual margem ideal para doces?",resposta:"A margem de lucro ideal para doces varia entre 60% a 100%, dependendo do tipo de produto e mercado. Para doces simples como brigadeiros, a margem pode ser de 60-70%. Para bolos decorados e produtos mais elaborados, a margem pode chegar a 80-100%. Lembre-se que esta margem deve cobrir no apenas o lucro, mas tambm custos fixos como aluguel, marketing e reserva para equipamentos. Uma boa estratgia  comear com 70% e ajustar conforme a aceitao do mercado.",categoria:"precificacao",tags:["margem","lucro","doces","percentual","estrategia"],dificuldade:"iniciante",palavrasChave:["margem","lucro","ideal","doces","percentual","mercado"]},{id:"prec_003",pergunta:"Preo por peso ou unidade?",resposta:"A escolha entre precificar por peso ou unidade depende do tipo de produto. Para doces pequenos e padronizados (brigadeiros, beijinhos), a precificao por unidade  mais prtica e aceita pelo cliente. Para bolos, tortas e produtos grandes, a precificao por peso (kg)  mais justa. Para produtos personalizados, considere precificar por poro ou tamanho. Uma estratgia hbrida tambm funciona: oferea pacotes por unidade (ex: 50 brigadeiros) e tambm opo por peso para quantidades maiores.",categoria:"precificacao",tags:["preco","peso","unidade","estrategia","produto"],dificuldade:"intermediario",palavrasChave:["preo","peso","unidade","precificar","produto","bolo","brigadeiro"]},{id:"prec_004",pergunta:"Como precificar bolo de festa?",resposta:"Para precificar bolos de festa, calcule separadamente: massa (considere sabor e complexidade), recheio (quantidade de camadas), cobertura (tipo e decorao), mo de obra (horas de trabalho), embalagem e entrega. Bolos simples: custo + 70-80% de margem. Bolos decorados: custo + 90-120% de margem. Considere tambm o peso final - uma boa base  R$ 35-60 por kg, dependendo da complexidade. Para bolos personalizados com decorao elaborada, cobre um valor adicional pela criatividade e tempo extra.",categoria:"precificacao",tags:["bolo","festa","decoracao","margem","peso"],dificuldade:"intermediario",palavrasChave:["bolo","festa","precificar","decorao","massa","recheio","margem"]},{id:"prec_005",pergunta:"Como calcular custo de mo de obra?",resposta:"Para calcular o custo da mo de obra, defina primeiro quanto voc quer ganhar por ms. Divida esse valor pelas horas que pretende trabalhar. Por exemplo: se quer ganhar R$ 3.000/ms trabalhando 160 horas, sua hora vale R$ 18,75. Cronometre cada receita para saber o tempo exato de preparo. Inclua tempo de compras, preparo, decorao e limpeza. Este valor deve ser somado aos custos dos ingredientes antes de aplicar a margem de lucro final.",categoria:"precificacao",tags:["mao-obra","custo","hora","trabalho","tempo"],dificuldade:"intermediario",palavrasChave:["mo de obra","custo","hora","trabalho","calcular","tempo","salrio"]},{id:"tec_001",pergunta:"Por que massa de bolo murcha?",resposta:"A massa do bolo murcha principalmente por trs motivos: abertura do forno durante o cozimento (mudana brusca de temperatura), fermento vencido ou em quantidade incorreta, e temperatura do forno inadequada. Para evitar, use fermento fresco, no abra o forno nos primeiros 30 minutos, pr-aquea o forno corretamente e mantenha temperatura estvel. O teste do palito deve ser feito apenas aps o tempo mnimo de cozimento. Mudanas de altitude tambm afetam - em locais altos, reduza o fermento.",categoria:"tecnicas",tags:["bolo","massa","murcha","fermento","temperatura"],dificuldade:"iniciante",palavrasChave:["massa","bolo","murcha","fermento","forno","temperatura"]},{id:"tec_002",pergunta:"Como fazer chantilly perfeito?",resposta:"Para um chantilly perfeito, use creme de leite fresco bem gelado (mnimo 35% de gordura). Deixe as tigelas e batedores na geladeira por 30 minutos antes. Bata em velocidade mdia, aumentando gradualmente. Adicione acar refinado ou cristal apenas quando comear a engrossar. Pare de bater assim que formar picos firmes - bater demais vira manteiga. Para maior estabilidade, adicione 1 colher de sopa de leite em p. Mantenha sempre refrigerado e use no mximo em 24 horas.",categoria:"tecnicas",tags:["chantilly","creme","bater","gelado","estabilidade"],dificuldade:"iniciante",palavrasChave:["chantilly","creme de leite","bater","gelado","acar","picos"]},{id:"tec_003",pergunta:"Chocolate derreteu, e agora?",resposta:"Se o chocolate derreteu incorretamente (embranqueceu ou endureceu), voc pode recuper-lo. Para chocolate embranquecido: adicione um pouco de creme de leite morno mexendo devagar at voltar ao brilho. Para chocolate que endureceu: adicione algumas gotas de leo vegetal ou manteiga derretida, mexendo em temperatura baixa. Para evitar futuros problemas, sempre derreta em banho-maria ou microondas em potncia baixa, mexendo a cada 30 segundos. Nunca deixe gua entrar em contato com o chocolate.",categoria:"tecnicas",tags:["chocolate","derreter","embranquecer","recuperar","banho-maria"],dificuldade:"intermediario",palavrasChave:["chocolate","derreteu","embranqueceu","recuperar","banho-maria"]},{id:"tec_004",pergunta:"Bolo ressecou, como evitar?",resposta:"Bolo resseca por excesso de farinha, pouco lquido, muito tempo no forno ou temperatura inadequada. Para evitar: mea ingredientes corretamente, no misture demais a massa (desenvolve glten), asse na temperatura certa pelo tempo indicado, teste com palito. Para recuperar bolo ressecado: faa furinhos com palito e regue com calda (gua + acar + essncia), cubra bem e deixe descansar. Para prximas vezes, adicione 1-2 colheres de leo  receita ou substitua parte do leite por iogurte.",categoria:"tecnicas",tags:["bolo","ressecado","umidade","calda","textura"],dificuldade:"iniciante",palavrasChave:["bolo","ressecou","seco","umidade","calda","farinha"]},{id:"tec_005",pergunta:"Como temperar chocolate corretamente?",resposta:"O tempero do chocolate  essencial para brilho e snap perfeitos. Derreta 2/3 do chocolate at 50-55C (ao leite) ou 55-58C (meio amargo). Retire do fogo e adicione o 1/3 restante em pedaos pequenos, mexendo at esfriar para 27-28C. Reaque suavemente at 29-30C (ao leite) ou 31-32C (meio amargo). Teste em papel manteiga - deve endurecer brilhoso em 3 minutos. Use termmetro culinrio para preciso. Chocolate bem temperado dura mais e no embranquece.",categoria:"tecnicas",tags:["chocolate","temperar","temperatura","brilho","tecnica"],dificuldade:"avancado",palavrasChave:["chocolate","temperar","temperatura","brilho","termmetro"]},{id:"ing_001",pergunta:"Posso substituir manteiga por margarina?",resposta:"Sim,  possvel substituir manteiga por margarina na maioria das receitas, mas o sabor e textura podem mudar. A manteiga tem sabor mais rico e proporciona melhor textura em massas. Para bolos, use margarina cremosa em temperatura ambiente. Para biscoitos e massas folhadas, prefira manteiga para melhor resultado. Se usar margarina, escolha uma com pelo menos 60% de gordura. A proporo  1:1, mas pode ser necessrio ajustar lquidos da receita. Para brigadeiros e doces cremosos, a manteiga  sempre prefervel.",categoria:"ingredientes",tags:["manteiga","margarina","substituicao","textura","sabor"],dificuldade:"iniciante",palavrasChave:["manteiga","margarina","substituir","diferena","textura","sabor"]},{id:"ing_002",pergunta:"Como conservar chocolate?",resposta:"Conserve chocolate em local seco, arejado e escuro, entre 15-18C. Evite geladeira pois causa condensao e embranquecimento. Guarde em recipiente hermtico longe de odores fortes. Chocolate ao leite dura 12-16 meses, meio amargo at 24 meses. Se precisar refrigerar em clima quente, embrulhe bem em papel filme e coloque em recipiente fechado. Retire da geladeira e deixe chegar  temperatura ambiente antes de usar. Chocolate derretido pode ser congelado em formas de gelo para uso posterior.",categoria:"ingredientes",tags:["chocolate","conservar","armazenar","temperatura","validade"],dificuldade:"iniciante",palavrasChave:["chocolate","conservar","guardar","temperatura","geladeira","validade"]},{id:"ing_003",pergunta:"Leite condensado caseiro vs industrializado?",resposta:"O leite condensado caseiro tem sabor mais natural e voc controla o acar, mas demora 2-3 horas para fazer e pode cristalizar. O industrializado  mais prtico, tem consistncia uniforme e maior durabilidade. Para doces que sero vendidos, o industrializado oferece mais segurana na textura. O caseiro  ideal para consumo prprio e tem custo menor. Receita bsica: 1L leite + 300g acar, cozinhe mexendo at reduzir pela metade. Para negcio, considere o tempo investido versus economia.",categoria:"ingredientes",tags:["leite-condensado","caseiro","industrializado","comparacao","custo"],dificuldade:"intermediario",palavrasChave:["leite condensado","caseiro","industrializado","diferena","vantagem"]},{id:"ing_004",pergunta:"Qual acar usar em cada doce?",resposta:"Cada tipo de acar tem sua funo: Cristal - universal, boa dissoluo, ideal para massas e caldas. Refinado - dissolve rpido, perfeito para chantilly e merengues. Demerara - sabor suave, timo para cookies e bolos rsticos. Mascavo - sabor intenso, ideal para paocas e doces caseiros. Confeiteiro - no cristaliza, perfeito para glacs e coberturas. Acar invertido - evita cristalizao em bombons. Para iniciantes, cristal e refinado atendem 90% das necessidades.",categoria:"ingredientes",tags:["acucar","tipos","usos","cristal","refinado"],dificuldade:"intermediario",palavrasChave:["acar","tipos","cristal","refinado","demerara","mascavo","confeiteiro"]},{id:"ing_005",pergunta:"Como escolher ovos para confeitaria?",resposta:"Use sempre ovos frescos - teste colocando na gua: fresco afunda, velho boia. Para claras em neve, ovos com 3-7 dias rendem melhor que muito frescos. Ovos grandes (60g+) so ideais para receitas profissionais. Mantenha sempre refrigerados e use em temperatura ambiente para massas - retire 30min antes. Para segurana alimentar, evite ovos com casca rachada. Em receitas que levam ovos crus (mousse), considere usar ovos pasteurizados. Cor da gema no afeta qualidade, apenas a alimentao da galinha.",categoria:"ingredientes",tags:["ovos","frescor","qualidade","armazenamento","seguranca"],dificuldade:"iniciante",palavrasChave:["ovos","frescos","qualidade","escolher","refrigerados","temperatura"]},{id:"mark_001",pergunta:"Como fotografar doces?",resposta:"Para fotografar doces use luz natural prxima a janela, evite flash direto. Limpe bem os doces e remova marcas de dedos. Use fundos neutros (branco, madeira clara) que destaquem o produto. Fotografe de diferentes ngulos: frente, 45 e cenital. Para brigadeiros, organize em grupos mpares. Adicione elementos complementares como ingredientes ou utenslios. Use aplicativos como VSCO ou Lightroom para ajustar brilho e contraste. Mantenha consistncia visual em todas as fotos do seu catlogo.",categoria:"marketing",tags:["fotografia","doces","luz","fundo","angulo"],dificuldade:"iniciante",palavrasChave:["fotografar","doces","luz","natural","fundo","ngulo","celular"]},{id:"mark_002",pergunta:"Onde divulgar minha confeitaria?",resposta:"Priorize Instagram (visual  tudo) com posts dirios e stories interativos. Facebook para alcance local e eventos. WhatsApp Business para atendimento direto e catlogo. TikTok para receitas rpidas e bastidores. Participe de grupos locais de mes e vizinhana. Crie parcerias com buffets e organizadores de eventos. Invista em Google Meu Negcio para aparecer em buscas locais. Oferea degustaes em eventos e feiras. O boca a boca ainda  o melhor marketing - qualidade sempre!",categoria:"marketing",tags:["divulgacao","redes-sociais","instagram","local","parcerias"],dificuldade:"iniciante",palavrasChave:["divulgar","marketing","Instagram","Facebook","WhatsApp","redes sociais"]},{id:"mark_003",pergunta:"Como precificar para delivery?",resposta:"Para delivery, considere: custo do produto + embalagem especial + taxa de entrega + margem adicional de 10-15% pelo servio. Use embalagens que mantenham qualidade (brigadeiros em forminhas firmes, bolos em caixas resistentes). Estabelea pedido mnimo para viabilizar entrega. Oferea horrios programados para otimizar rotas. Considere parceria com apps (iFood, Uber Eats) mas calcule as comisses no preo. Para rea local, delivery prprio via WhatsApp pode ser mais rentvel.",categoria:"marketing",tags:["delivery","precificacao","embalagem","entrega","aplicativos"],dificuldade:"intermediario",palavrasChave:["delivery","entrega","precificar","embalagem","pedido mnimo","apps"]},{id:"mark_004",pergunta:"Como criar cardpio atrativo?",resposta:"Cardpio atrativo deve ter: fotos profissionais de todos os produtos, descries que despertem desejo (no apenas ingredientes), preos claros e organizados por categoria. Use nomes criativos mas descritivos. Destaque produtos especiais e sazonais. Inclua informaes sobre alergnicos. Mantenha layout limpo e legvel. No digital, use formato PDF ou catlogo no WhatsApp Business. Atualize regularmente com novidades. Teste diferentes verses e veja qual gera mais vendas.",categoria:"marketing",tags:["cardapio","menu","visual","descricoes","precos"],dificuldade:"intermediario",palavrasChave:["cardpio","menu","fotos","descrio","preos","atrativo","visual"]},{id:"mark_005",pergunta:"Como fazer promoes que vendem?",resposta:'Promoes eficazes: "Leve 3 pague 2" funciona melhor que desconto direto. Combos familiares para finais de semana. Fidelidade: 10 encomenda com desconto. Promoes sazonais (Dia das Mes, Pscoa). Flash sales com tempo limitado criam urgncia. Sorteios no Instagram aumentam engajamento. Evite descontos constantes - desvaloriza produto. Teste diferentes estratgias e mea resultados. Sempre comunique o valor original para mostrar economia. Use gatilhos mentais: escassez, urgncia e exclusividade.',categoria:"marketing",tags:["promocoes","vendas","desconto","fidelidade","combos"],dificuldade:"intermediario",palavrasChave:["promoes","desconto","combo","fidelidade","vendas","estratgia"]}],W1=()=>{const e=[];for(let t=6;t<=50;t++)e.push({id:`prec_${t.toString().padStart(3,"0")}`,pergunta:`Pergunta de precificao ${t}`,resposta:"Resposta detalhada sobre precificao com pelo menos 150 palavras explicando conceitos importantes para confeiteiros sobre custos, margens, estratgias de preo e competitividade no mercado de doces artesanais. Esta resposta inclui dicas prticas e exemplos reais aplicveis ao dia a dia da confeitaria.",categoria:"precificacao",tags:["preco","custo","margem","lucro","estrategia"],dificuldade:t%3===0?"avancado":t%2===0?"intermediario":"iniciante",palavrasChave:["preo","custo","margem","lucro","calcular"]});for(let t=6;t<=50;t++)e.push({id:`tec_${t.toString().padStart(3,"0")}`,pergunta:`Tcnica de confeitaria ${t}`,resposta:"Explicao detalhada sobre tcnica culinria especfica para confeitaria, incluindo passo a passo, dicas profissionais, problemas comuns e solues, melhores prticas e truques para garantir resultados perfeitos. Esta resposta foi elaborada por especialistas em confeitaria para ajudar desde iniciantes at profissionais experientes.",categoria:"tecnicas",tags:["tecnica","preparo","massa","cobertura","decoracao"],dificuldade:t%3===0?"avancado":t%2===0?"intermediario":"iniciante",palavrasChave:["tcnica","preparo","massa","bolo","doce"]});for(let t=6;t<=50;t++)e.push({id:`ing_${t.toString().padStart(3,"0")}`,pergunta:`Sobre ingrediente especfico ${t}`,resposta:"Informao completa sobre ingrediente usado em confeitaria, incluindo propriedades, formas de uso, armazenamento adequado, substituies possveis, dicas de compra, qualidade ideal e como afeta o resultado final dos doces. Essencial para qualquer confeiteiro que busca excelncia em seus produtos.",categoria:"ingredientes",tags:["ingrediente","qualidade","armazenamento","substituicao","uso"],dificuldade:t%3===0?"avancado":t%2===0?"intermediario":"iniciante",palavrasChave:["ingrediente","qualidade","usar","conservar","escolher"]});for(let t=6;t<=50;t++)e.push({id:`mark_${t.toString().padStart(3,"0")}`,pergunta:`Estratgia de marketing ${t}`,resposta:"Estratgia completa de marketing para confeitaria, abordando divulgao, redes sociais, atendimento ao cliente, fidelizao, precificao competitiva e crescimento do negcio. Inclui casos de sucesso, mtricas importantes e ferramentas prticas para aumentar vendas e construir marca forte no mercado local.",categoria:"marketing",tags:["marketing","vendas","cliente","divulgacao","estrategia"],dificuldade:t%3===0?"avancado":t%2===0?"intermediario":"iniciante",palavrasChave:["marketing","vendas","cliente","divulgar","estratgia"]});return e},K1=()=>[...G1,...W1()];function J1(e){const t=K1(),s=Pt(e),a=Q1(s),o=Y1(a,t).filter(h=>h.score>=2);if(o.length===0)return{answer:null,confidence:0,suggestions:tN(t,3),relatedQuestions:aN()};const i=o[0],l=eN(i.score,a.length),c=rN(i.item,t,3),d=sN(i.item.categoria,t);return{answer:i.item,confidence:l,suggestions:c,relatedQuestions:d}}function Pt(e){return e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\w\s]/g," ").replace(/\s+/g," ").trim()}function Q1(e){const t=["o","a","os","as","um","uma","uns","umas","de","do","da","dos","das","em","no","na","nos","nas","para","por","com","sem","ate","sobre","entre","e","ou","mas","pois","que","se","como","eu","tu","ele","ela","nos","vos","eles","elas","meu","minha","meus","minhas","seu","sua","seus","suas","este","esta","estes","estas","esse","essa","esses","essas","aquele","aquela","aqueles","aquelas","isso","isto","aquilo","ser","estar","ter","haver","fazer","poder","querer","muito","mais","menos","bem","mal","melhor","pior"];return e.split(" ").filter(s=>s.length>2&&!t.includes(s))}function Y1(e,t){const s=[];for(const a of t){const n=X1(e,a),o=Z1(e,a);n>0&&s.push({item:a,score:n,matchedWords:o})}return s.sort((a,n)=>n.score-a.score)}function X1(e,t){let s=0;const a=[Pt(t.pergunta),Pt(t.resposta),...t.tags.map(Pt),...t.palavrasChave.map(Pt)].join(" ");for(const o of e)a.includes(o)&&(s+=1);const n=Pt(t.pergunta);for(const o of e)n.includes(o)&&(s+=2);for(const o of t.tags)for(const i of e)Pt(o).includes(i)&&(s+=1.5);return s}function Z1(e,t){const s=[],a=[Pt(t.pergunta),...t.tags.map(Pt),...t.palavrasChave.map(Pt)].join(" ");for(const n of e)a.includes(n)&&s.push(n);return s}function eN(e,t){const s=t*3,a=Math.min(e/s*100,95);return Math.round(a)}function tN(e,t){return[...e].sort(()=>.5-Math.random()).slice(0,t)}function sN(e,t){return t.filter(s=>s.categoria===e).slice(0,5).map(s=>s.pergunta)}function rN(e,t,s){const a=[];for(const n of t){if(n.id===e.id)continue;const i=n.tags.filter(l=>e.tags.includes(l)).length;i>0&&a.push({item:n,similarity:i})}return a.sort((n,o)=>o.similarity-n.similarity).slice(0,s).map(n=>n.item)}function aN(){return["Como calcular preo de brigadeiro?","Por que massa de bolo murcha?","Como conservar chocolate?","Como fotografar doces?","Qual margem ideal para doces?"]}function nN(e,t,s={}){const{nome:a="Confeiteiro(a)",nivel:n="iniciante",especialidades:o=[],receitas:i=[]}=s;if(!e.answer)return cN(a,n,o);const l=e.answer.resposta,c=oN(a,n),d=iN(l,n),h=lN(e.answer,i,o),m=`

 *Esta resposta tem ${e.confidence}% de preciso baseada na sua pergunta.*`;return`${c}

${d}${h}${m}`}function oN(e,t,s){const a=[`Ol ${e}! Que tima pergunta!`,`Oi ${e}! Vou te ajudar com isso.`,`${e}, essa  uma excelente dvida!`,`Perfeito, ${e}! Vamos esclarecer isso.`],n={iniciante:"Como voc est comeando na confeitaria, vou explicar de forma bem didtica:",intermediario:"Com sua experincia, voc certamente vai aproveitar essas dicas:",avancado:"Para algum do seu nvel, aqui esto os detalhes tcnicos:"},o=a[Math.floor(Math.random()*a.length)],i=n[t]||n.iniciante;return`${o} ${i}`}function iN(e,t){switch(t){case"iniciante":return e+`

 *Dica para iniciantes: Pratique bastante e no tenha medo de errar. Cada erro  um aprendizado!*`;case"intermediario":return e+`

 *Dica pro: Experimente variar ingredientes e tcnicas para criar sua assinatura nica.*`;case"avancado":return e+`

 *Para experts: Considere os aspectos cientficos como pH, temperatura e reaes qumicas para resultados perfeitos.*`;default:return e}}function lN(e,t,s){const a=[];if(s.length>0){const i=s.find(l=>e.tags.some(c=>c.includes(l.toLowerCase()))||e.palavrasChave.some(c=>c.includes(l.toLowerCase())));i&&a.push(`
 *Conectando com sua especialidade em ${i}: Esta tcnica vai elevar ainda mais seus ${i}!*`)}if(t.length>0){const i=t.find(l=>e.tags.some(c=>l.toLowerCase().includes(c))||e.palavrasChave.some(c=>l.toLowerCase().includes(c)));i&&a.push(`
 *Aplicando em suas receitas: Voc pode usar essa dica na sua receita de ${i}.*`)}const o={precificacao:`
 *Lembre-se: Um preo justo valoriza seu trabalho e garante a sustentabilidade do negcio.*`,tecnicas:`
 *Prtica leva  perfeio: Anote suas observaes para aprimorar cada vez mais.*`,ingredientes:`
 *Qualidade dos ingredientes  investimento: Bons ingredientes fazem toda a diferena no resultado final.*`,marketing:`
 *Consistncia  chave: Mantenha sua presena online ativa e autntica.*`}[e.categoria];return o&&a.push(o),a.join("")}function cN(e,t,s){const a=s.length>0?` Vejo que voc trabalha com ${s.join(", ")}, que tal algumas dicas especficas?`:"",n={iniciante:"Como voc est comeando, sugiro focar primeiro nos fundamentos.",intermediario:"Com sua experincia, voc pode explorar tcnicas mais avanadas.",avancado:"Para algum do seu nvel, que tal experimentar inovaes na confeitaria?"};return`Ol ${e}! No encontrei uma resposta especfica para sua pergunta, mas estou aqui para ajudar!${a}

${n[t]||n.iniciante}

 **Que tal perguntar sobre:**
 Como calcular preos de doces
 Tcnicas de preparo e decorao  
 Dicas sobre ingredientes
 Estratgias de marketing para confeitaria

Estou aqui para te ajudar a crescer na confeitaria! Qual sua prxima dvida?`}function dN(){try{const e=localStorage.getItem("doce_calc_user_context");if(e)return JSON.parse(e)}catch(e){console.error("Erro ao carregar contexto do usurio:",e)}return{nome:"Confeiteiro(a)",nivel:"iniciante",especialidades:["brigadeiros","bolos"],receitas:["Brigadeiro Gourmet","Bolo de Chocolate","Torta de Limo"],preferencias:["doces cremosos","decorao simples"]}}const tl="doce_calc_chat_session";function uN(){const[e,t]=N.useState([]),[s,a]=N.useState(!1),{canUseIA:n,useCredit:o}=pn();N.useEffect(()=>{const d=localStorage.getItem(tl);if(d)try{const h=JSON.parse(d);t(h.messages)}catch(h){console.error("Erro ao carregar chat:",h)}},[]);const i=d=>{const h={id:"current",messages:d,createdAt:new Date,updatedAt:new Date};localStorage.setItem(tl,JSON.stringify(h))};return{messages:e,isLoading:s,sendMessage:async d=>{if(!d.trim()||!n())return;const h={id:`user_${Date.now()}`,sender:"user",content:d.trim(),timestamp:new Date},m={id:`ai_${Date.now()}`,sender:"ai",content:"",timestamp:new Date,isLoading:!0},p=[...e,h,m];t(p),a(!0);try{const b=Math.random()*2e3+1e3;await new Promise(y=>setTimeout(y,b));const x=J1(d);if(!o())throw new Error("Falha ao processar crdito");const _=dN(),v=nN(x,d,_),g=x.confidence,u=x.relatedQuestions,f={id:`ai_${Date.now()}`,sender:"ai",content:v,timestamp:new Date,confidence:g,relatedQuestions:u},w=[...e,h,f];t(w),i(w)}catch(b){console.error("Erro ao processar mensagem:",b);const x={id:`ai_${Date.now()}`,sender:"ai",content:"Ops! Algo deu errado. Tente novamente em alguns instantes. ",timestamp:new Date},j=[...e,h,x];t(j),i(j)}finally{a(!1)}},clearChat:()=>{t([]),localStorage.removeItem(tl)},hasCredits:n()}}const hN=[{id:"precificacao",name:"Precificao",icon:"",color:"text-green-600",questions:["Como calcular preo de brigadeiro?","Qual margem ideal para doces?","Preo por peso ou unidade?","Como precificar bolo de festa?","Como calcular custo de mo de obra?"]},{id:"tecnicas",name:"Tcnicas",icon:"",color:"text-blue-600",questions:["Por que massa de bolo murcha?","Como fazer chantilly perfeito?","Chocolate derreteu, e agora?","Bolo ressecou, como evitar?","Como temperar chocolate corretamente?"]},{id:"ingredientes",name:"Ingredientes",icon:"",color:"text-purple-600",questions:["Posso substituir manteiga por margarina?","Como conservar chocolate?","Leite condensado caseiro vs industrializado?","Qual acar usar em cada doce?","Como escolher ovos para confeitaria?"]},{id:"marketing",name:"Marketing",icon:"",color:"text-pink-600",questions:["Como fotografar doces?","Onde divulgar minha confeitaria?","Como precificar para delivery?","Como criar cardpio atrativo?","Como fazer promoes que vendem?"]}];function mN(){const{messages:e,isLoading:t,sendMessage:s,clearChat:a,hasCredits:n}=uN(),{plan:o,remainingCredits:i,upgradePlanType:l}=pn(),[c,d]=N.useState(""),[h,m]=N.useState(null),[p,b]=N.useState(!1),x=N.useRef(null),j=N.useRef(null);N.useEffect(()=>{var w;(w=x.current)==null||w.scrollIntoView({behavior:"smooth"})},[e]),N.useEffect(()=>{var w;(w=j.current)==null||w.focus()},[]);const _=async()=>{if(!c.trim()||t)return;if(!n){b(!0);return}const w=c;d(""),await s(w)},v=w=>{w.key==="Enter"&&!w.shiftKey&&(w.preventDefault(),_())},g=w=>{var y;d(w),(y=j.current)==null||y.focus()},u=w=>{l(w),b(!1)},f=w=>new Date(w).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"});return r.jsxs("div",{className:"flex h-screen bg-gray-50",children:[r.jsxs("div",{className:"w-80 bg-white border-r border-gray-200 flex flex-col",children:[r.jsxs("div",{className:"p-4 border-b border-gray-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx(q,{to:"/dashboard",className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:r.jsx(ye,{className:"h-5 w-5 text-gray-600"})}),r.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",title:"Limpar conversa",children:r.jsx(Js,{className:"h-4 w-4 text-gray-600"})})]}),r.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-pink-500 to-purple-600 rounded-full flex items-center justify-center",children:r.jsx(to,{className:"h-6 w-6 text-white"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-lg font-bold text-gray-900",children:"DoceBot Pro"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Seu assistente de confeitaria"})]})]}),r.jsx("div",{className:"bg-gray-50 rounded-lg p-3",children:r.jsx(Yp,{className:"justify-center"})})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[r.jsxs("h3",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center",children:[r.jsx(Jp,{className:"h-4 w-4 mr-2"}),"Categorias de Ajuda"]}),r.jsx("div",{className:"space-y-3",children:hN.map(w=>r.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[r.jsx("button",{onClick:()=>m(h===w.id?null:w.id),className:"w-full p-3 text-left hover:bg-gray-50 transition-colors rounded-lg",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-lg",children:w.icon}),r.jsx("span",{className:"font-medium text-gray-900",children:w.name})]}),r.jsx(sr,{className:`h-4 w-4 transition-transform ${h===w.id?"rotate-90":""} ${w.color}`})]})}),h===w.id&&r.jsx("div",{className:"px-3 pb-3",children:r.jsx("div",{className:"space-y-2",children:w.questions.map((y,C)=>r.jsx("button",{onClick:()=>g(y),className:"w-full text-left p-2 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded transition-colors",children:y},C))})})]},w.id))})]})]}),r.jsxs("div",{className:"flex-1 flex flex-col",children:[r.jsx("div",{className:"bg-white border-b border-gray-200 p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Chat com DoceBot Pro"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Pergunte qualquer coisa sobre confeitaria"})]}),r.jsx("div",{className:"text-sm text-gray-500",children:e.length>0?`${Math.floor(e.length/2)} perguntas`:"Nova conversa"})]})}),r.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:e.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-pink-500 to-purple-600 rounded-full flex items-center justify-center mb-4",children:r.jsx(to,{className:"h-8 w-8 text-white"})}),r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Ol! Sou o DoceBot Pro "}),r.jsx("p",{className:"text-gray-600 mb-6 max-w-md",children:"Estou aqui para te ajudar com tudo sobre confeitaria: preos, tcnicas, ingredientes e marketing. O que voc gostaria de saber?"}),r.jsx("div",{className:"grid grid-cols-2 gap-3 max-w-lg",children:["Como calcular preo de brigadeiro?","Por que massa de bolo murcha?","Como conservar chocolate?","Como fotografar doces?"].map(w=>r.jsx("button",{onClick:()=>g(w),className:"p-3 bg-white border border-gray-200 rounded-lg hover:border-pink-300 hover:bg-pink-50 transition-colors text-sm text-left",children:w},w))})]}):r.jsxs("div",{className:"space-y-4",children:[e.map(w=>r.jsx("div",{className:`flex ${w.sender==="user"?"justify-end":"justify-start"}`,children:r.jsxs("div",{className:`flex items-start space-x-2 max-w-xs lg:max-w-md ${w.sender==="user"?"flex-row-reverse space-x-reverse":""}`,children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${w.sender==="user"?"bg-blue-500":"bg-gradient-to-br from-pink-500 to-purple-600"}`,children:w.sender==="user"?r.jsx(bs,{className:"h-4 w-4 text-white"}):r.jsx(to,{className:"h-4 w-4 text-white"})}),r.jsx("div",{className:`rounded-lg p-3 ${w.sender==="user"?"bg-blue-500 text-white":"bg-white border border-gray-200 text-gray-900"}`,children:w.isLoading?r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(en,{className:"h-4 w-4 animate-spin"}),r.jsx("span",{className:"text-sm",children:"DoceBot est pensando..."})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"whitespace-pre-wrap text-sm",children:w.content}),r.jsxs("div",{className:`flex items-center justify-between mt-2 text-xs ${w.sender==="user"?"text-blue-100":"text-gray-500"}`,children:[r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(ea,{className:"h-3 w-3"}),r.jsx("span",{children:f(w.timestamp)})]}),w.confidence&&r.jsxs("span",{children:["Preciso: ",w.confidence,"%"]})]}),w.relatedQuestions&&w.relatedQuestions.length>0&&r.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-100",children:[r.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Perguntas relacionadas:"}),r.jsx("div",{className:"space-y-1",children:w.relatedQuestions.slice(0,3).map((y,C)=>r.jsxs("button",{onClick:()=>g(y),className:"block w-full text-left text-xs text-gray-600 hover:text-pink-600 transition-colors",children:[" ",y]},C))})]})]})})]})},w.id)),r.jsx("div",{ref:x})]})}),r.jsxs("div",{className:"bg-white border-t border-gray-200 p-4",children:[n?null:r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-red-900",children:"Crditos esgotados"}),r.jsx("p",{className:"text-sm text-red-700",children:"Voc usou todos os seus crditos IA deste ms."})]}),r.jsx("button",{onClick:()=>b(!0),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Fazer Upgrade"})]})}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"flex-1 relative",children:r.jsx("input",{ref:j,type:"text",value:c,onChange:w=>d(w.target.value),onKeyPress:v,placeholder:n?"Digite sua pergunta sobre confeitaria...":"Sem crditos disponveis",disabled:!n||t,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed"})}),r.jsx("button",{onClick:_,disabled:!c.trim()||!n||t,className:"px-4 py-3 bg-pink-500 text-white rounded-lg hover:bg-pink-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:r.jsx(Ea,{className:"h-4 w-4"})})]}),r.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Pressione Enter para enviar  ",i," consultas restantes este ms"]})]})]}),r.jsx(Sd,{isOpen:p,onClose:()=>b(!1),onUpgrade:u,currentPlan:o.planType,trigger:"no_credits"})]})}const zh=[{id:"precificacao",nome:"Precificao",descricao:"Aprenda a calcular preos justos e lucrativos",icone:"",totalEbooks:8},{id:"tecnicas",nome:"Tcnicas",descricao:"Domine as tcnicas profissionais de confeitaria",icone:"",totalEbooks:12},{id:"marketing",nome:"Marketing",descricao:"Estratgias para promover seu negcio",icone:"",totalEbooks:6},{id:"gestao",nome:"Gesto",descricao:"Administre sua confeitaria como um profissional",icone:"",totalEbooks:5},{id:"receitas",nome:"Receitas",descricao:"Receitas exclusivas e testadas",icone:"",totalEbooks:15}],fN=[{id:"ebook-1",titulo:"Precificao Inteligente para Confeiteiros",autor:"Ana Paula Santos",categoria:"precificacao",descricao:"O guia definitivo para calcular preos que garantem lucro sem perder clientes",resumo:"Aprenda a metodologia step-by-step para precificar qualquer doce, considerando todos os custos e margens de lucro adequadas.",preco:47.9,precoCreditos:12,imagemCapa:"/placeholder-ebook-1.jpg",avaliacoes:4.8,numeroAvaliacoes:234,tags:["precificao","custos","margem","lucro"],nivel:"iniciante",paginas:85,idioma:"Portugus",dataLancamento:new Date("2025-01-15"),bestseller:!0,promocao:{desconto:20,precoOriginal:59.9,dataFim:new Date("2025-10-01")},preview:{capitulos:["Introduo  Precificao","Calculando Custos Fixos"],paginasGratuitas:12}},{id:"ebook-2",titulo:"Tcnicas Avanadas de Chocolate",autor:"Chef Ricardo Almeida",categoria:"tecnicas",descricao:"Domine a arte do chocolate com tcnicas profissionais de temperagem e modelagem",resumo:"Do bsico ao avanado: temperagem perfeita, modelagem, recheios gourmet e decoraes impressionantes.",preco:89.9,precoCreditos:22,imagemCapa:"/placeholder-ebook-2.jpg",avaliacoes:4.9,numeroAvaliacoes:156,tags:["chocolate","temperagem","modelagem","gourmet"],nivel:"avancado",paginas:124,idioma:"Portugus",dataLancamento:new Date("2025-02-20"),bestseller:!0,preview:{capitulos:["Fundamentos do Chocolate","Temperagem Clssica"],paginasGratuitas:18}},{id:"ebook-3",titulo:"Marketing Digital para Confeiteiros",autor:"Juliana Costa",categoria:"marketing",descricao:"Transforme suas redes sociais em uma mquina de vendas",resumo:"Estratgias prticas para Instagram, Facebook e WhatsApp Business. Inclui templates prontos.",preco:39.9,precoCreditos:10,imagemCapa:"/placeholder-ebook-3.jpg",avaliacoes:4.7,numeroAvaliacoes:189,tags:["marketing","redes sociais","vendas","instagram"],nivel:"iniciante",paginas:67,idioma:"Portugus",dataLancamento:new Date("2025-03-10"),bestseller:!1,preview:{capitulos:["Instagram para Confeiteiros","Criando Contedo que Vende"],paginasGratuitas:10}},{id:"ebook-4",titulo:"Gesto Financeira da Confeitaria",autor:"Carlos Mendes",categoria:"gestao",descricao:"Organize suas finanas e maximize seus lucros",resumo:"Fluxo de caixa, controle de estoque, anlise de rentabilidade e planejamento financeiro.",preco:55.9,precoCreditos:14,imagemCapa:"/placeholder-ebook-4.jpg",avaliacoes:4.6,numeroAvaliacoes:98,tags:["gesto","finanas","lucro","estoque"],nivel:"intermediario",paginas:92,idioma:"Portugus",dataLancamento:new Date("2025-01-25"),bestseller:!1,preview:{capitulos:["Fundamentos Financeiros","Controle de Fluxo de Caixa"],paginasGratuitas:15}},{id:"ebook-5",titulo:"50 Receitas de Brigadeiros Gourmet",autor:"Marina Silva",categoria:"receitas",descricao:"As melhores receitas de brigadeiros que conquistam qualquer paladar",resumo:"Desde os clssicos at combinaes inovadoras. Todas as receitas testadas e aprovadas.",preco:29.9,precoCreditos:8,imagemCapa:"/placeholder-ebook-5.jpg",avaliacoes:4.8,numeroAvaliacoes:312,tags:["receitas","brigadeiro","gourmet","doces"],nivel:"iniciante",paginas:58,idioma:"Portugus",dataLancamento:new Date("2025-02-14"),bestseller:!0,preview:{capitulos:["Brigadeiro Clssico","Brigadeiros Especiais"],paginasGratuitas:8}},{id:"ebook-6",titulo:"Bolos Artsticos: Do Bsico ao Profissional",autor:"Fernanda Lima",categoria:"tecnicas",descricao:"Aprenda a criar bolos que so verdadeiras obras de arte",resumo:"Tcnicas de nivelamento, cobertura lisa, flores de acar e decoraes impressionantes.",preco:67.9,precoCreditos:17,imagemCapa:"/placeholder-ebook-6.jpg",avaliacoes:4.7,numeroAvaliacoes:145,tags:["bolos","decorao","flores","artstico"],nivel:"intermediario",paginas:103,idioma:"Portugus",dataLancamento:new Date("2025-03-05"),bestseller:!1,preview:{capitulos:["Preparando a Base Perfeita","Cobertura Lisa Profissional"],paginasGratuitas:14}}],bc=()=>{const e=localStorage.getItem("doce_calc_user_library");return e?JSON.parse(e):{userId:"user1",ebooks:[]}},pN=()=>{const e=localStorage.getItem("doce_calc_cart");return e?JSON.parse(e):[]},Bh=e=>{localStorage.setItem("doce_calc_cart",JSON.stringify(e))},gN=async(e,t)=>{await new Promise(n=>setTimeout(n,2e3));const s=bc(),a=e.map(n=>({ebookId:n,dataCompra:new Date,progresso:0,favorito:!1,notas:[]}));return s.ebooks.push(...a),localStorage.setItem("doce_calc_user_library",JSON.stringify(s)),localStorage.removeItem("doce_calc_cart"),{success:!0,purchaseId:`purchase_${Date.now()}`,downloads:e.map(n=>({ebookId:n,downloadLink:`/downloads/${n}.pdf`}))}};function xN(){const[e,t]=N.useState("all"),[s,a]=N.useState(""),[n,o]=N.useState("relevancia"),[i,l]=N.useState([]),[c,d]=N.useState(null),[h,m]=N.useState(!1),[p,b]=N.useState(!1),{remainingCredits:x}=pn();N.useEffect(()=>{l(pN()),d(bc())},[]);const j=fN.filter(y=>{const C=e==="all"||y.categoria===e,S=y.titulo.toLowerCase().includes(s.toLowerCase())||y.autor.toLowerCase().includes(s.toLowerCase())||y.tags.some(I=>I.toLowerCase().includes(s.toLowerCase()));return C&&S}).sort((y,C)=>{switch(n){case"preco-menor":return y.preco-C.preco;case"preco-maior":return C.preco-y.preco;case"avaliacoes":return C.avaliacoes-y.avaliacoes;default:return C.bestseller?1:-1}}),_=y=>{const C=i.find(I=>I.ebookId===y.id);let S;C?S=i.map(I=>I.ebookId===y.id?{...I,quantidade:I.quantidade+1}:I):S=[...i,{ebookId:y.id,ebook:y,quantidade:1}],l(S),Bh(S)},v=y=>{const C=i.filter(S=>S.ebookId!==y);l(C),Bh(C)},g=()=>i.reduce((y,C)=>y+C.ebook.preco*C.quantidade,0),u=()=>i.reduce((y,C)=>y+C.ebook.precoCreditos*C.quantidade,0),f=async y=>{if(i.length!==0){b(!0);try{const C=i.map(I=>I.ebookId);(await gN(C,y)).success&&(l([]),m(!1),d(bc()),alert("Compra realizada com sucesso! Os e-books foram adicionados  sua biblioteca."))}catch{alert("Erro ao processar compra. Tente novamente.")}finally{b(!1)}}},w=y=>{var C;return(C=c==null?void 0:c.ebooks)==null?void 0:C.some(S=>S.ebookId===y)};return r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("div",{className:"bg-white shadow-sm border-b",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs(q,{to:"/dashboard",className:"flex items-center text-gray-600 hover:text-gray-900",children:[r.jsx(ye,{className:"h-5 w-5 mr-2"}),"Voltar"]}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Marketplace de E-books"})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("span",{className:"text-sm text-gray-600",children:["Crditos: ",x]}),r.jsxs("button",{onClick:()=>m(!0),className:"relative p-2 text-gray-600 hover:text-gray-900",children:[r.jsx(mc,{className:"h-6 w-6"}),i.length>0&&r.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:i.length})]})]})]})})}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8",children:r.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[r.jsx("div",{className:"lg:w-1/4",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Filtros"}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Buscar"}),r.jsxs("div",{className:"relative",children:[r.jsx(Kt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx("input",{type:"text",value:s,onChange:y=>a(y.target.value),placeholder:"Ttulo, autor ou tag...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Categorias"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("button",{onClick:()=>t("all"),className:`w-full text-left px-3 py-2 rounded-lg ${e==="all"?"bg-orange-100 text-orange-700":"text-gray-600 hover:bg-gray-100"}`,children:"Todas as categorias"}),zh.map(y=>r.jsxs("button",{onClick:()=>t(y.id),className:`w-full text-left px-3 py-2 rounded-lg flex items-center ${e===y.id?"bg-orange-100 text-orange-700":"text-gray-600 hover:bg-gray-100"}`,children:[r.jsx("span",{className:"mr-2",children:y.icone}),y.nome," (",y.totalEbooks,")"]},y.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ordenar por"}),r.jsxs("select",{value:n,onChange:y=>o(y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500",children:[r.jsx("option",{value:"relevancia",children:"Relevncia"}),r.jsx("option",{value:"preco-menor",children:"Menor preo"}),r.jsx("option",{value:"preco-maior",children:"Maior preo"}),r.jsx("option",{value:"avaliacoes",children:"Melhor avaliado"})]})]})]})}),r.jsxs("div",{className:"lg:w-3/4",children:[r.jsx("div",{className:"mb-6",children:r.jsxs("p",{className:"text-gray-600",children:[j.length," e-book(s) encontrado(s)"]})}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:j.map(y=>{var C;return r.jsx("div",{className:"bg-white rounded-lg shadow-sm border hover:shadow-md transition-shadow",children:r.jsxs("div",{className:"p-6",children:[r.jsx("div",{className:"flex items-start justify-between mb-4",children:r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[y.bestseller&&r.jsx(ft,{className:"h-4 w-4 text-yellow-500"}),r.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full",children:(C=zh.find(S=>S.id===y.categoria))==null?void 0:C.nome})]}),r.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:y.titulo}),r.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["por ",y.autor]})]})}),r.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:y.resumo}),r.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(Mt,{className:"h-4 w-4 text-yellow-400 fill-current"}),r.jsxs("span",{className:"text-sm text-gray-600 ml-1",children:[y.avaliacoes," (",y.numeroAvaliacoes,")"]})]}),r.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[r.jsx(Cd,{className:"h-4 w-4 mr-1"}),y.paginas,"p"]})]}),r.jsxs("div",{className:"border-t pt-4",children:[r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsxs("div",{children:[y.promocao?r.jsxs("div",{children:[r.jsxs("span",{className:"text-lg font-bold text-orange-600",children:["R$ ",y.preco.toFixed(2)]}),r.jsxs("span",{className:"text-sm text-gray-500 line-through ml-2",children:["R$ ",y.promocao.precoOriginal.toFixed(2)]})]}):r.jsxs("span",{className:"text-lg font-bold text-gray-900",children:["R$ ",y.preco.toFixed(2)]}),r.jsxs("div",{className:"text-sm text-orange-600",children:["ou ",y.precoCreditos," crditos"]})]})}),w(y.id)?r.jsxs("div",{className:"flex items-center justify-center py-2 bg-green-100 text-green-700 rounded-lg",children:[r.jsx(ta,{className:"h-4 w-4 mr-2"}),"Na sua biblioteca"]}):r.jsxs("button",{onClick:()=>_(y),className:"w-full bg-orange-600 text-white py-2 px-4 rounded-lg hover:bg-orange-700 transition-colors flex items-center justify-center",children:[r.jsx(mc,{className:"h-4 w-4 mr-2"}),"Adicionar ao carrinho"]})]})]})},y.id)})})]})]})}),h&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Carrinho de Compras"}),r.jsx("button",{onClick:()=>m(!1),className:"text-gray-400 hover:text-gray-600",children:""})]}),i.length===0?r.jsx("p",{className:"text-gray-600",children:"Seu carrinho est vazio"}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"space-y-3 mb-4",children:i.map(y=>r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-medium text-sm",children:y.ebook.titulo}),r.jsxs("p",{className:"text-sm text-gray-600",children:["R$ ",y.ebook.preco.toFixed(2)]})]}),r.jsx("button",{onClick:()=>v(y.ebookId),className:"text-red-500 hover:text-red-700 ml-2",children:"Remover"})]},y.ebookId))}),r.jsxs("div",{className:"border-t pt-4",children:[r.jsxs("div",{className:"flex justify-between mb-4",children:[r.jsx("span",{className:"font-semibold",children:"Total:"}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"font-semibold",children:["R$ ",g().toFixed(2)]}),r.jsxs("div",{className:"text-sm text-orange-600",children:[u()," crditos"]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("button",{onClick:()=>f("dinheiro"),disabled:p,className:"w-full bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 disabled:opacity-50",children:p?"Processando...":"Comprar com Dinheiro"}),r.jsx("button",{onClick:()=>f("creditos"),disabled:p||x<u(),className:"w-full bg-orange-600 text-white py-2 px-4 rounded-lg hover:bg-orange-700 disabled:opacity-50",children:p?"Processando...":"Comprar com Crditos"})]})]})]})]})})]})}function vN(){const[e,t]=N.useState(null),[s,a]=N.useState(!1),[n,o]=N.useState(null),[i,l]=N.useState([]),[c,d]=N.useState({name:"",ingredients:10,laborHours:2,overhead:25,desiredMargin:30,estimatedDemand:50}),h=j=>{var v;const _=(v=j.target.files)==null?void 0:v[0];_&&(t(_),m())},m=async j=>{a(!0),await new Promise(v=>setTimeout(v,3e3)),o({recognizedItems:["Brigadeiro","Chocolate","Leite Condensado"],estimatedComplexity:"Mdio",suggestedIngredients:[{name:"Leite condensado",quantity:"1 lata",cost:4.5},{name:"Chocolate em p",quantity:"3 colheres",cost:2},{name:"Manteiga",quantity:"1 colher",cost:1.5},{name:"Chocolate granulado",quantity:"100g",cost:3}],totalIngredientCost:11,estimatedPreparationTime:1.5,difficultyLevel:"Iniciante",suggestedSellingPrice:18.5}),a(!1)},p=()=>{const j=c.ingredients,_=c.laborHours*15,v=(j+_)*(c.overhead/100),g=j+_+v,u=g*(1+c.desiredMargin/100),f=u*c.estimatedDemand;return{profitMargin:(u-g)/u*100,monthlyRevenue:f,unitCost:g,suggestedPrice:u}},b=()=>{if(!c.name){alert("Digite um nome para o cenrio");return}const j=p(),_={id:Date.now().toString(),name:c.name,description:`${c.estimatedDemand} unidades/ms, margem ${c.desiredMargin}%`,results:j};l([...i,_]),d(v=>({...v,name:""}))},x=p();return r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("div",{className:"bg-white shadow-sm border-b",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs(q,{to:"/dashboard",className:"flex items-center text-gray-600 hover:text-gray-900",children:[r.jsx(ye,{className:"h-5 w-5 mr-2"}),"Voltar"]}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Calculadora Avanada"})]})})})}),r.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx(Xa,{className:"h-6 w-6 text-orange-600 mr-2"}),r.jsx("h2",{className:"text-xl font-semibold",children:"Anlise por Foto (IA)"})]}),r.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:e?r.jsxs("div",{children:[r.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Arquivo: ",e.name]}),s?r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600 mx-auto mb-2"}),r.jsx("p",{className:"text-orange-600",children:"Analisando imagem..."})]}):n&&r.jsxs("div",{className:"text-left bg-gray-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"font-semibold mb-2",children:"Anlise Concluda:"}),r.jsxs("p",{children:[r.jsx("strong",{children:"Itens reconhecidos:"})," ",n.recognizedItems.join(", ")]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Complexidade:"})," ",n.estimatedComplexity]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Custo estimado:"})," R$ ",n.totalIngredientCost.toFixed(2)]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Tempo preparo:"})," ",n.estimatedPreparationTime,"h"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Preo sugerido:"})," R$ ",n.suggestedSellingPrice.toFixed(2)]})]})]}):r.jsxs("div",{children:[r.jsx(Xa,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"Envie uma foto do doce para anlise automtica"}),r.jsx("input",{type:"file",accept:"image/*",onChange:h,className:"hidden",id:"photo-upload"}),r.jsx("label",{htmlFor:"photo-upload",className:"bg-orange-600 text-white px-4 py-2 rounded-lg cursor-pointer hover:bg-orange-700",children:"Escolher Foto"})]})})]}),r.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx(ii,{className:"h-6 w-6 text-orange-600 mr-2"}),r.jsx("h2",{className:"text-xl font-semibold",children:"Cenrios de Negcio"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("input",{type:"text",placeholder:"Nome do cenrio",value:c.name,onChange:j=>d(_=>({..._,name:j.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Custo ingredientes (R$)"}),r.jsx("input",{type:"number",value:c.ingredients,onChange:j=>d(_=>({..._,ingredients:Number(j.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Horas de trabalho"}),r.jsx("input",{type:"number",step:"0.5",value:c.laborHours,onChange:j=>d(_=>({..._,laborHours:Number(j.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Overhead (%)"}),r.jsx("input",{type:"number",value:c.overhead,onChange:j=>d(_=>({..._,overhead:Number(j.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Margem desejada (%)"}),r.jsx("input",{type:"number",value:c.desiredMargin,onChange:j=>d(_=>({..._,desiredMargin:Number(j.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500"})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Demanda estimada (unidades/ms)"}),r.jsx("input",{type:"number",value:c.estimatedDemand,onChange:j=>d(_=>({..._,estimatedDemand:Number(j.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500"})]})]}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"font-semibold mb-2",children:"Resultado do Cenrio:"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-600",children:"Custo unitrio:"}),r.jsxs("span",{className:"font-semibold ml-2",children:["R$ ",x.unitCost.toFixed(2)]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-600",children:"Preo sugerido:"}),r.jsxs("span",{className:"font-semibold ml-2",children:["R$ ",x.suggestedPrice.toFixed(2)]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-600",children:"Margem de lucro:"}),r.jsxs("span",{className:"font-semibold ml-2",children:[x.profitMargin.toFixed(1),"%"]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-600",children:"Receita mensal:"}),r.jsxs("span",{className:"font-semibold ml-2",children:["R$ ",x.monthlyRevenue.toFixed(2)]})]})]})]}),r.jsxs("button",{onClick:b,className:"w-full bg-orange-600 text-white py-2 px-4 rounded-lg hover:bg-orange-700 flex items-center justify-center",children:[r.jsx(Wp,{className:"h-4 w-4 mr-2"}),"Salvar Cenrio"]})]})]})]}),i.length>0&&r.jsxs("div",{className:"mt-8 bg-white rounded-lg p-6 shadow-sm",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx(sr,{className:"h-6 w-6 text-orange-600 mr-2"}),r.jsx("h2",{className:"text-xl font-semibold",children:"Cenrios Comparativos"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(j=>r.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:j.name}),r.jsx("p",{className:"text-sm text-gray-600 mb-3",children:j.description}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Preo:"}),r.jsxs("span",{className:"font-semibold",children:["R$ ",j.results.suggestedPrice.toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Margem:"}),r.jsxs("span",{className:"font-semibold",children:[j.results.profitMargin.toFixed(1),"%"]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Receita/ms:"}),r.jsxs("span",{className:"font-semibold",children:["R$ ",j.results.monthlyRevenue.toFixed(2)]})]})]})]},j.id))})]}),r.jsxs("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6",children:[r.jsxs("div",{className:"flex items-center mb-3",children:[r.jsx(Fp,{className:"h-6 w-6 text-blue-600 mr-2"}),r.jsx("h3",{className:"text-lg font-semibold text-blue-900",children:"Dicas Inteligentes"})]}),r.jsxs("div",{className:"space-y-2 text-blue-800",children:[r.jsx("p",{children:" Considere aumentar a margem de lucro em produtos sazonais"}),r.jsx("p",{children:" Analise a concorrncia antes de definir o preo final"}),r.jsx("p",{children:" Monitore seus custos mensalmente para manter a rentabilidade"}),r.jsx("p",{children:" Teste diferentes cenrios para encontrar o ponto timo de vendas"})]})]})]})]})}function yN(){const[e,t]=N.useState({businessName:"Minha Confeitaria",logo:null,colors:{primary:"#f97316",secondary:"#fed7aa",accent:"#ea580c"},fonts:{heading:"Inter",body:"Inter"},layout:"grid",showPrices:!0,showDescriptions:!0,watermark:!0}),[s]=N.useState([{id:"1",name:"Brigadeiro Gourmet",description:"Delicioso brigadeiro artesanal feito com chocolate belga",price:3.5,image:"/placeholder-product-1.jpg",category:"Docinhos",featured:!0},{id:"2",name:"Bolo de Chocolate",description:"Bolo mido de chocolate com cobertura cremosa",price:45,image:"/placeholder-product-2.jpg",category:"Bolos",featured:!1},{id:"3",name:"Torta de Limo",description:"Torta refrescante com base crocante e creme de limo",price:35,image:"/placeholder-product-3.jpg",category:"Tortas",featured:!0}]),[a,n]=N.useState(!1),o=(c,d)=>{t(h=>({...h,colors:{...h.colors,[c]:d}}))},i=()=>{const c=Math.random().toString(36).substring(7),d=`${window.location.origin}/catalog/${c}`;navigator.clipboard.writeText(d),alert(`Link copiado para clipboard: ${d}`)},l=()=>{alert("Catlogo exportado para PDF! (Funcionalidade mock)")};return a?r.jsxs("div",{className:"min-h-screen",style:{backgroundColor:e.colors.secondary},children:[r.jsx("div",{className:"bg-white shadow-sm",children:r.jsx("div",{className:"max-w-4xl mx-auto px-4 py-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[e.logo&&r.jsx("img",{src:e.logo,alt:"Logo",className:"h-12 w-12 rounded-full"}),r.jsx("h1",{className:"text-3xl font-bold",style:{color:e.colors.primary,fontFamily:e.fonts.heading},children:e.businessName})]}),r.jsx("button",{onClick:()=>n(!1),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700",children:"Sair da Visualizao"})]})})}),r.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[r.jsx("h2",{className:"text-2xl font-semibold mb-6",style:{color:e.colors.primary,fontFamily:e.fonts.heading},children:"Nossos Produtos"}),r.jsx("div",{className:`grid gap-6 ${e.layout==="grid"?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3":e.layout==="list"?"grid-cols-1":"grid-cols-1 md:grid-cols-2"}`,children:s.map(c=>r.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"h-48 bg-gray-200 flex items-center justify-center",children:r.jsx("span",{className:"text-gray-500",children:"Imagem do produto"})}),c.featured&&r.jsxs("div",{className:"absolute top-2 right-2 px-2 py-1 rounded-full text-white text-xs font-semibold",style:{backgroundColor:e.colors.accent},children:[r.jsx(Mt,{className:"h-3 w-3 inline mr-1"}),"Destaque"]})]}),r.jsxs("div",{className:"p-4",children:[r.jsx("h3",{className:"font-semibold text-lg mb-2",style:{color:e.colors.primary,fontFamily:e.fonts.heading},children:c.name}),e.showDescriptions&&r.jsx("p",{className:"text-gray-600 text-sm mb-3",style:{fontFamily:e.fonts.body},children:c.description}),e.showPrices&&r.jsxs("div",{className:"text-xl font-bold",style:{color:e.colors.accent},children:["R$ ",c.price.toFixed(2)]})]})]},c.id))}),e.watermark&&r.jsx("div",{className:"text-center mt-8 text-gray-400 text-sm",children:"Criado com DoceCalc Pro"})]})]}):r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("div",{className:"bg-white shadow-sm border-b",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs(q,{to:"/dashboard",className:"flex items-center text-gray-600 hover:text-gray-900",children:[r.jsx(ye,{className:"h-5 w-5 mr-2"}),"Voltar"]}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Catlogo Personalizado"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("button",{onClick:()=>n(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center",children:[r.jsx(uc,{className:"h-4 w-4 mr-2"}),"Visualizar"]}),r.jsxs("button",{onClick:i,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center",children:[r.jsx(Kp,{className:"h-4 w-4 mr-2"}),"Compartilhar"]}),r.jsxs("button",{onClick:l,className:"bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 flex items-center",children:[r.jsx(ta,{className:"h-4 w-4 mr-2"}),"PDF"]})]})]})})}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx(qp,{className:"h-6 w-6 text-orange-600 mr-2"}),r.jsx("h2",{className:"text-xl font-semibold",children:"Identidade Visual"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome do Negcio"}),r.jsx("input",{type:"text",value:e.businessName,onChange:c=>t(d=>({...d,businessName:c.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Logo"}),r.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center",children:[r.jsx(Tj,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Clique para adicionar logo"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cores"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("label",{className:"text-sm text-gray-600 w-20",children:"Primria:"}),r.jsx("input",{type:"color",value:e.colors.primary,onChange:c=>o("primary",c.target.value),className:"w-12 h-8 rounded border border-gray-300"}),r.jsx("span",{className:"text-sm text-gray-600",children:e.colors.primary})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("label",{className:"text-sm text-gray-600 w-20",children:"Secundria:"}),r.jsx("input",{type:"color",value:e.colors.secondary,onChange:c=>o("secondary",c.target.value),className:"w-12 h-8 rounded border border-gray-300"}),r.jsx("span",{className:"text-sm text-gray-600",children:e.colors.secondary})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("label",{className:"text-sm text-gray-600 w-20",children:"Destaque:"}),r.jsx("input",{type:"color",value:e.colors.accent,onChange:c=>o("accent",c.target.value),className:"w-12 h-8 rounded border border-gray-300"}),r.jsx("span",{className:"text-sm text-gray-600",children:e.colors.accent})]})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx(Fj,{className:"h-6 w-6 text-orange-600 mr-2"}),r.jsx("h2",{className:"text-xl font-semibold",children:"Layout"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estilo de Layout"}),r.jsxs("select",{value:e.layout,onChange:c=>t(d=>({...d,layout:c.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500",children:[r.jsx("option",{value:"grid",children:"Grade"}),r.jsx("option",{value:"list",children:"Lista"}),r.jsx("option",{value:"magazine",children:"Revista"})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:e.showPrices,onChange:c=>t(d=>({...d,showPrices:c.target.checked})),className:"rounded border-gray-300 text-orange-600 focus:ring-orange-500"}),r.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Mostrar preos"})]}),r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:e.showDescriptions,onChange:c=>t(d=>({...d,showDescriptions:c.target.checked})),className:"rounded border-gray-300 text-orange-600 focus:ring-orange-500"}),r.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Mostrar descries"})]}),r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:e.watermark,onChange:c=>t(d=>({...d,watermark:c.target.checked})),className:"rounded border-gray-300 text-orange-600 focus:ring-orange-500"}),r.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Marca d'gua DoceCalc"})]})]})]})]})]}),r.jsx("div",{className:"lg:col-span-2",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Pr-visualizao"}),r.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",style:{backgroundColor:e.colors.secondary},children:[r.jsx("div",{className:"bg-white p-4 border-b",children:r.jsx("h3",{className:"text-xl font-bold",style:{color:e.colors.primary,fontFamily:e.fonts.heading},children:e.businessName})}),r.jsxs("div",{className:"p-4",children:[r.jsx("h4",{className:"text-lg font-semibold mb-3",style:{color:e.colors.primary,fontFamily:e.fonts.heading},children:"Nossos Produtos"}),r.jsx("div",{className:`grid gap-3 ${e.layout==="grid"?"grid-cols-2":(e.layout==="list","grid-cols-1")}`,children:s.slice(0,2).map(c=>r.jsxs("div",{className:"bg-white rounded p-3 shadow-sm",children:[r.jsx("div",{className:"h-16 bg-gray-200 rounded mb-2"}),r.jsx("h5",{className:"font-semibold text-sm",style:{color:e.colors.primary},children:c.name}),e.showDescriptions&&r.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[c.description.substring(0,40),"..."]}),e.showPrices&&r.jsxs("div",{className:"text-sm font-bold mt-1",style:{color:e.colors.accent},children:["R$ ",c.price.toFixed(2)]})]},c.id))}),e.watermark&&r.jsx("div",{className:"text-center mt-4 text-gray-400 text-xs",children:"Criado com DoceCalc Pro"})]})]})]})})]})})]})}const bN=()=>{const{profile:e,updateProfile:t}=we();if(!e)return null;const s=async()=>{if(confirm("Resetar seu plano para FREE para testar a funcionalidade de upgrade?"))try{await t({plano:"free"}),alert("Plano resetado para FREE! Agora voc pode testar o upgrade.")}catch(a){console.error("Erro ao resetar plano:",a)}};return e.plano==="free"?null:r.jsx("button",{onClick:s,className:"fixed bottom-4 right-4 bg-red-500 text-white px-4 py-2 rounded-lg text-sm hover:bg-red-600 transition-colors z-50",children:"Resetar para FREE (Teste)"})};function jN(){return r.jsx(Yv,{children:r.jsx(yj,{children:r.jsxs("div",{className:"w-full min-h-screen bg-background text-foreground",children:[r.jsxs(qv,{children:[r.jsx(ae,{path:"/",element:r.jsx(Bj,{})}),r.jsx(ae,{path:"/login",element:r.jsx(qj,{})}),r.jsx(ae,{path:"/reset-password",element:r.jsx(zj,{})}),r.jsx(ae,{path:"/dashboard",element:r.jsx(me,{children:r.jsx(Yj,{})})}),r.jsx(ae,{path:"/calculadora",element:r.jsx(me,{children:r.jsx(ew,{})})}),r.jsx(ae,{path:"/receitas",element:r.jsx(me,{children:r.jsx(zw,{})})}),r.jsx(ae,{path:"/ingredientes",element:r.jsx(me,{children:r.jsx(Bw,{})})}),r.jsx(ae,{path:"/clientes",element:r.jsx(me,{children:r.jsx(qw,{})})}),r.jsx(ae,{path:"/orcamentos",element:r.jsx(me,{children:r.jsx(R1,{})})}),r.jsx(ae,{path:"/relatorios",element:r.jsx(me,{requiresPro:!0,children:r.jsx(I1,{})})}),r.jsx(ae,{path:"/ferramentas",element:r.jsx(me,{children:r.jsx(A1,{})})}),r.jsx(ae,{path:"/upgrade",element:r.jsx(me,{children:r.jsx(O1,{})})}),r.jsx(ae,{path:"/upgrade/pix",element:r.jsx(me,{children:r.jsx(M1,{})})}),r.jsx(ae,{path:"/upgrade/stripe",element:r.jsx(me,{children:r.jsx(L1,{})})}),r.jsx(ae,{path:"/upgrade-success",element:r.jsx(me,{children:r.jsx(D1,{})})}),r.jsx(ae,{path:"/subscription",element:r.jsx(me,{children:r.jsx($1,{})})}),r.jsx(ae,{path:"/como-usar",element:r.jsx(me,{children:r.jsx(U1,{})})}),r.jsx(ae,{path:"/meu-catalogo",element:r.jsx(me,{children:r.jsx(F1,{})})}),r.jsx(ae,{path:"/catalogo/:userId",element:r.jsx(z1,{})}),r.jsx(ae,{path:"/encomendas",element:r.jsx(me,{children:r.jsx(B1,{})})}),r.jsx(ae,{path:"/comunidade",element:r.jsx(me,{children:r.jsx(q1,{})})}),r.jsx(ae,{path:"/backup-emergencial",element:r.jsx(me,{children:r.jsx(V1,{})})}),r.jsx(ae,{path:"/credit-test",element:r.jsx(me,{children:r.jsx(H1,{})})}),r.jsx(ae,{path:"/ai-assistant",element:r.jsx(me,{children:r.jsx(mN,{})})}),r.jsx(ae,{path:"/marketplace",element:r.jsx(me,{children:r.jsx(xN,{})})}),r.jsx(ae,{path:"/advanced-calculator",element:r.jsx(me,{children:r.jsx(vN,{})})}),r.jsx(ae,{path:"/custom-catalog",element:r.jsx(me,{children:r.jsx(yN,{})})})]}),r.jsx(bN,{})]})})})}sl.createRoot(document.getElementById("root")).render(r.jsx(Zh.StrictMode,{children:r.jsx(jN,{})}));
